<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Scala 简明教程 - David&#039;s World</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="David&#039;s World"><meta name="msapplication-TileImage" content="g"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="David&#039;s World"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Table of Contents Scala 简介 安装与配置 安装 Java 安装 Scala 安装 sbt   Hello World 交互模式 编译模式 构建模式   基本语法 基本概念 数据类型 整数 浮点数 字符 布尔 其它类型 变量与常量   流程控制逻辑 条件控制 循环控制 循环控制的 break 和 continue   类和对象 一个例子 构造函数 主构造函数 辅助构造函数 s"><meta property="og:type" content="blog"><meta property="og:title" content="David&#039;s World"><meta property="og:url" content="https://blog.weixinbook.net/"><meta property="og:site_name" content="David&#039;s World"><meta property="og:description" content="Table of Contents Scala 简介 安装与配置 安装 Java 安装 Scala 安装 sbt   Hello World 交互模式 编译模式 构建模式   基本语法 基本概念 数据类型 整数 浮点数 字符 布尔 其它类型 变量与常量   流程控制逻辑 条件控制 循环控制 循环控制的 break 和 continue   类和对象 一个例子 构造函数 主构造函数 辅助构造函数 s"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://blog.weixinbook.net/"><meta property="article:published_time" content="2019-06-23T16:00:00.000Z"><meta property="article:modified_time" content="2023-10-22T01:19:49.429Z"><meta property="article:author" content="David"><meta property="article:tag" content="scala"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://blog.weixinbook.net/"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.weixinbook.net/2019/06/24/Scala-simple-lessons.html"},"headline":"David's World","image":["https://blog.weixinbook.net/images/2019/jdk_18.png","https://blog.weixinbook.net/images/2019/akka_demo_1.png","https://blog.weixinbook.net/images/2019/hello-akka-architecture.png","https://blog.weixinbook.net/images/2019/hello-akka-messages.png"],"datePublished":"2019-06-23T16:00:00.000Z","dateModified":"2023-10-22T01:19:49.429Z","author":{"@type":"Person","name":"David"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject"}},"description":"Table of Contents Scala 简介 安装与配置 安装 Java 安装 Scala 安装 sbt   Hello World 交互模式 编译模式 构建模式   基本语法 基本概念 数据类型 整数 浮点数 字符 布尔 其它类型 变量与常量   流程控制逻辑 条件控制 循环控制 循环控制的 break 和 continue   类和对象 一个例子 构造函数 主构造函数 辅助构造函数 s"}</script><link rel="canonical" href="https://blog.weixinbook.net/2019/06/24/Scala-simple-lessons.html"><link rel="icon" href="/g"><meta name="referrer" content="no-referrer-when-downgrade"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/6.0.0/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Ubuntu:400,600|Source+Code+Pro|Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Microsoft YaHei:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&amp;amp;subset=latin,latin-ext|Inconsolata|Itim|Lobster.css"><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="/js/globalUtils.js"></script><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?39e8e1ef75d97052b7da575082dccf48";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-20318153-4" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-20318153-4');</script><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdnjs.loli.net/ajax/libs/pace/1.2.4/pace.min.js"></script><meta name="generator" content="Hexo 5.4.2"></head><body class="is-3-column has-navbar-fixed-top"><nav class="navbar navbar-main is-fixed-top"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">David&#039;s World</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a></div><div class="navbar-end"><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a><a class="navbar-item" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a></div></div></div></nav><script type="text/javascript" src="/js/theme-setting.js"></script><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><!--!--><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2019-06-24  <a class="commentCountImg" href="/2019/06/24/Scala-simple-lessons.html#comment-container"><span class="display-none-class">/2019/06/24/Scala-simple-lessons.html</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="a5152430aef6e0b46edd1efb54a76a8d">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>44 分钟  <i class="fas fa-pencil-alt"> </i>6.5 k</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">Scala 简明教程</h1><div class="content"><h1 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h1><ul>
<li><a href="#scala-%E7%AE%80%E4%BB%8B">Scala 简介</a></li>
<li><a href="#%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE">安装与配置</a><ul>
<li><a href="#%E5%AE%89%E8%A3%85-java">安装 Java</a></li>
<li><a href="#%E5%AE%89%E8%A3%85-scala">安装 Scala</a></li>
<li><a href="#%E5%AE%89%E8%A3%85-sbt">安装 sbt</a></li>
</ul>
</li>
<li><a href="#hello-world">Hello World</a><ul>
<li><a href="#%E4%BA%A4%E4%BA%92%E6%A8%A1%E5%BC%8F">交互模式</a></li>
<li><a href="#%E7%BC%96%E8%AF%91%E6%A8%A1%E5%BC%8F">编译模式</a></li>
<li><a href="#%E6%9E%84%E5%BB%BA%E6%A8%A1%E5%BC%8F">构建模式</a></li>
</ul>
</li>
<li><a href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95">基本语法</a></li>
<li><a href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">基本概念</a></li>
<li><a href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">数据类型</a><ul>
<li><a href="#%E6%95%B4%E6%95%B0">整数</a></li>
<li><a href="#%E6%B5%AE%E7%82%B9%E6%95%B0">浮点数</a></li>
<li><a href="#%E5%AD%97%E7%AC%A6">字符</a></li>
<li><a href="#%E5%B8%83%E5%B0%94">布尔</a></li>
<li><a href="#%E5%85%B6%E5%AE%83%E7%B1%BB%E5%9E%8B">其它类型</a></li>
<li><a href="#%E5%8F%98%E9%87%8F%E4%B8%8E%E5%B8%B8%E9%87%8F">变量与常量</a></li>
</ul>
</li>
<li><a href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E9%80%BB%E8%BE%91">流程控制逻辑</a><ul>
<li><a href="#%E6%9D%A1%E4%BB%B6%E6%8E%A7%E5%88%B6">条件控制</a></li>
<li><a href="#%E5%BE%AA%E7%8E%AF%E6%8E%A7%E5%88%B6">循环控制</a></li>
<li><a href="#%E5%BE%AA%E7%8E%AF%E6%8E%A7%E5%88%B6%E7%9A%84-break-%E5%92%8C-continue">循环控制的 break 和 continue</a></li>
</ul>
</li>
<li><a href="#%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1">类和对象</a><ul>
<li><a href="#%E4%B8%80%E4%B8%AA%E4%BE%8B%E5%AD%90">一个例子</a></li>
<li><a href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0">构造函数</a></li>
<li><a href="#%E4%B8%BB%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0">主构造函数</a></li>
<li><a href="#%E8%BE%85%E5%8A%A9%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0">辅助构造函数</a></li>
<li><a href="#singleton-objects">singleton objects</a></li>
<li><a href="#%E4%BC%B4%E7%94%9F%E5%AF%B9%E8%B1%A1-companion-object">伴生对象 Companion Object</a></li>
<li><a href="#%E7%BB%A7%E6%89%BF">继承</a><ul>
<li><a href="#override">override</a></li>
<li><a href="#%E4%B8%80%E4%B8%AA%E4%BE%8B%E5%AD%90-1">一个例子</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D">模式匹配</a><ul>
<li><a href="#%E7%AE%80%E5%8D%95%E4%BE%8B%E5%AD%90%E6%95%B4%E5%9E%8B%E6%95%B0%E5%80%BC%E5%8C%B9%E9%85%8D%E6%B8%A9%E5%BA%A6%E5%88%A4%E6%96%AD">简单例子（整型数值匹配、温度判断）</a></li>
<li><a href="#case-class">case class</a></li>
<li><a href="#apply">apply</a></li>
<li><a href="#unapply">unapply</a></li>
</ul>
</li>
<li><a href="#%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B-akka">并发编程 Akka</a><ul>
<li><a href="#akka-hello-world">Akka Hello World</a></li>
<li><a href="#akka-quickstart-with-scala">Akka Quickstart with Scala</a><ul>
<li><a href="#%E4%B8%8B%E8%BD%BD">下载</a></li>
</ul>
</li>
<li><a href="#%E9%85%8D%E7%BD%AE%E5%8F%8A%E8%BF%90%E8%A1%8C">配置及运行</a><ul>
<li><a href="#%E4%BB%A3%E7%A0%81%E8%A7%A3%E8%AF%BB">代码解读</a></li>
<li><a href="#%E6%80%9D%E8%80%83">思考</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE">参考文献</a></li>
</ul>
<span id="more"></span>

<h1 id="Scala-简介"><a href="#Scala-简介" class="headerlink" title="Scala 简介"></a>Scala 简介</h1><p>Scala 集成了面向对象编程和函数式编程语言的各种特性。Scala 的静态类型帮助减少复杂系统中的 bug，并且支持 JVM 和 JavaScript 运行环境，同时还提供丰富的类库可供使用。</p>
<p>Scala 的官网地址为 <a target="_blank" rel="noopener" href="https://www.scala-lang.org/">https://www.scala-lang.org</a></p>
<h2 id="安装与配置"><a href="#安装与配置" class="headerlink" title="安装与配置"></a>安装与配置</h2><p>Scala 运行环境依赖于 JVM，所以要先安装 Java。之后再安装 Scala，最后安装 sbt。</p>
<h3 id="安装-Java"><a href="#安装-Java" class="headerlink" title="安装 Java"></a>安装 Java</h3><p>在 oracle 官网下载 JavaSE 1.5 以上的版本。下载地址如下：</p>
<p><a target="_blank" rel="noopener" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></p>
<p>这里我选择 1.8 版本，根据自己的操作系统选择合适的下载包。</p>
<p><img src="/images/2019/jdk_18.png" alt="JDk 1.8"></p>
<p>设置环境变量的教程在这里：<a target="_blank" rel="noopener" href="https://www.runoob.com/java/java-environment-setup.html">https://www.runoob.com/java/java-environment-setup.html</a></p>
<p>设置完成后，我们可以在终端查看 <code>java</code> 和 <code>javac</code> 命令:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ java -version</span><br><span class="line">java version &quot;1.8.0_181&quot;</span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_181-b13)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.181-b13, mixed mode)</span><br><span class="line">$ javac -version</span><br><span class="line">javac 1.8.0_181</span><br></pre></td></tr></table></figure>

<h3 id="安装-Scala"><a href="#安装-Scala" class="headerlink" title="安装 Scala"></a>安装 Scala</h3><p>Scala 的下载地址为 <a target="_blank" rel="noopener" href="https://www.scala-lang.org/download/">https://www.scala-lang.org/download/</a> 。可以根据自己的操作系统选择合适的下载包。</p>
<p>如果操作系统为 Windows，可以查找 msi 的安装文件。</p>
<p>如果操作系统为 Mac，可以使用 Homebrew 来安装：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew update</span><br><span class="line">brew install scala</span><br></pre></td></tr></table></figure>

<p>如果操作系统为 Ubuntu，直接用 <code>apt-get install scala</code> 来进行安装。</p>
<p>安装完成后，可以运行如下命令来查看 <code>scala</code> 命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ scala -version</span><br><span class="line">Scala code runner version 2.13.0 -- Copyright 2002-2019, LAMP/EPFL and Lightbend, Inc.</span><br></pre></td></tr></table></figure>

<h3 id="安装-sbt"><a href="#安装-sbt" class="headerlink" title="安装 sbt"></a>安装 sbt</h3><p>sbt 的全称为 Simple Build Tool，用于管理 Scala 项目的依赖并进行构建，其地址就像 Maven 之于 Java。其下载地址为 <a target="_blank" rel="noopener" href="https://www.scala-sbt.org/download.html">https://www.scala-sbt.org/download.html</a>。</p>
<h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><p>我们演示三种输出 <code>Hello World</code> 的方式。</p>
<h3 id="交互模式"><a href="#交互模式" class="headerlink" title="交互模式"></a>交互模式</h3><p>在命令行输入 <code>scala</code> 命令，进入交互模式。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">scala</span></span><br><span class="line">Welcome to Scala 2.13.0 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_181).</span><br><span class="line">Type in expressions for evaluation. Or try :help.</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">scala&gt; </span><span class="language-bash">println(<span class="string">&quot;Hello World&quot;</span>);</span></span><br><span class="line">Hello World</span><br></pre></td></tr></table></figure>

<h3 id="编译模式"><a href="#编译模式" class="headerlink" title="编译模式"></a>编译模式</h3><p>创建一个文件 HelloWorldDemo.scala，文件内容如下：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">HelloWorldDemo</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]):<span class="type">Unit</span> = &#123;</span><br><span class="line">      println(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行编译及运行命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">scalac HelloWorldDemo.scala</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">scala HelloWorldDemo</span></span><br><span class="line">Hello World</span><br></pre></td></tr></table></figure>

<h3 id="构建模式"><a href="#构建模式" class="headerlink" title="构建模式"></a>构建模式</h3><p>可以使用 sbt 来构建。如编译模式的文件为例，我们将其放到 helloworld 目录里。确保该目录只有一个文件。输入 sbt 命令，然后用 run 命令运行。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sbt</span></span><br><span class="line">sbt:helloworld&gt; run</span><br><span class="line">[info] Updating ...</span><br><span class="line">[info] Done updating.</span><br><span class="line">[info] Compiling 1 Scala source to /Users/didi/code/scala/helloworld/target/scala-2.12/classes ...</span><br><span class="line">[info] Non-compiled module &#x27;compiler-bridge_2.12&#x27; for Scala 2.12.7. Compiling...</span><br><span class="line">[info]   Compilation completed in 8.672s.</span><br><span class="line">[info] Done compiling.</span><br><span class="line">[info] Packaging /Users/didi/code/scala/helloworld/target/scala-2.12/helloworld_2.12-0.1.0-SNAPSHOT.jar ...</span><br><span class="line">[info] Done packaging.</span><br><span class="line">[info] Running HelloWorldDemo </span><br><span class="line">Hello World</span><br><span class="line">[success] Total time: 18 s, completed 2019-6-25 15:19:19</span><br><span class="line">sbt:helloworld&gt; run</span><br><span class="line">[info] Running HelloWorldDemo </span><br><span class="line">Hello World</span><br><span class="line">[success] Total time: 0 s, completed 2019-6-25 15:19:23</span><br></pre></td></tr></table></figure>

<p>可以看到，第一次 run 时，需要进行编译，耗时 18 s。第二次 run 时，不需再编译即可运行，耗时可以忽略不计。</p>
<h1 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h1><h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><ul>
<li>类：外部事物的抽象，具有方法和属性。</li>
<li>对象：对象是类的具体实例；类是对象的抽象。</li>
<li>方法：方法是类的某个行为动作。一个类可以包含多个方法。</li>
<li>属性：类的若干属性，又称为字段。</li>
<li>语句：语句是执行代码的单元。如果一行只有一个语句，那么结尾不需要加<code>;</code>分号。如果一行之内有多个语句的话，需要加分号。</li>
<li>注释：支持多行注释 <code>/* */</code> 和单行注释 <code>//</code>。</li>
<li>包：使用 <code>package</code>  定义包，类似于命名空间。</li>
<li>引用：使用 <code>import</code> 引用包。注意 Scala 的包引用可以出现在任何地方，而不只是文件的顶部。</li>
<li>标识符：标识符可以由字母和下划线开头，后面可以连接数字、字母和下划线。区分大小写。</li>
<li>类名：类名采用驼峰写法，每个单词首字母大写。</li>
<li>方法名：方法名称的第一个字母用小写，其余每个单词的第一个字母大写。</li>
<li>程序文件名：程序文件名称和对象名称要完全匹配。虽然新版本不再要求，但为了保证代码能通过旧版本编译器，还是保持一致较好。</li>
<li>程序入口：程序入口为 main 方法。</li>
</ul>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>Scala 的数据类型分为以下几类：</p>
<h3 id="整数"><a href="#整数" class="headerlink" title="整数"></a>整数</h3><table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Byte</td>
<td>8位有符号补码整数。数值区间为 -128 到 127</td>
</tr>
<tr>
<td>Short</td>
<td>16位有符号补码整数。数值区间为 -32768 到 32767</td>
</tr>
<tr>
<td>Int</td>
<td>32位有符号补码整数。数值区间为 -2147483648 到 2147483647</td>
</tr>
<tr>
<td>Long</td>
<td>64位有符号补码整数。数值区间为 -9223372036854775808 到 9223372036854775807</td>
</tr>
</tbody></table>
<h3 id="浮点数"><a href="#浮点数" class="headerlink" title="浮点数"></a>浮点数</h3><table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Float</td>
<td>32 位, IEEE 754 标准的单精度浮点数</td>
</tr>
<tr>
<td>Double</td>
<td>64 位 IEEE 754 标准的双精度浮点数</td>
</tr>
</tbody></table>
<h3 id="字符"><a href="#字符" class="headerlink" title="字符"></a>字符</h3><table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Char</td>
<td>16位无符号Unicode字符, 区间值为 U+0000 到 U+FFFF</td>
</tr>
<tr>
<td>String</td>
<td>字符序列</td>
</tr>
</tbody></table>
<h3 id="布尔"><a href="#布尔" class="headerlink" title="布尔"></a>布尔</h3><table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Boolean</td>
<td>true或false</td>
</tr>
</tbody></table>
<h3 id="其它类型"><a href="#其它类型" class="headerlink" title="其它类型"></a>其它类型</h3><table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Unit</td>
<td>表示无值，和其他语言中void等同。用作不返回任何结果的方法的结果类型。Unit只有一个实例值，写成()。</td>
</tr>
<tr>
<td>Null</td>
<td>null 或空引用</td>
</tr>
<tr>
<td>Nothing</td>
<td>Nothing类型在Scala的类层级的最低端；它是任何其他类型的子类型。</td>
</tr>
<tr>
<td>Any</td>
<td>Any是所有其他类的超类</td>
</tr>
<tr>
<td>AnyRef</td>
<td>AnyRef类是Scala里所有引用类(reference class)的基类</td>
</tr>
</tbody></table>
<h3 id="变量与常量"><a href="#变量与常量" class="headerlink" title="变量与常量"></a>变量与常量</h3><p>变量在程序运行过程中，其值可能发生改变，采用 <code>var</code> 声明变量；</p>
<p>常量在程序运行过程中，其值不会发生改变，采用 <code>val</code> 声明常量。</p>
<p>声明变量和常量的语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var VariableName : DataType [=  Initial Value]</span><br><span class="line"></span><br><span class="line">或</span><br><span class="line"></span><br><span class="line">val VariableName : DataType [=  Initial Value]</span><br></pre></td></tr></table></figure>

<p>另外 DataType 是可选的。如果不指定数据类型，编译器会自动根据初始值推断出数据类型。</p>
<h2 id="流程控制逻辑"><a href="#流程控制逻辑" class="headerlink" title="流程控制逻辑"></a>流程控制逻辑</h2><p>Scala 的流程控制主要包括条件控制和循环控制。</p>
<h3 id="条件控制"><a href="#条件控制" class="headerlink" title="条件控制"></a>条件控制</h3><p>其使用方法和其它语言类似，示例如下：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(布尔表达式 <span class="number">1</span>)&#123;</span><br><span class="line">   <span class="comment">// 如果布尔表达式 1 为 true 则执行该语句块</span></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(布尔表达式 <span class="number">2</span>)&#123;</span><br><span class="line">   <span class="comment">// 如果布尔表达式 2 为 true 则执行该语句块</span></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(布尔表达式 <span class="number">3</span>)&#123;</span><br><span class="line">   <span class="comment">// 如果布尔表达式 3 为 true 则执行该语句块</span></span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="comment">// 如果以上条件都为 false 执行该语句块</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="循环控制"><a href="#循环控制" class="headerlink" title="循环控制"></a>循环控制</h3><p>循环支持三种循环类型：while 循环、do while 循环和 for 循环。</p>
<ol>
<li><p>while 循环</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while(condition)</span><br><span class="line">&#123;</span><br><span class="line">   //语句块</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>do while循环</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">do &#123;</span><br><span class="line">   //语句块</span><br><span class="line">&#125; while( condition );</span><br></pre></td></tr></table></figure>
</li>
<li><p>for 循环</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for( var x &lt;- Range )&#123;</span><br><span class="line">   //语句块</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="循环控制的-break-和-continue"><a href="#循环控制的-break-和-continue" class="headerlink" title="循环控制的 break 和 continue"></a>循环控制的 break 和 continue</h3><p> Scala 的 break 的语法和其它语言不同，它完全是基于类的一种实现。</p>
<p>文件：BreakDemo.scala</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scala.util.control.<span class="type">Breaks</span>;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">BreakDemo</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]) &#123;</span><br><span class="line">      <span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">val</span> numList = <span class="type">List</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">val</span> loop = <span class="keyword">new</span> <span class="type">Breaks</span>;</span><br><span class="line">      loop.breakable &#123;</span><br><span class="line">         <span class="keyword">for</span>( i &lt;- numList)&#123;</span><br><span class="line">            println( <span class="string">&quot;第&quot;</span> + i + <span class="string">&quot;次&quot;</span> );</span><br><span class="line">            <span class="keyword">if</span>( i == <span class="number">3</span> )&#123;</span><br><span class="line">               loop.<span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      println( <span class="string">&quot;事不过三&quot;</span> );</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">第1次</span><br><span class="line">第2次</span><br><span class="line">第3次</span><br><span class="line">事不过三</span><br></pre></td></tr></table></figure>

<p>遗憾的是，Scala 里并没有 continue 的语法，即跳过本次循环。但想一下 continue 的实质是什么？跳过满足特定条件的循环中的元素，即过滤掉某些元素，让其不参与循环。Scala 提供了循环过滤的机制。</p>
<p>我们看一下示例。</p>
<p>文件：ForFilterDemo.scala</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.<span class="type">Random</span>;</span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ForFilterDemo</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]) &#123;</span><br><span class="line">        <span class="keyword">var</span> r = <span class="keyword">new</span> <span class="type">Random</span>()</span><br><span class="line">        <span class="keyword">var</span> rand = r.nextInt(<span class="number">100</span>)</span><br><span class="line">        <span class="keyword">var</span> i = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span>(i &lt;- <span class="number">0</span> to <span class="number">10</span></span><br><span class="line">            <span class="keyword">if</span> rand % <span class="number">2</span> == <span class="number">0</span><span class="comment">//只保留所有的偶数</span></span><br><span class="line">        )&#123;</span><br><span class="line">            println(rand)</span><br><span class="line">            rand = r.nextInt(<span class="number">100</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果（每次都不相同）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">6</span><br><span class="line">90</span><br><span class="line">12</span><br></pre></td></tr></table></figure>

<p>我们循环 10 次，每次取一个 100 以内的随机数，要求只保留偶数，所有的奇数都过滤掉。实现上可以用 for + if 的循环过滤机制来实现。</p>
<h1 id="类和对象"><a href="#类和对象" class="headerlink" title="类和对象"></a>类和对象</h1><p>Scala 类的特征有如下几个：</p>
<ul>
<li><p>单继承</p>
</li>
<li><p>无 static 静态属性和方法，但提供了单例对象（singleton objects）的概念</p>
</li>
<li><p>支持抽象类和抽象方法</p>
</li>
<li><p>支持重载（override）</p>
</li>
</ul>
<h2 id="一个例子"><a href="#一个例子" class="headerlink" title="一个例子"></a>一个例子</h2><p>首先看一个类的示例。Point 类有两个属性 x 和 y，并有一个方法 move。</p>
<p>文件：PointDemo.scala</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io._</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span>(<span class="params">val xc: <span class="type">Int</span>, val yc: <span class="type">Int</span></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> x: <span class="type">Int</span> = xc</span><br><span class="line">   <span class="keyword">var</span> y: <span class="type">Int</span> = yc</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">move</span></span>(dx: <span class="type">Int</span>, dy: <span class="type">Int</span>) &#123;</span><br><span class="line">      x = x + dx</span><br><span class="line">      y = y + dy</span><br><span class="line">      println (<span class="string">&quot;Point x location : &quot;</span> + x);</span><br><span class="line">      println (<span class="string">&quot;Point y location : &quot;</span> + y);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">PointDemo</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]) &#123;</span><br><span class="line">      <span class="keyword">val</span> pt = <span class="keyword">new</span> <span class="type">Point</span>(<span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Move to a new location</span></span><br><span class="line">      pt.move(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行命令如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">scalac PointDemo.scala</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">scala PointDemo</span></span><br><span class="line">Point x location : 20</span><br><span class="line">Point y location : 30</span><br></pre></td></tr></table></figure>

<p>在这个例子里，需要注意的是，如果文件中定义了不止一个类，则要使用 <code>scalac</code> 进行编译后再运行。</p>
<p>这个例子还可以学到构造函数和 singleton objects 的知识，我们分述如下。</p>
<h2 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h2><p>Scala 的构造函数分为主构造函数和辅助构造函数。</p>
<h3 id="主构造函数"><a href="#主构造函数" class="headerlink" title="主构造函数"></a>主构造函数</h3><p>在上例中，定义 Point 类的语句如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">class Point(val xc: Int, val yc: Int) </span><br></pre></td></tr></table></figure>

<p>其中 <code>xc</code>、<code>yc</code> 为构造函数的参数。那么其函数的定义在哪里呢？</p>
<p>在类的主体里，除了 <code>def</code> 定义的函数之外，其余部分都是主构造函数。</p>
<h3 id="辅助构造函数"><a href="#辅助构造函数" class="headerlink" title="辅助构造函数"></a>辅助构造函数</h3><p>辅助构造函数用于创造不同类型、不同数目参数的构造函数。定义方法如下：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">this</span></span>()&#123;</span><br><span class="line">	<span class="comment">//function body</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们改造一下<code>PointDemo.scala</code>文件，来演示主构造函数和辅助构造函数。</p>
<p>文件：PointDemo2.scala</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io._</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span>(<span class="params">val xc: <span class="type">Int</span>, val yc: <span class="type">Int</span></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> x: <span class="type">Int</span> = xc</span><br><span class="line">   <span class="keyword">var</span> y: <span class="type">Int</span> = yc</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>()&#123;<span class="comment">//if no params,set (0,0)</span></span><br><span class="line">       <span class="keyword">this</span>(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">       println(<span class="string">&quot;Auxiliary constructor&quot;</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">move</span></span>(dx: <span class="type">Int</span>, dy: <span class="type">Int</span>) &#123;</span><br><span class="line">      x = x + dx</span><br><span class="line">      y = y + dy</span><br><span class="line">      println (<span class="string">&quot;Point x location : &quot;</span> + x);</span><br><span class="line">      println (<span class="string">&quot;Point y location : &quot;</span> + y);</span><br><span class="line">   &#125;</span><br><span class="line">   println(<span class="string">&quot;Main Constructor&quot;</span>);<span class="comment">//this is main constructor too</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">PointDemo2</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]) &#123;</span><br><span class="line">      <span class="keyword">val</span> pt1 = <span class="keyword">new</span> <span class="type">Point</span>(<span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line">      <span class="comment">// Move to a new location</span></span><br><span class="line">      pt1.move(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">val</span> pt2 = <span class="keyword">new</span> <span class="type">Point</span>();</span><br><span class="line">      <span class="comment">// Move to a new location</span></span><br><span class="line">      pt2.move(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Main Constructor</span><br><span class="line">Point x location : 20</span><br><span class="line">Point y location : 30</span><br><span class="line">Main Constructor</span><br><span class="line">Auxiliary constructor</span><br><span class="line">Point x location : 10</span><br><span class="line">Point y location : 10</span><br></pre></td></tr></table></figure>

<p>我们看以下问题：</p>
<ol>
<li>主构造函数和辅助构造函数有什么区别？</li>
</ol>
<p>答案是没有区别。当我们实例化一个类时，编译器会自动匹配参数类型和参数个数相符的构造的函数。</p>
<ol start="2">
<li>能否将主构造函数和辅助构造函数的参数完全一致？</li>
</ol>
<p>答案是不能。我们定义辅助构造函数如下：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//    demo for same main and auxiliary constructors  </span></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(xc: <span class="type">Int</span>, yc: <span class="type">Int</span>)&#123;</span><br><span class="line">          <span class="keyword">this</span>(xc,yc)</span><br><span class="line">          println(<span class="string">&quot;Auxiliary constructor&quot;</span>)</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<p>结果编译通不过。</p>
<h3 id="singleton-objects"><a href="#singleton-objects" class="headerlink" title="singleton objects"></a>singleton objects</h3><p><code>singleton object</code> 有如下特征：</p>
<ul>
<li><p><code>singleton object</code> 里的方法是全局可见的</p>
</li>
<li><p>不能为 <code>singleton object</code> 创建实例</p>
</li>
</ul>
<ul>
<li><code>singleton object</code> 的主构造函数不接收参数</li>
<li><code>singleton object</code> 可以继承 <code> class</code>  和 <code> traits</code></li>
<li><code>singleton object</code>始终存在 <code>main</code> 方法</li>
<li>不需要创建实例即可调用 <code>singleton object</code> 的方法</li>
</ul>
<p>我们查看一下实例。</p>
<p>文件：SingletonDemo.scala</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Exampleofsingleton</span> </span></span><br><span class="line">&#123; </span><br><span class="line">      </span><br><span class="line">    <span class="comment">// Varaibles of singleton object </span></span><br><span class="line">    <span class="keyword">var</span> str1 = <span class="string">&quot;Welcome ! MIS&quot;</span>; </span><br><span class="line">    <span class="keyword">var</span> str2 = <span class="string">&quot;This is Scala language tutorial&quot;</span>; </span><br><span class="line">      </span><br><span class="line">    <span class="comment">// Method of singleton object </span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">display</span></span>() </span><br><span class="line">    &#123; </span><br><span class="line">        println(<span class="string">&quot;Called By Display Method&quot;</span>)</span><br><span class="line">        println(str1); </span><br><span class="line">        println(str2); </span><br><span class="line">    &#125; </span><br><span class="line">&#125; </span><br><span class="line">  </span><br><span class="line"><span class="comment">// Singleton object with named as Main </span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">SingletonDemo</span>  </span></span><br><span class="line">&#123; </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]) </span><br><span class="line">    &#123; </span><br><span class="line">          </span><br><span class="line">        <span class="comment">// Calling method of singleton object  </span></span><br><span class="line">        <span class="type">Exampleofsingleton</span>.display(); </span><br><span class="line"></span><br><span class="line">        println(<span class="string">&quot;Called By Property&quot;</span>)</span><br><span class="line">        println(<span class="type">Exampleofsingleton</span>.str1);</span><br><span class="line">        println(<span class="type">Exampleofsingleton</span>.str2);</span><br><span class="line">    &#125; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>输出结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Called By Display Method</span><br><span class="line">Welcome ! MIS</span><br><span class="line">This is Scala language tutorial</span><br><span class="line">Called By Property</span><br><span class="line">Welcome ! MIS</span><br><span class="line">This is Scala language tutorial</span><br></pre></td></tr></table></figure>

<h2 id="伴生对象-Companion-Object"><a href="#伴生对象-Companion-Object" class="headerlink" title="伴生对象 Companion Object"></a>伴生对象 Companion Object</h2><p>我们经常会遇到这样的场景：定义一个类，实现常见的功能；再定义一个类来调用以完成特定的任务。这样带来命名问题，这有时也是让开发者头疼的一件事情。</p>
<p>Scala 的伴生对象完美解决了这个问题。我们先看下例子：</p>
<p>文件：SingletonDemo.scala</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Companion class </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CompanionDemo</span> </span></span><br><span class="line">&#123; </span><br><span class="line">      </span><br><span class="line">    <span class="comment">// Variables of Companion class </span></span><br><span class="line">    <span class="keyword">var</span> str1 = <span class="string">&quot;MIS&quot;</span>; </span><br><span class="line">    <span class="keyword">var</span> str2 = <span class="string">&quot;Tutorial of Companion object&quot;</span>; </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> str3 = <span class="string">&quot;Hello MIS&quot;</span></span><br><span class="line">      </span><br><span class="line">    <span class="comment">// Method of Companion class </span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show</span></span>() </span><br><span class="line">    &#123; </span><br><span class="line">        println(str1); </span><br><span class="line">        println(str2); </span><br><span class="line">    &#125; </span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">mis</span></span>()</span><br><span class="line">    &#123;</span><br><span class="line">        println(<span class="string">&quot;In mis method&quot;</span>)</span><br><span class="line">        println(str3)</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line">  </span><br><span class="line"><span class="comment">// Companion object </span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">CompanionDemo</span></span></span><br><span class="line">&#123; </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>])  </span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="type">CompanionDemo</span>(); </span><br><span class="line">        obj.show(); </span><br><span class="line">        println(obj.str3);</span><br><span class="line">        obj.mis();</span><br><span class="line">    &#125; </span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MIS</span><br><span class="line">Tutorial of Companion object</span><br><span class="line">Hello MIS</span><br><span class="line">In mis method</span><br><span class="line">Hello MIS</span><br></pre></td></tr></table></figure>

<p>可以看到同时存在 <code>class CompanionDemo</code>  和 <code>object CompanionDemo</code>。</p>
<p>伴生对象的特点如下：</p>
<ul>
<li><code>companion object </code> 和 <code>companion class</code> 的名称必须完全一致</li>
<li><code>companion object </code> 必须和 <code>companion class</code> 定义在同一个文件中</li>
<li><code>companion object </code>  可以访问  <code>companion class</code> 的私有属性和私有方法</li>
</ul>
<p>伴生对象除了解决命名问题外，还可以对外提供接口，方便调用。</p>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><p>Scala 是单继承的语言，子类只有一个父类。</p>
<p>###抽象类和抽象方法</p>
<p>定义一个抽象类，需要使用 <code>abstract</code> 关键字。例如：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span>(<span class="params">iname:<span class="type">String</span></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="comment">//class body</span></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">eat</span> </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义抽象方法，执行保持方法的函数体为空即可。</p>
<p>子类继承抽象父类，必须实现父类的所有的抽象方法。</p>
<h3 id="override"><a href="#override" class="headerlink" title="override"></a>override</h3><p> <code>override</code> 关键字有以下特点：</p>
<ul>
<li><p>子类重写父类的抽象方法，不需要加 <code>override</code> 关键字。</p>
</li>
<li><p>子类重新父类的普通方法，需要加 <code>override</code> 关键字。</p>
</li>
<li><p>只有主构造函数才可以往父类的构造函数里写参数。</p>
</li>
</ul>
<h3 id="一个例子-1"><a href="#一个例子-1" class="headerlink" title="一个例子"></a>一个例子</h3><p>我们看一个演示继承的例子。</p>
<p>文件：InheritDemo.scala</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span>(<span class="params">iname:<span class="type">String</span></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">val</span> name:<span class="type">String</span> = iname;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span> </span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">move</span></span>()&#123;</span><br><span class="line">        println(<span class="string">&quot;All Animals Can Move&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">display</span></span>()&#123;</span><br><span class="line">        println(<span class="string">&quot;Hello &quot;</span>+name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>(<span class="params">iname:<span class="type">String</span></span>) <span class="keyword">extends</span> <span class="title">Animal</span>(<span class="params">iname:<span class="type">String</span></span>) </span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span></span>()&#123;</span><br><span class="line">        println(<span class="string">&quot;Dog Eats Bones&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">move</span></span>()&#123;</span><br><span class="line">        println(<span class="string">&quot;Dog is An Animal, So Dog can move&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">display</span></span>(msg:<span class="type">String</span>)&#123;</span><br><span class="line">        println(<span class="string">&quot;Hello &quot;</span>+name+<span class="string">&quot; &quot;</span>+msg)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">InheritDemo</span></span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>])  </span><br><span class="line">    &#123; </span><br><span class="line">       <span class="keyword">val</span> dog = <span class="keyword">new</span> <span class="type">Dog</span>(<span class="string">&quot;Teddy&quot;</span>);</span><br><span class="line">       dog.eat();</span><br><span class="line">       dog.move();</span><br><span class="line">       dog.display(<span class="string">&quot;Welcome!&quot;</span>)</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Dog Eats Bones</span><br><span class="line">Dog is An Animal, So Dog can move</span><br><span class="line">Hello Teddy Welcome!</span><br></pre></td></tr></table></figure>

<p><code>Dog</code> 类的 <code>display</code> 方法为什么没有加 <code>override</code> ？</p>
<p>答案是 <code>Dog</code> 类的 <code>display</code> 方法的参数和 <code>Animal</code> 类的 <code>display</code> 方法不同，不属于重写，所以不需要加 <code>override</code> 。</p>
<h1 id="模式匹配"><a href="#模式匹配" class="headerlink" title="模式匹配"></a>模式匹配</h1><p>Scala 使用 <code>case</code> 关键字实现多条件逻辑匹配的功能。每个条件是一个备选项，称为模式。每个备选项包含一个模式和一到多个表达式。语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">case 模式 =&gt; 语句;</span><br></pre></td></tr></table></figure>

<p>我们看几个例子，学习模式匹配。</p>
<h2 id="简单例子（整型数值匹配、温度判断）"><a href="#简单例子（整型数值匹配、温度判断）" class="headerlink" title="简单例子（整型数值匹配、温度判断）"></a>简单例子（整型数值匹配、温度判断）</h2><p>文件：Temperature.scala</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Temperature</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]) &#123;</span><br><span class="line">        println(display(<span class="number">37</span>))</span><br><span class="line">        println(display(<span class="number">100</span>))</span><br><span class="line">        println(display(<span class="number">50</span>))</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">display</span></span>(x: <span class="type">Int</span>): <span class="type">String</span> = x <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">0</span> =&gt; <span class="string">&quot;freezing point&quot;</span> </span><br><span class="line">      <span class="keyword">case</span> <span class="number">100</span> =&gt; <span class="string">&quot;boiling point&quot;</span> </span><br><span class="line">      <span class="keyword">case</span> x <span class="keyword">if</span>(x &gt;= <span class="number">36.5</span> &amp;&amp; x &lt;= <span class="number">37.5</span>) =&gt; <span class="string">&quot;body point&quot;</span></span><br><span class="line">      <span class="keyword">case</span> _ =&gt; <span class="string">&quot;other point&quot;</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">body point</span><br><span class="line">boiling point</span><br><span class="line">other point</span><br></pre></td></tr></table></figure>

<p>match 表达式通过以代码编写的先后次序尝试每个模式来完成计算，只要发现有一个匹配的case，剩下的case不会继续匹配。</p>
<h2 id="case-class"><a href="#case-class" class="headerlink" title="case class"></a>case class</h2><p>文件：CaseClassDemo.scala</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">CaseClassDemo</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]) &#123;</span><br><span class="line">       <span class="keyword">val</span> alice = <span class="keyword">new</span> <span class="type">Person</span>(<span class="string">&quot;Alice&quot;</span>, <span class="number">25</span>)</span><br><span class="line">    	 <span class="keyword">val</span> bob = <span class="keyword">new</span> <span class="type">Person</span>(<span class="string">&quot;Bob&quot;</span>, <span class="number">32</span>)</span><br><span class="line">       <span class="keyword">val</span> charlie = <span class="keyword">new</span> <span class="type">Person</span>(<span class="string">&quot;Charlie&quot;</span>, <span class="number">32</span>)</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">for</span> (person &lt;- <span class="type">List</span>(alice, bob, charlie)) &#123;</span><br><span class="line">        person <span class="keyword">match</span> &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="type">Person</span>(<span class="string">&quot;Alice&quot;</span>, <span class="number">25</span>) =&gt; println(<span class="string">&quot;Hi Alice!&quot;</span>)</span><br><span class="line">            <span class="keyword">case</span> <span class="type">Person</span>(<span class="string">&quot;Bob&quot;</span>, <span class="number">32</span>) =&gt; println(<span class="string">&quot;Hi Bob!&quot;</span>)</span><br><span class="line">            <span class="keyword">case</span> <span class="type">Person</span>(name, age) =&gt;</span><br><span class="line">               println(<span class="string">&quot;Age: &quot;</span> + age + <span class="string">&quot; year, name: &quot;</span> + name + <span class="string">&quot;?&quot;</span>)</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// 样例类</span></span><br><span class="line">   <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params">name: <span class="type">String</span>, age: <span class="type">Int</span></span>)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Hi Alice!</span><br><span class="line">Hi Bob!</span><br><span class="line">Age: 32 year, name: Charlie?</span><br></pre></td></tr></table></figure>

<p>在声明样例类时，下面的过程自动发生了：</p>
<ul>
<li>构造器的每个参数都成为val，除非显式被声明为var，但是并不推荐这么做；</li>
<li>在伴生对象中提供了apply方法，所以可以不使用new关键字就可构建对象；</li>
<li>提供unapply方法使模式匹配可以工作；</li>
<li>生成toString、equals、hashCode和copy方法，除非显示给出这些方法的定义。</li>
</ul>
<h2 id="apply"><a href="#apply" class="headerlink" title="apply"></a>apply</h2><p>将对象以函数的方式进行调用时，scala会隐式地将调用改为在该对象上调用apply方法。例如XXX(“hello”)实际调用的是XXX.apply(“hello”), 因此apply方法又被称为注入方法。apply方法常用于创建类实例的工厂方法。示例如下：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Greeting</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(name: <span class="type">String</span>) = <span class="string">&quot;Hello &quot;</span> + name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">Greeting</span>.apply(“<span class="type">Lucy</span>”) <span class="comment">//与下面的调用等价 </span></span><br><span class="line"><span class="type">Greeting</span>(“<span class="type">Lucy</span>”) <span class="comment">//结果为 Hello Lucy</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="unapply"><a href="#unapply" class="headerlink" title="unapply"></a>unapply</h2><p>与 apply 相对的是 unapply 方法，它的用法与 apply 类似，但其作用是用来抽取部分参数，它也称为抽取方法，主要用于模式匹配时抽取某些参数 case XXX(str) &#x3D;&gt; println(str)</p>
<h1 id="并发编程-Akka"><a href="#并发编程-Akka" class="headerlink" title="并发编程 Akka"></a>并发编程 Akka</h1><p>从 Scala 的 2.11.0 版本开始，Scala 的 Actors 库已经过时了。早在 Scala 2.10.0 的时候，默认的 actor 库即是 Akka。所以我们重点讲述 Akka。</p>
<p>Akka 是构建高并发、分布式、弹性消息驱动的 Java 和 Scala 应用的工具集合。官网地址是<a target="_blank" rel="noopener" href="https://akka.io/">https://akka.io/</a> 。</p>
<h2 id="Akka-Hello-World"><a href="#Akka-Hello-World" class="headerlink" title="Akka Hello World"></a>Akka Hello World</h2><p>示例代码我已经放到 github 上了，地址为 <a target="_blank" rel="noopener" href="https://github.com/spetacular/scala-simple-lesson%E3%80%82">https://github.com/spetacular/scala-simple-lesson。</a></p>
<p>下载代码后，用命令行 <code>cd akkademo</code> 进入示例代码目录。</p>
<p>依次运行 <code>stb</code> 、<code>compile</code>、<code>run</code>，可以看到类似于如下输出：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sbt</span></span><br><span class="line">[info] Loading project definition from /Users/didi/Documents/GitHub/scala-simple-lesson/akkademo/project</span><br><span class="line">[info] Loading settings for project akkademo from build.sbt ...</span><br><span class="line">[info] Set current project to akka-demo (in build file:/Users/didi/Documents/GitHub/scala-simple-lesson/akkademo/)</span><br><span class="line">[info] sbt server started at local:///Users/didi/.sbt/1.0/server/bc7cb24c19aa2ba1ff53/sock</span><br><span class="line">sbt:akka-demo&gt; compile</span><br><span class="line">[info] Updating ...</span><br><span class="line">[info] Done updating.</span><br><span class="line">[info] Compiling 1 Scala source to /Users/didi/Documents/GitHub/scala-simple-lesson/akkademo/target/scala-2.12/classes ...</span><br><span class="line">[info] Done compiling.</span><br><span class="line">[success] Total time: 6 s, completed 2019-6-25 17:57:00</span><br><span class="line">sbt:akka-demo&gt; run</span><br><span class="line">[info] Packaging /Users/didi/Documents/GitHub/scala-simple-lesson/akkademo/target/scala-2.12/akka-demo_2.12-1.0.jar ...</span><br><span class="line">[info] Done packaging.</span><br><span class="line">[info] Running com.example.AkkaDemo </span><br><span class="line">fine thank you</span><br><span class="line">huh?</span><br></pre></td></tr></table></figure>

<p>我们看下代码：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>  <span class="keyword">package</span> com.example;</span><br><span class="line"><span class="number">2</span>  <span class="keyword">import</span> akka.actor.&#123;<span class="type">Actor</span>,<span class="type">ActorSystem</span>,<span class="type">Props</span>&#125;</span><br><span class="line"><span class="number">3</span>  </span><br><span class="line"><span class="number">4</span>  <span class="class"><span class="keyword">class</span> <span class="title">HelloActor</span> <span class="keyword">extends</span> <span class="title">Actor</span> </span>&#123;</span><br><span class="line"><span class="number">5</span>    <span class="function"><span class="keyword">def</span> <span class="title">receive</span> </span>= &#123;</span><br><span class="line"><span class="number">6</span>      <span class="keyword">case</span> <span class="string">&quot;how are you&quot;</span> =&gt; println(<span class="string">&quot;fine thank you&quot;</span>)</span><br><span class="line"><span class="number">7</span>      <span class="keyword">case</span> _       =&gt; println(<span class="string">&quot;huh?&quot;</span>)</span><br><span class="line"><span class="number">8</span>    &#125;</span><br><span class="line"><span class="number">9</span>  &#125;</span><br><span class="line"><span class="number">10</span>  </span><br><span class="line"><span class="number">11</span>  <span class="class"><span class="keyword">object</span> <span class="title">AkkaDemo</span> <span class="keyword">extends</span> <span class="title">App</span> </span>&#123;</span><br><span class="line"><span class="number">12</span>    <span class="keyword">val</span> system = <span class="type">ActorSystem</span>(<span class="string">&quot;HelloSystem&quot;</span>)</span><br><span class="line"><span class="number">13</span>    <span class="comment">// default Actor constructor</span></span><br><span class="line"><span class="number">14</span>    <span class="keyword">val</span> helloActor = system.actorOf(<span class="type">Props</span>[<span class="type">HelloActor</span>], name = <span class="string">&quot;helloactor&quot;</span>)</span><br><span class="line"><span class="number">15</span>    helloActor ! <span class="string">&quot;how are you&quot;</span></span><br><span class="line"><span class="number">16</span>    helloActor ! <span class="string">&quot;Bonjour&quot;</span></span><br><span class="line"><span class="number">17</span>  &#125;</span><br></pre></td></tr></table></figure>

<p>我们先看下调用示例图：</p>
<p><img src="/images/2019/akka_demo_1.png" alt="akka demo调用示例"></p>
<p>第 4 至 9 行，定义了 <code>HelloActor</code> 的类。<code>HelloActor</code> 继承在 <code>Actor</code> 类，实现了 <code>receive</code> 方法。该方法根据传递过来的字符串，做出不同的动作。</p>
<p>第 11 行，<code>AkkaDemo</code> 继承了 <code>App</code> 类，作为<code>main class</code>，是程序执行的入口。</p>
<p>第 12 行，定义了一个 <code>ActorSystem</code>，这是所有 <code>Actor</code> 的容器。</p>
<p>第 14 行，定义了一个 <code>Actor</code>。<code>Actor</code> 是一种类似于线程、goroutine的一个事物，是执行调度的一个单位。在创建  <code>helloActor</code> 的时候，并没有用 <code>new</code> 关键字来实例化，而是用 <code>actorOf</code> 来创建一个 <code>Actor</code> 的引用。<code>actorOf</code> 接收两个参数：配置类 <code>Props</code> 和名称。这种方式的优点是在分布式系统上，调用方不用关心实质的 <code>Actor</code> 在哪台机器上。</p>
<p>第 15、16行，将<code>&quot;how are you&quot;</code>和<code>&quot;Bonjour&quot;</code>的消息传递给 <code>HelloActor</code>。</p>
<p>这个例子演示了 akka 的 AkkaSystem、Actor、消息传递是如何交互的。但这个例子，仍然是串行处理的。我们将在下面的例子中，演示并行编程。</p>
<h2 id="Akka-Quickstart-with-Scala"><a href="#Akka-Quickstart-with-Scala" class="headerlink" title="Akka Quickstart with Scala"></a>Akka Quickstart with Scala</h2><p>这个例子来自 Akka 官方示例，网址为 <a target="_blank" rel="noopener" href="https://developer.lightbend.com/guides/akka-quickstart-scala/index.html">Akka Quickstart with Scala</a> 。</p>
<h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p>下载方法有两种：</p>
<ol>
<li>在官网页面  <a target="_blank" rel="noopener" href="https://developer.lightbend.com/start/?group=akka&project=akka-quickstart-scala">Lightbend Tech Hub</a> 点击 <code>CREATE A PROJECT FOR ME</code> </li>
<li>嫌速度慢可以下载 <a target="_blank" rel="noopener" href="https://github.com/spetacular/scala-simple-lesson">Scala Simple Lesson</a> ，解压后 <strong>akka-quickstart-scala</strong> 目录即是示例代码。</li>
</ol>
<h2 id="配置及运行"><a href="#配置及运行" class="headerlink" title="配置及运行"></a>配置及运行</h2><p>解压后的代码，构建脚本可能没有运行权限，需要用 <code>chmod</code> 命令添加可运行权限。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> akka-quickstart-scala</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">chmod</span> u+x ./sbt</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">chmod</span> u+x ./sbt-dist/bin/sbt</span></span><br></pre></td></tr></table></figure>

<p>然后输入 <code>./sbt</code> 。这时会下载依赖的包，可能会持续一段时间。</p>
<p>然后在 stb 输入提示符下，输入 <code>reStart</code> 来启动示例。类似的输出如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">sbt:akka-quickstart-scala&gt; reStart</span><br><span class="line">[info] Updating ...</span><br><span class="line">[info] Done updating.</span><br><span class="line">[info] Compiling 1 Scala source to /Users/didi/Documents/GitHub/scala-simple-lesson/akka-quickstart-scala/target/scala-2.12/classes ...</span><br><span class="line">[info] Done compiling.</span><br><span class="line">[info] Application akka-quickstart-scala not yet started</span><br><span class="line">[info] Starting application akka-quickstart-scala in the background ...</span><br><span class="line">akka-quickstart-scala Starting com.example.AkkaQuickstart.main()</span><br><span class="line">[success] Total time: 5 s, completed 2019-6-25 20:16:03</span><br><span class="line">sbt:akka-quickstart-scala&gt; akka-quickstart-scala [INFO] [06/25/2019 20:16:04.502] [helloAkka-akka.actor.default-dispatcher-5] [akka://helloAkka/user/printerActor] Greeting received (from Actor[akka://helloAkka/user/helloGreeter#266661191]): Hello, Scala</span><br><span class="line">akka-quickstart-scala [INFO] [06/25/2019 20:16:04.502] [helloAkka-akka.actor.default-dispatcher-5] [akka://helloAkka/user/printerActor] Greeting received (from Actor[akka://helloAkka/user/howdyGreeter#1265860474]): Howdy, Akka</span><br><span class="line">akka-quickstart-scala [INFO] [06/25/2019 20:16:04.502] [helloAkka-akka.actor.default-dispatcher-5] [akka://helloAkka/user/printerActor] Greeting received (from Actor[akka://helloAkka/user/howdyGreeter#1265860474]): Howdy, Lightbend</span><br><span class="line">akka-quickstart-scala [INFO] [06/25/2019 20:16:04.502] [helloAkka-akka.actor.default-dispatcher-5] [akka://helloAkka/user/printerActor] Greeting received (from Actor[akka://helloAkka/user/goodDayGreeter#1928998630]): Good day, Play</span><br></pre></td></tr></table></figure>

<h3 id="代码解读"><a href="#代码解读" class="headerlink" title="代码解读"></a>代码解读</h3><p>完整代码如下：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>  <span class="comment">//#full-example</span></span><br><span class="line"><span class="number">2</span>  <span class="keyword">package</span> com.example</span><br><span class="line"><span class="number">3</span>  </span><br><span class="line"><span class="number">4</span>  <span class="keyword">import</span> akka.actor.&#123; <span class="type">Actor</span>, <span class="type">ActorLogging</span>, <span class="type">ActorRef</span>, <span class="type">ActorSystem</span>, <span class="type">Props</span> &#125;</span><br><span class="line"><span class="number">5</span>  </span><br><span class="line"><span class="number">6</span>  <span class="comment">//#greeter-companion</span></span><br><span class="line"><span class="number">7</span>  <span class="comment">//#greeter-messages</span></span><br><span class="line"><span class="number">8</span>  <span class="class"><span class="keyword">object</span> <span class="title">Greeter</span> </span>&#123;</span><br><span class="line"><span class="number">9</span>    <span class="comment">//#greeter-messages</span></span><br><span class="line"><span class="number">10</span>    <span class="function"><span class="keyword">def</span> <span class="title">props</span></span>(message: <span class="type">String</span>, printerActor: <span class="type">ActorRef</span>): <span class="type">Props</span> = <span class="type">Props</span>(<span class="keyword">new</span> <span class="type">Greeter</span>(message, printerActor))</span><br><span class="line"><span class="number">11</span>    <span class="comment">//#greeter-messages</span></span><br><span class="line"><span class="number">12</span>    <span class="keyword">final</span> <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">WhoToGreet</span>(<span class="params">who: <span class="type">String</span></span>)</span></span><br><span class="line"><span class="number">13</span>    <span class="keyword">case</span> <span class="class"><span class="keyword">object</span> <span class="title">Greet</span></span></span><br><span class="line"><span class="number">14</span>  &#125;</span><br><span class="line"><span class="number">15</span>  <span class="comment">//#greeter-messages</span></span><br><span class="line"><span class="number">16</span>  <span class="comment">//#greeter-companion</span></span><br><span class="line"><span class="number">17</span>  </span><br><span class="line"><span class="number">18</span>  <span class="comment">//#greeter-actor</span></span><br><span class="line"><span class="number">19</span>  <span class="class"><span class="keyword">class</span> <span class="title">Greeter</span>(<span class="params">message: <span class="type">String</span>, printerActor: <span class="type">ActorRef</span></span>) <span class="keyword">extends</span> <span class="title">Actor</span> </span>&#123;</span><br><span class="line"><span class="number">20</span>    <span class="keyword">import</span> <span class="type">Greeter</span>._</span><br><span class="line"><span class="number">21</span>    <span class="keyword">import</span> <span class="type">Printer</span>._</span><br><span class="line"><span class="number">22</span>  </span><br><span class="line"><span class="number">23</span>    <span class="keyword">var</span> greeting = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="number">24</span>  </span><br><span class="line"><span class="number">25</span>    <span class="function"><span class="keyword">def</span> <span class="title">receive</span> </span>= &#123;</span><br><span class="line"><span class="number">26</span>      <span class="keyword">case</span> <span class="type">WhoToGreet</span>(who) =&gt;</span><br><span class="line"><span class="number">27</span>        greeting = message + <span class="string">&quot;, &quot;</span> + who</span><br><span class="line"><span class="number">28</span>      <span class="keyword">case</span> <span class="type">Greet</span>           =&gt;</span><br><span class="line"><span class="number">29</span>        <span class="comment">//#greeter-send-message</span></span><br><span class="line"><span class="number">30</span>        printerActor ! <span class="type">Greeting</span>(greeting)</span><br><span class="line"><span class="number">31</span>        <span class="comment">//#greeter-send-message</span></span><br><span class="line"><span class="number">32</span>    &#125;</span><br><span class="line"><span class="number">33</span>  &#125;</span><br><span class="line"><span class="number">34</span>  <span class="comment">//#greeter-actor</span></span><br><span class="line"><span class="number">35</span>  </span><br><span class="line"><span class="number">36</span>  <span class="comment">//#printer-companion</span></span><br><span class="line"><span class="number">37</span>  <span class="comment">//#printer-messages</span></span><br><span class="line"><span class="number">38</span>  <span class="class"><span class="keyword">object</span> <span class="title">Printer</span> </span>&#123;</span><br><span class="line"><span class="number">39</span>    <span class="comment">//#printer-messages</span></span><br><span class="line"><span class="number">40</span>    <span class="function"><span class="keyword">def</span> <span class="title">props</span></span>: <span class="type">Props</span> = <span class="type">Props</span>[<span class="type">Printer</span>]</span><br><span class="line"><span class="number">41</span>    <span class="comment">//#printer-messages</span></span><br><span class="line"><span class="number">42</span>    <span class="keyword">final</span> <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Greeting</span>(<span class="params">greeting: <span class="type">String</span></span>)</span></span><br><span class="line"><span class="number">43</span>  &#125;</span><br><span class="line"><span class="number">44</span>  <span class="comment">//#printer-messages</span></span><br><span class="line"><span class="number">45</span>  <span class="comment">//#printer-companion</span></span><br><span class="line"><span class="number">46</span>  </span><br><span class="line"><span class="number">47</span>  <span class="comment">//#printer-actor</span></span><br><span class="line"><span class="number">48</span>  <span class="class"><span class="keyword">class</span> <span class="title">Printer</span> <span class="keyword">extends</span> <span class="title">Actor</span> <span class="keyword">with</span> <span class="title">ActorLogging</span> </span>&#123;</span><br><span class="line"><span class="number">49</span>    <span class="keyword">import</span> <span class="type">Printer</span>._</span><br><span class="line"><span class="number">50</span>  </span><br><span class="line"><span class="number">51</span>    <span class="function"><span class="keyword">def</span> <span class="title">receive</span> </span>= &#123;</span><br><span class="line"><span class="number">52</span>      <span class="keyword">case</span> <span class="type">Greeting</span>(greeting) =&gt;</span><br><span class="line"><span class="number">53</span>        log.info(<span class="string">&quot;Greeting received (from &quot;</span> + sender() + <span class="string">&quot;): &quot;</span> + greeting)</span><br><span class="line"><span class="number">54</span>    &#125;</span><br><span class="line"><span class="number">55</span>  &#125;</span><br><span class="line"><span class="number">56</span>  <span class="comment">//#printer-actor</span></span><br><span class="line"><span class="number">57</span>  </span><br><span class="line"><span class="number">58</span>  <span class="comment">//#main-class</span></span><br><span class="line"><span class="number">59</span>  <span class="class"><span class="keyword">object</span> <span class="title">AkkaQuickstart</span> <span class="keyword">extends</span> <span class="title">App</span> </span>&#123;</span><br><span class="line"><span class="number">60</span>    <span class="keyword">import</span> <span class="type">Greeter</span>._</span><br><span class="line"><span class="number">61</span>  </span><br><span class="line"><span class="number">62</span>    <span class="comment">// Create the &#x27;helloAkka&#x27; actor system</span></span><br><span class="line"><span class="number">63</span>    <span class="keyword">val</span> system: <span class="type">ActorSystem</span> = <span class="type">ActorSystem</span>(<span class="string">&quot;helloAkka&quot;</span>)</span><br><span class="line"><span class="number">64</span>  </span><br><span class="line"><span class="number">65</span>    <span class="comment">//#create-actors</span></span><br><span class="line"><span class="number">66</span>    <span class="comment">// Create the printer actor</span></span><br><span class="line"><span class="number">67</span>    <span class="keyword">val</span> printer: <span class="type">ActorRef</span> = system.actorOf(<span class="type">Printer</span>.props, <span class="string">&quot;printerActor&quot;</span>)</span><br><span class="line"><span class="number">68</span>  </span><br><span class="line"><span class="number">69</span>    <span class="comment">// Create the &#x27;greeter&#x27; actors</span></span><br><span class="line"><span class="number">70</span>    <span class="keyword">val</span> howdyGreeter: <span class="type">ActorRef</span> =</span><br><span class="line"><span class="number">71</span>      system.actorOf(<span class="type">Greeter</span>.props(<span class="string">&quot;Howdy&quot;</span>, printer), <span class="string">&quot;howdyGreeter&quot;</span>)</span><br><span class="line"><span class="number">72</span>    <span class="keyword">val</span> helloGreeter: <span class="type">ActorRef</span> =</span><br><span class="line"><span class="number">73</span>      system.actorOf(<span class="type">Greeter</span>.props(<span class="string">&quot;Hello&quot;</span>, printer), <span class="string">&quot;helloGreeter&quot;</span>)</span><br><span class="line"><span class="number">74</span>    <span class="keyword">val</span> goodDayGreeter: <span class="type">ActorRef</span> =</span><br><span class="line"><span class="number">75</span>      system.actorOf(<span class="type">Greeter</span>.props(<span class="string">&quot;Good day&quot;</span>, printer), <span class="string">&quot;goodDayGreeter&quot;</span>)</span><br><span class="line"><span class="number">76</span>    <span class="comment">//#create-actors</span></span><br><span class="line"><span class="number">77</span>  </span><br><span class="line"><span class="number">78</span>    <span class="comment">//#main-send-messages</span></span><br><span class="line"><span class="number">79</span>    howdyGreeter ! <span class="type">WhoToGreet</span>(<span class="string">&quot;Akka&quot;</span>)</span><br><span class="line"><span class="number">80</span>    howdyGreeter ! <span class="type">Greet</span></span><br><span class="line"><span class="number">81</span>    </span><br><span class="line"><span class="number">82</span>    howdyGreeter ! <span class="type">WhoToGreet</span>(<span class="string">&quot;Lightbend&quot;</span>)</span><br><span class="line"><span class="number">83</span>    howdyGreeter ! <span class="type">Greet</span></span><br><span class="line"><span class="number">84</span>    </span><br><span class="line"><span class="number">85</span>    helloGreeter ! <span class="type">WhoToGreet</span>(<span class="string">&quot;Scala&quot;</span>)</span><br><span class="line"><span class="number">86</span>    helloGreeter ! <span class="type">Greet</span></span><br><span class="line"><span class="number">87</span>  </span><br><span class="line"><span class="number">88</span>    goodDayGreeter ! <span class="type">WhoToGreet</span>(<span class="string">&quot;Play&quot;</span>)</span><br><span class="line"><span class="number">89</span>    goodDayGreeter ! <span class="type">Greet</span></span><br><span class="line"><span class="number">90</span>    </span><br><span class="line"><span class="number">91</span>    <span class="comment">//#main-send-messages</span></span><br><span class="line"><span class="number">92</span>  &#125;</span><br><span class="line"><span class="number">93</span>  <span class="comment">//#main-class</span></span><br><span class="line"><span class="number">94</span>  <span class="comment">//#full-example</span></span><br></pre></td></tr></table></figure>

<p>我们先直观地看下这个文件的大体框架，如下图所示。</p>
<p><img src="/images/2019/hello-akka-architecture.png" alt="akka demo 架构图"></p>
<p>首先 main 类创建了ActorSystem 容器，然后创建了三个 Greeter Actor 实例和一个 Printer Actor 实例。</p>
<p><img src="/images/2019/hello-akka-messages.png" alt="akka消息传递"></p>
<p>main 类首先将消息传递给三个 Greeter Actor，然后三个 Greeter Actor 分别再将消息传递给 Printer Actor，并由 Printer Actor 将消息打印出来。</p>
<p>下面是详细解读。</p>
<p>第 6 至 34 行，定义了 <code>Greeter</code> 的伴友类和伴友对象。注意 <code>Greeter</code> 是一个 <code>Actor</code>，其 <code>receive</code> 方法定义在第 25 至 32 行。</p>
<p>第 12 行定义了 <code>WhoToGreet</code> 的样例类：<code>final case class WhoToGreet(who: String)</code>  。</p>
<p>第 13 行定义了 <code>Greet</code> 的样例类：<code>case object Greet</code> 。</p>
<p><code>Greeter</code>、<code>WhoToGreet</code>、<code>Greet</code> 的关系是怎样的呢？</p>
<p><code>Greeter</code> 意思为礼仪人员。它接收的 <code>case class</code> 是 <code>WhoToGreet</code> 和 <code>Greet</code>。就是说礼仪人员有两个用途：一是组织根据人员组装合适的礼貌用语(WhoToGreet），另一个是将拼好的礼貌用语用嘴巴(Printer)说出去(Greet)。</p>
<p>第 36 至 56 行定义了 <code>Printer</code> 的伴友类和伴友对象。</p>
<p>第 41 行定义了 <code>Greeting</code> 样例类：<code>case class Greeting(greeting: String)</code> 。</p>
<p>第 51 至 54 行定义了 <code>Printer</code> 的 <code>receive</code> 方法。它接收 <code>Greeting</code>，并将 <code>greeting</code> 内容打印出来。</p>
<p>第 58 至 94 行为入口方法。</p>
<p>第 63 行定义了名为 <code>helloAkka</code> 的 Actor System。</p>
<p>第 69 至 76 行创建了三个 Greeter 的实例：<code>howdyGreeter</code>、<code>helloGreeter</code>、<code>goodDayGreeter</code>。他们会说不同的礼貌用语。</p>
<p>第 78 至 91 行调用 Actor 进行并发处理。我们以第一个调用为例，看一下处理流程。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">howdyGreeter ! <span class="type">WhoToGreet</span>(<span class="string">&quot;Akka&quot;</span>)</span><br><span class="line">howdyGreeter ! <span class="type">Greet</span></span><br></pre></td></tr></table></figure>

<p>首先将 <code>WhoToGreet(&quot;Akka&quot;)</code> 的消息传递给 <code>howdyGreeter</code>，这时会激活如下语句：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">26</span>      <span class="keyword">case</span> <span class="type">WhoToGreet</span>(who) =&gt;</span><br><span class="line"><span class="number">27</span>        greeting = message + <span class="string">&quot;, &quot;</span> + who</span><br></pre></td></tr></table></figure>

<p>此时</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">message = <span class="string">&quot;Howdy&quot;</span></span><br><span class="line">who = <span class="string">&quot;Akka&quot;</span></span><br><span class="line">greeting = message + <span class="string">&quot;, &quot;</span> + who = <span class="string">&quot;Howdy, Akka&quot;</span></span><br></pre></td></tr></table></figure>

<p>然后将 Greet 的消息传递给 <code>howdyGreeter</code>，这时会激活如下语句：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">28</span>      <span class="keyword">case</span> <span class="type">Greet</span>           =&gt;</span><br><span class="line"><span class="number">29</span>        <span class="comment">//#greeter-send-message</span></span><br><span class="line"><span class="number">30</span>        printerActor ! <span class="type">Greeting</span>(greeting)</span><br><span class="line"><span class="number">31</span>        <span class="comment">//#greeter-send-message</span></span><br></pre></td></tr></table></figure>

<p>此时将 <code>Greet</code> 的消息通过 <code>Greeting</code> 传递给 <code>PrinterActor</code>。</p>
<p>最后 PrintActor 收到消息后，将消息打印在日志上。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">51</span>    <span class="function"><span class="keyword">def</span> <span class="title">receive</span> </span>= &#123;</span><br><span class="line"><span class="number">52</span>      <span class="keyword">case</span> <span class="type">Greeting</span>(greeting) =&gt;</span><br><span class="line"><span class="number">53</span>        log.info(<span class="string">&quot;Greeting received (from &quot;</span> + sender() + <span class="string">&quot;): &quot;</span> + greeting)</span><br><span class="line"><span class="number">54</span>    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h3><p>如果我们多次输入 <code>reStrart</code> 来运行该例子，会发现输出的礼貌用语的次序各不相同。这就是说程序是并发执行的。同时需要注意，无论怎么执行，<code>howdyGreeter</code> 的两次结果，<code>Akka</code> 始终在 <code>Lightbend</code> 之前。我们可以得出结论：</p>
<ul>
<li>不同的 <code>Actor</code> 直接是并发执行的。</li>
<li>同一个 <code>Actor</code> 接收到的多个消息，是串行执行的。</li>
</ul>
<h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p><a target="_blank" rel="noopener" href="https://www.geeksforgeeks.org/scala-singleton-and-companion-objects/">https://www.geeksforgeeks.org/scala-singleton-and-companion-objects/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.tutorialspoint.com/scala/index.htm">https://www.tutorialspoint.com/scala/index.htm</a></p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/scala/scala-tutorial.html">https://www.runoob.com/scala/scala-tutorial.html</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/shenlei19911210/article/details/78538255">https://blog.csdn.net/shenlei19911210/article/details/78538255</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.scala-lang.org/zh-cn/tour/pattern-matching.html">https://docs.scala-lang.org/zh-cn/tour/pattern-matching.html</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.lightbend.com/guides/akka-quickstart-scala/">https://developer.lightbend.com/guides/akka-quickstart-scala/</a></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>Scala 简明教程</p><p><a href="https://blog.weixinbook.net/2019/06/24/Scala-simple-lessons.html">https://blog.weixinbook.net/2019/06/24/Scala-simple-lessons.html</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><a href="https://blog.weixinbook.net"><p>David</p></a></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2019-06-24</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2023-10-22</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="recommend-area"></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/css/share.min.css"><div class="social-share"></div><script src="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2019/09/23/https-tutorials.html"><i class="level-item fas fa-chevron-left"></i><span class="level-item">HTTPS 简明教程</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2018/12/01/olap-12-rules.html"><span class="level-item">OLAP 的 12 条规则</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--><div class="card"><div class="card-content"><div class="title is-5">评论</div><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://blog.weixinbook.net/2019/06/24/Scala-simple-lessons.html';
            this.page.identifier = '2019/06/24/Scala-simple-lessons.html';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'davidblogs' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><!--!--><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://i.weixinbook.net/logo.ico" alt="David"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">David</p><p class="is-size-6 is-block">我心光明亦复何言</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>地球</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">62</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">27</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">66</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="/" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/spetacular"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div><div><hr><p id="hitokoto">:D 一言句子获取中...</p><script type="text/javascript" defer>function getYiyan(){
                                $.getJSON("https://v1.hitokoto.cn/", function (data) {
                                if(data){
                                    $('#hitokoto').html("");
                                    $('#hitokoto').append("<strong style='color: #3273dc;'>"+data.hitokoto+"</strong>"+
                                    "<p>"+"来源《"+data.from+"》</p><p>提供者-"+data.creator+"</p>");
                                }});}
                                $(function (){getYiyan();$('#hitokoto').click(function(){getYiyan();})});</script></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://xiaoai.me" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">AI小工具</span></span><span class="level-right"><span class="level-item tag">xiaoai.me</span></span></a></li></ul></div></div></div><!--!--><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-25T16:00:00.000Z">2023-11-26</time></p><p class="title"><a href="/2023/11/26/cros-refused-to-get-unsafe-header.html">跨域请求获取不到特定 header 头的解决办法</a></p><p class="categories"><a href="/categories/javascript/">javascript</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-23T16:00:00.000Z">2023-11-24</time></p><p class="title"><a href="/2023/11/24/dns-basic-knowledge.html">DNS 基础知识</a></p><p class="categories"><a href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-22T16:00:00.000Z">2023-11-23</time></p><p class="title"><a href="/2023/11/23/coredns-usage-hosts-templeate-file-plugins.html">CoreDNS 的 template、hosts、file 插件使用方法</a></p><p class="categories"><a href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-19T16:00:00.000Z">2023-11-20</time></p><p class="title"><a href="/2023/11/20/png-image-canvas-to-dataurl-quality-not-working.html">canvas toDataURL方法中的quality参数对PNG图片不生效</a></p><p class="categories"><a href="/categories/JAVASCRIPT/">JAVASCRIPT</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-01-10T16:00:00.000Z">2021-01-11</time></p><p class="title"><a href="/2021/01/11/cap.html">重新思考 CAP 定理</a></p><p class="categories"><a href="/categories/CAP/">CAP</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/CAP/"><span class="level-start"><span class="level-item">CAP</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/JAVASCRIPT/"><span class="level-start"><span class="level-item">JAVASCRIPT</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/PHP/"><span class="level-start"><span class="level-item">PHP</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/api/"><span class="level-start"><span class="level-item">api</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/docker/"><span class="level-start"><span class="level-item">docker</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/git/"><span class="level-start"><span class="level-item">git</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/https/"><span class="level-start"><span class="level-item">https</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/javascript/"><span class="level-start"><span class="level-item">javascript</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/js/"><span class="level-start"><span class="level-item">js</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/linux/"><span class="level-start"><span class="level-item">linux</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><a class="level is-mobile is-marginless" href="/categories/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2023/11/"><span class="level-start"><span class="level-item">十一月 2023</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2021/01/"><span class="level-start"><span class="level-item">一月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/06/"><span class="level-start"><span class="level-item">六月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/09/"><span class="level-start"><span class="level-item">九月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/06/"><span class="level-start"><span class="level-item">六月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><a class="level is-mobile is-marginless" href="/archives/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/%E7%AE%97%E6%B3%95/"><span class="tag">算法</span><span class="tag is-grey-lightest">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/newman/"><span class="tag">newman</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nodejs/"><span class="tag">nodejs</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/postman/"><span class="tag">postman</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/swift/"><span class="tag">swift</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/leetcode/"><span class="tag">leetcode</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mysql/"><span class="tag">mysql</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/php/"><span class="tag">php</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/redis/"><span class="tag">redis</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/go/"><span class="tag">go</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E5%AD%A6/"><span class="tag">数学</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%AF%8F%E5%91%A8%E5%AD%A6%E4%B9%A0/"><span class="tag">每周学习</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PHP/"><span class="tag">PHP</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/api/"><span class="tag">api</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cache/"><span class="tag">cache</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker/"><span class="tag">docker</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/js/"><span class="tag">js</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nginx/"><span class="tag">nginx</span><span class="tag is-grey-lightest">2</span></a></div></div><div class="field is-grouped is-grouped-multiline"><a class="tags has-addons" href="/tags/"><span class="tag">查看全部&gt;&gt;</span></a></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><!--!--><div class="column-right-shadow is-hidden-widescreen"></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">David&#039;s World</a><p class="size-small"><span>&copy; 2023 David</span>  Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a> &amp; <a href="https://github.com/removeif/hexo-theme-amazing" target="_blank">Amazing</a> <br><span>© 所有权利保留<br/></span><span><span id="statistic-times">loading...</span><script>function createTime(time) {
            var n = new Date(time);
            now.setTime(now.getTime() + 250),
                days = (now - n) / 1e3 / 60 / 60 / 24,
                dnum = Math.floor(days),
                hours = (now - n) / 1e3 / 60 / 60 - 24 * dnum,
                hnum = Math.floor(hours),
            1 == String(hnum).length && (hnum = "0" + hnum),
                minutes = (now - n) / 1e3 / 60 - 1440 * dnum - 60 * hnum,
                mnum = Math.floor(minutes),
            1 == String(mnum).length && (mnum = "0" + mnum),
                seconds = (now - n) / 1e3 - 86400 * dnum - 3600 * hnum - 60 * mnum,
                snum = Math.round(seconds),
            1 == String(snum).length && (snum = "0" + snum),
                document.getElementById("statistic-times").innerHTML = "❤️本站自 <strong>"+time.split(" ")[0].replace(/\//g,".")+"</strong> 已运行 <strong>" + dnum + "</strong> 天 <strong>" + hnum + "</strong> 小时 <strong>" + mnum + "</strong> 分 <strong>" + snum + "</strong> 秒！❤️";
        }var now = new Date();setInterval("createTime('2014/10/10 00:00:00')", 250,"");</script><br></span><div class="size-small"><span>❤️感谢 <strong><span id="busuanzi_value_site_uv">99+</span></strong> 小伙伴的 <strong><span id="busuanzi_value_site_pv">99+</span></strong> 次光临！❤️</span></div></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/removeif/hexo-theme-amazing"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" async></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js"></script><script type="text/javascript">var pjax = new Pjax({
            elements: "a",//代表点击链接就更新
            selectors: [  //代表要更新的节点
                ".section",
                "title"
            ],
            cache: true,
            cacheBust:false
        })

        function loadBusuanzi(){
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js", function () {});
        }

        function loadMathJax() { //加载mathjax
            $.getScript("//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML", function () {
                MathJax.Hub.Config({ tex2jax: { inlineMath: [['$', '$'], ['\(', '\)']] } });
                var math = document.getElementsByClassName("entry-content")[0];
                MathJax.Hub.Queue(["Typeset", MathJax.Hub, math]);
            });
        };

        // 开始 PJAX 执行的函数
        document.addEventListener('pjax:send', function () {
        });
        
        // PJAX 完成之后执行的函数，可以和上面的重载放在一起
        document.addEventListener('pjax:complete', function () {
            $(".section").css({opacity:1});
            if(false){
                $.getScript('/js/comment-issue-data.js',function(){loadIssueData('undefined','undefined','undefined','undefined',undefined);});
            }
            if(false){
                loadMathJax();
            }
            loadMainJs(jQuery, window.moment, window.ClipboardJS, window.IcarusThemeSettings);
            loadBackTop();
            loadBusuanzi();
            if(typeof loadBanner == 'function'){
                loadBanner();
            }
        });</script></body></html>