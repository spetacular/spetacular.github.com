
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>cgi与fastcgi的区别</title>
   <meta name="baidu-site-verification" content="sv0RlGsBMz" />
   <LINK rel="shortcut icon" href="http://spetacular.github.io/images/favicon.ico">
   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="http://spetacular.github.io/stylesheets/syntax.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="http://spetacular.github.io/stylesheets/screen.css" type="text/css" media="screen, projection" />


</head>
<body>
<div class="site">
  <div class="title">
    <a href="/">David's world</a>
	<span class="about"><a href="/html/about.html">About</a></span>
  </div>

    <div id="post">
    <h1>cgi与fastcgi的区别</h1>
    <p>青石街有两个卖烧饼的，王大与李二。</p>

<p>顾客很少。</p>

<p>王大很闲。每次有顾客，王大就生火、和面、擀饼、下炉、出锅。不出一会儿，热腾腾的烧饼就送到顾客面前。顾客走后，王大就收拾炉子，熄火休息。</p>

<p>李二却很忙。每天早晨，李二就生火、和面，等着顾客上门。白天里，顾客来，李二就擀饼、下炉、出锅，然后等下一位顾客。直到夜幕降临，李二才打烊。</p>

<p>后来青石街城镇化 ，人多起来，买烧饼的人也多了。</p>

<p>王大很忙。每个顾客来，都要生火、和面、熄火 ，不胜其烦；顾客的等待时间在延长，不满情绪在酝酿。</p>

<p>李二也很忙，不过还是和以前一样，不太累，顾客也满意。</p>

<p>故事很傻，勿喷啊，讲的是cgi与fastcgi的区别。</p>

<p>cgi像王大。每次请求，web服务器都会根据请求的内容，fork一个新进程来运行外部程序或解释器， 这个进程会把处理完的数据返回给web服务器，最后web服务器把内容发送给用户，刚才fork的进程也随之退出。 如果下次用户还请求该动态脚本，那么web服务器又再次fork一个新进程，周而复始的进行。</p>

<p>fastcgi像李二。web服务器启动时，就开启一个进程来等待请求。收到一个请求时，不会重新fork一个进程（因为这个进程在web服务器启动时就开启了，而且不会退出），web服务器直接把内容传递给这个进程（进程间通信，但fastcgi使用了别的方式，tcp方式通信），这个进程收到请求后进行处理，把结果返回给web服务器，最后自己接着等待下一个请求的到来，而不是退出。</p>

<p>总结一下：</p>

<p>在web服务器方面</p>

<blockquote>
  <p>cgi：fork一个新的进程进行处理</p>
</blockquote>

<blockquote>
  <p>fastcgi：用tcp方式跟远程机子上的进程或本地进程建立连接</p>
</blockquote>

<p>在对数据进行处理的进程方面</p>

<blockquote>
  <p>cgi：读取参数，处理数据，然后就结束生命期</p>
</blockquote>

<blockquote>
  <p>fastcgi： 要开启tcp端口，进入循环，等待数据的到来，处理数据</p>
</blockquote>

<p>参考资料：http://www.cnblogs.com/jamesbd/p/3567682.html</p>

    <p>25 Jan 2015</p>
    </div>

    <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'davidblogs';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  
  <div class="footer">
    <div class="contact">
      <p>
        <a href="http://weibo.com/mylxq">@weibo</a>
        <a href="https://twitter.com/butbits">@twitter</a>
      </p>
    </div>    
  </div>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-20318153-4', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>