<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 
 <title>David's World</title>
 <link href="http://spetacular.github.io/atom.xml" rel="self"/>
 <link href="http://spetacular.github.io"/>
 <updated>2017-08-18T17:47:37+08:00</updated>
 <id>http://spetacular.github.io</id>
 <author>
   <name>David</name>
   <email>blah@email.test</email>
 </author>

 
 <entry>
   <title>MySQL 1045 Access denied å’Œ 1449 The user specified as a definer does not exist é”™è¯¯å¤„ç†</title>
   <link href="http://spetacular.github.io/2017/05/31/mysql-1045-access-denied-view-definer.html"/>
   <updated>2017-05-31T00:00:00+08:00</updated>
   <id>http://spetacular.github.io/2017/05/31/mysql-1045-access-denied-view-definer</id>
   <content type="html">&lt;p&gt;MySQL ä½¿ç”¨æ–°å»ºç”¨æˆ·æŸ¥è¯¢æ—¶ï¼Œå¦‚æœæ•°æ®åº“ä¸­æœ‰ viewï¼Œå¯èƒ½ä¼šå‡ºç°è¿™æ ·çš„é”™è¯¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-mysql&quot;&gt;SQLSTATE[28000]: Invalid authorization specification: 1045 Access denied for user 'user'@'10.174.68.21' (using password: YES)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ–è€…&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-mysql&quot;&gt;SQLSTATE[HY000]: General error: 1449 The user specified as a definer ('db_prod'@'%') does not exist
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å…¶è¡¨ç°æ˜¯ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;æ¶‰åŠåˆ° table çš„æŸ¥è¯¢éƒ½æ­£å¸¸ï¼›&lt;/li&gt;
  &lt;li&gt;æ¶‰åŠåˆ° view çš„æŸ¥è¯¢éƒ½æŠ¥é”™ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå‡ºç°æ­¤é—®é¢˜çš„æ ¹æºæ˜¯view definerè®¾ç½®ä¸å½“ã€‚&lt;/p&gt;

&lt;h1 id=&quot;definer&quot;&gt;æŸ¥çœ‹æ‰€æœ‰çš„ definer&lt;/h1&gt;

&lt;p&gt;å¯ä»¥å…ˆæ£€æŸ¥ä¸‹æ‰€æœ‰ view çš„ definerã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-mysql&quot;&gt;select DEFINER from information_schema.VIEWS;                                          +---------------------------+
| DEFINER                   |
+---------------------------+
| db_prod@%                 |
| db_prod@%                 |
| db_prod@10.174.68.21      |
| root@127.0.0.1            |
+---------------------------+
4 rows in set (0.00 sec)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¯ä»¥å‘ç°ï¼ŒæŸäº› view çš„ definer ä¸ºdb_prod@% ã€‚&lt;/p&gt;

&lt;h1 id=&quot;viewdefiner&quot;&gt;æŸ¥çœ‹viewçš„definer&lt;/h1&gt;

&lt;p&gt;è¿›è€Œå¯ä»¥æŸ¥çœ‹å•ä¸ª view çš„ definerã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-mysql&quot;&gt;SHOW CREATE VIEW viewname
CREATE ALGORITHM=UNDEFINED DEFINER=`db_prod`@`%` SQL SECURITY DEFINER VIEW `viewname` AS select * from tablename;
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&quot;section&quot;&gt;åˆ›å»ºç”¨æˆ·æ—¶éœ€è¦æ³¨æ„çš„äº‹é¡¹&lt;/h1&gt;

&lt;p&gt;å¦‚æœ view çš„ definer ä¸å½“å‰çš„ç”¨æˆ·ä¸ä¸€è‡´ï¼Œå¯ä»¥ä¿®æ”¹æˆ–åˆ é™¤ç”¨æˆ·ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-mysql&quot;&gt;åˆ é™¤ç”¨æˆ·
DROP USER 'db_prod'@'10.174.68.21';
ä¿®æ”¹ definer
UPDATE `mysql`.`proc` p SET definer = 'root@localhost' WHERE definer='root@foobar' AND db='dbname';
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åœ¨åˆ›å»ºç”¨æˆ·æ—¶ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹ SQL.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-mysql&quot;&gt;åˆ›å»ºç”¨æˆ·
CREATE USER 'db_prod'@'%' IDENTIFIED BY '123456';
æˆæƒ
GRANT ALL ON dbname.* TO 'db_prod'@'%';
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å…³é”®æ˜¯ä¿æŒ DEFINER å’Œåˆ›å»ºç”¨æˆ·æ—¶çš„ç”¨æˆ·åå®Œå…¨ä¸€è‡´ã€‚&lt;/p&gt;

&lt;h1 id=&quot;section-1&quot;&gt;å‚è€ƒèµ„æ–™&lt;/h1&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/35662051/mysql-some-queries-produce-sqlstate28000-invalid-authorization-specificatio&quot;&gt;MySql: Some queries produce: SQLSTATE28000: Invalid authorization specification: 1045 Access denied for user&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.cnblogs.com/zejin2008/p/4767531.html&quot;&gt;mysqlå¦‚ä½•ä¿®æ”¹æ‰€æœ‰çš„definer&lt;/a&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>PHPä»æ•°ç»„ä¸­åˆ é™¤å…ƒç´ çš„å››ç§æ–¹æ³•</title>
   <link href="http://spetacular.github.io/2017/05/12/delete-element-from-array-php.html"/>
   <updated>2017-05-12T00:00:00+08:00</updated>
   <id>http://spetacular.github.io/2017/05/12/delete-element-from-array-php</id>
   <content type="html">&lt;p&gt;èŒ´é¦™è±†çš„â€œèŒ´â€å­—æœ‰å››ç§å†™æ³•ï¼ŒPHPä»æ•°ç»„ä¸­åˆ é™¤å…ƒç´ ä¹Ÿæœ‰å››ç§æ–¹æ³• ^_^ã€‚&lt;/p&gt;

&lt;h1 id=&quot;section&quot;&gt;åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œä¸”ä¿æŒåŸæœ‰ç´¢å¼•ä¸å˜&lt;/h1&gt;
&lt;p&gt;ä½¿ç”¨ &lt;a href=&quot;https://secure.php.net/manual/zh/function.unset.php&quot;&gt;unset&lt;/a&gt; å‡½æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;b&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;c&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;unset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
               &lt;span class=&quot;c1&quot;&gt;//â†‘ ä½ æƒ³åˆ é™¤çš„key
&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;?&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¾“å‡ºï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Array (
    [0] =&amp;gt; a
    [2] =&amp;gt; c
)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;unset&lt;/code&gt; å¹¶æœªæ”¹å˜æ•°ç»„çš„åŸæœ‰ç´¢å¼•ã€‚å¦‚æœæ‰“ç®—é‡æ’ç´¢å¼•ï¼ˆè®©ç´¢å¼•ä»0å¼€å§‹ï¼Œå¹¶ä¸”è¿ç»­ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ &lt;a href=&quot;http://php.net/manual/zh/function.array-values.php&quot;&gt;array_values&lt;/a&gt; å‡½æ•°ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$array = array_values($array);
/*
è¾“å‡º
array(2) {
  [0]=&amp;gt;
  string(1) &quot;a&quot;
  [1]=&amp;gt;
  string(1) &quot;c&quot;
}
*/
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;section-1&quot;&gt;åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œä¸ä¿æŒç´¢å¼•&lt;/h1&gt;

&lt;p&gt;ä½¿ç”¨ &lt;a href=&quot;http://php.net/manual/zh/function.array-splice.php&quot;&gt;array_splice&lt;/a&gt; å‡½æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;b&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;c&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;array_splice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                       &lt;span class=&quot;c1&quot;&gt;//â†‘ ä½ æƒ³åˆ é™¤çš„å…ƒç´ çš„Offset
&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;?&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¾“å‡ºï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Array (
    [0] =&amp;gt; a
    [1] =&amp;gt; c
)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;section-2&quot;&gt;æŒ‰å€¼åˆ é™¤å¤šä¸ªå…ƒç´ ï¼Œä¿æŒç´¢å¼•&lt;/h1&gt;

&lt;p&gt;ä½¿ç”¨ &lt;a href=&quot;http://php.net/manual/zh/function.array-diff.php&quot;&gt;array_diff&lt;/a&gt; å‡½æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;b&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;c&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;array_diff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;c&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
                              &lt;span class=&quot;c1&quot;&gt;//â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â†’ ä½ æƒ³åˆ é™¤çš„æ•°ç»„å…ƒç´ å€¼values
&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;?&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¾“å‡ºï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Array (
    [1] =&amp;gt; b
)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä¸ &lt;code class=&quot;highlighter-rouge&quot;&gt;unset&lt;/code&gt; ç±»ä¼¼ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;array_diff&lt;/code&gt; ä¹Ÿå°†ä¿æŒç´¢å¼•ã€‚&lt;/p&gt;

&lt;h1 id=&quot;section-3&quot;&gt;æŒ‰é”®åˆ é™¤å¤šä¸ªå…ƒç´ ï¼Œä¿æŒç´¢å¼•&lt;/h1&gt;

&lt;p&gt;ä½¿ç”¨ &lt;a href=&quot;http://php.net/manual/zh/function.array-diff-key.php&quot;&gt;array_diff_key&lt;/a&gt; å‡½æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;

    &lt;span class=&quot;nv&quot;&gt;$array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;b&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;c&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;array_diff_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;xy&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;2&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;xy&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
                                   &lt;span class=&quot;c1&quot;&gt;//â†‘           â†‘ ä½ æƒ³åˆ é™¤çš„æ•°ç»„é”®keys
&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;?&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¾“å‡ºï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Array (
    [1] =&amp;gt; b
)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä¸ &lt;code class=&quot;highlighter-rouge&quot;&gt;unset&lt;/code&gt; ç±»ä¼¼ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;array_diff_key&lt;/code&gt; ä¹Ÿå°†ä¿æŒç´¢å¼•ã€‚&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Postman åŠ Newman ä½¿ç”¨å¼€å‘æŒ‡å—ï¼ˆå…­ï¼‰ï¼šåˆ©ç”¨ Newman è¿›è¡Œå†’çƒŸæµ‹è¯•</title>
   <link href="http://spetacular.github.io/2017/04/27/postman-use-newman-for-smoking-test.html"/>
   <updated>2017-04-27T00:00:00+08:00</updated>
   <id>http://spetacular.github.io/2017/04/27/postman-use-newman-for-smoking-test</id>
   <content type="html">&lt;p&gt;å¤§å®¶æåˆ°â€œå†’çƒŸæµ‹è¯•â€ï¼Œå¤§éƒ¨åˆ†äººä¼šæ´å¼•&lt;a href=&quot;https://msdn.microsoft.com/zh-cn/library/ms182613(v=vs.90).aspx&quot;&gt;å¾®è½¯çš„å®šä¹‰&lt;/a&gt;ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;åœ¨è½¯ä»¶ä¸­ï¼Œâ€œå†’çƒŸæµ‹è¯•â€è¿™ä¸€æœ¯è¯­æè¿°çš„æ˜¯åœ¨å°†ä»£ç æ›´æ”¹ç­¾å…¥åˆ°äº§å“çš„æºæ ‘ä¸­ä¹‹å‰å¯¹è¿™äº›æ›´æ”¹è¿›è¡ŒéªŒè¯çš„è¿‡ç¨‹ã€‚åœ¨æ£€æŸ¥äº†ä»£ç åï¼Œå†’çƒŸæµ‹è¯•æ˜¯ç¡®å®šå’Œä¿®å¤è½¯ä»¶ç¼ºé™·çš„æœ€ç»æµæœ‰æ•ˆçš„æ–¹æ³•ã€‚å†’çƒŸæµ‹è¯•è®¾è®¡ç”¨äºç¡®è®¤ä»£ç ä¸­çš„æ›´æ”¹ä¼šæŒ‰é¢„æœŸè¿è¡Œï¼Œä¸”ä¸ä¼šç ´åæ•´ä¸ªç‰ˆæœ¬çš„ç¨³å®šæ€§ã€‚&lt;/p&gt;

  &lt;p&gt;â€œå†’çƒŸæµ‹è¯•â€è¿™ä¸€æœ¯è¯­æºè‡ªç¡¬ä»¶è¡Œä¸šã€‚è¯¥æœ¯è¯­æºäºæ­¤åšæ³•ï¼šå¯¹ä¸€ä¸ªç¡¬ä»¶æˆ–ç¡¬ä»¶ç»„ä»¶è¿›è¡Œæ›´æ”¹æˆ–ä¿®å¤åï¼Œç›´æ¥ç»™è®¾å¤‡åŠ ç”µã€‚å¦‚æœæ²¡æœ‰å†’çƒŸï¼Œåˆ™è¯¥ç»„ä»¶å°±é€šè¿‡äº†æµ‹è¯•ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¯¹äº API æ¥å£æ¥è¯´ï¼Œå†’çƒŸæµ‹è¯•å°±æ˜¯è·‘ä¸€éæµ‹è¯•ï¼Œçœ‹çœ‹æ‰€æœ‰çš„è¿”å›ç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚åˆ¤æ–­ä¸€æ¬¡å†’çƒŸæµ‹è¯•æ˜¯å¦é€šè¿‡çš„æ ‡å‡†ï¼Œå¯ä»¥ç®€åŒ–ä¸€ä¸‹ä¸¤æ¡ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ç½‘ç»œè¯·æ±‚æ­£å¸¸&lt;/li&gt;
  &lt;li&gt;è¿”å›å†…å®¹ç¬¦åˆé¢„æœŸ&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æœ¬èŠ‚æˆ‘ä»¬ç”¨ Newman ç¼–å†™å†’çƒŸæµ‹è¯•æ¡ˆä¾‹ï¼Œå¹¶ç”Ÿæˆè‡ªå®šä¹‰æŠ¥è¡¨ï¼Œé™„å¸¦é‚®ä»¶å‘é€åŠŸèƒ½ã€‚æœ¬èŠ‚çš„ä¾‹å­å®Œæ•´ä»£ç å‚è€ƒ &lt;a href=&quot;https://github.com/spetacular/newman-smoking-test&quot;&gt;https://github.com/spetacular/newman-smoking-test&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;nodejs-&quot;&gt;nodejs è„šæœ¬&lt;/h1&gt;

&lt;p&gt;è„šæœ¬ç”¨åˆ°äº†ä¸¤ä¸ªæ’ä»¶ï¼š&lt;a href=&quot;https://github.com/postmanlabs/newman&quot;&gt;Newman&lt;/a&gt; å’Œ &lt;a href=&quot;https://nodemailer.com/&quot;&gt;Nodemailer&lt;/a&gt; ã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;npm install newman --save
npm install nodemailer --save
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è„šæœ¬ smoke.js:&lt;/p&gt;

&lt;p&gt;å°† &lt;code class=&quot;highlighter-rouge&quot;&gt;---&lt;/code&gt; åŒ…å«çš„éƒ¨åˆ†æ¢æˆæ­£ç¡®çš„é…ç½®å³å¯ã€‚
&lt;script src=&quot;https://gist.github.com/spetacular/4e60770ebecda84064aacb123531b670.js&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;h1 id=&quot;html-&quot;&gt;è‡ªå®šä¹‰ HTML æ¨¡æ¿&lt;/h1&gt;

&lt;p&gt;ç”±äºå¤§éƒ¨åˆ†é‚®ä»¶å®¢æˆ·ç«¯åªæ”¯æŒ inline çš„ CSS æ ·å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†æ ·å¼å†™åˆ°å…ƒç´ é‡Œã€‚&lt;/p&gt;

&lt;p&gt;template.hbs æ–‡ä»¶ï¼š&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/spetacular/8b9375c373b8339cb2904cbcd56cffaa.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;æœ€åå‘é€é‚®ä»¶çš„æ•ˆæœå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/postman_newman_mail.jpeg&quot; alt=&quot;newmanå†’çƒŸæµ‹è¯•æ•ˆæœ&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å®Œæ•´ä»£ç å‚è€ƒ &lt;a href=&quot;https://github.com/spetacular/newman-smoking-test&quot;&gt;https://github.com/spetacular/newman-smoking-test&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Postman åŠ Newman ä½¿ç”¨å¼€å‘æŒ‡å—ï¼ˆäº”ï¼‰ï¼šNewman ç®€ä»‹</title>
   <link href="http://spetacular.github.io/2017/04/25/newman-develop-tutorial.html"/>
   <updated>2017-04-25T00:00:00+08:00</updated>
   <id>http://spetacular.github.io/2017/04/25/newman-develop-tutorial</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;https://www.npmjs.com/package/newman&quot;&gt;Newman&lt;/a&gt; æ˜¯ Postman æ¨å‡ºçš„ä¸€ä¸ª nodejs åº“ã€‚åˆ©ç”¨ Newmanï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°è¿è¡Œå’Œæµ‹è¯•é›†åˆï¼Œå¹¶ç”¨ä¹‹æ„é€ è‡ªåŠ¨åŒ–æµ‹è¯•å’ŒæŒç»­é›†æˆã€‚&lt;/p&gt;

&lt;h1 id=&quot;section&quot;&gt;å®‰è£…è¿è¡Œ&lt;/h1&gt;

&lt;p&gt;å¯ä»¥ä½¿ç”¨ npm æ¥ newmanã€‚å¦‚æœè¿˜æœªå®‰è£… npmï¼Œå¯ä»¥ &lt;a href=&quot;https://nodejs.org/en/download/&quot;&gt;ç‚¹æ­¤å®‰è£…&lt;/a&gt; ã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;npm install newman --global;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä¸Šä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°† Echo é›†åˆå¯¼å‡ºï¼Œå‘½åä¸º postman_echo.postman_collection.jsonã€‚&lt;/p&gt;

&lt;p&gt;åœ¨å‘½ä»¤è¡Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯ï¼Œå³å¯å¯åŠ¨æµ‹è¯•ã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;newman run postman_echo.postman_collection.json
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¿è¡Œç•Œé¢å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/postman_newman_run.gif&quot; alt=&quot;newman runåŠ¨ç”»&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;section-1&quot;&gt;ç¼–ç¨‹å®ç°&lt;/h1&gt;

&lt;p&gt;æ–°å»ºæ–‡ä»¶ &lt;code class=&quot;highlighter-rouge&quot;&gt;test_echo.js&lt;/code&gt;ï¼Œå†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;var newman = require('newman'); // require newman in your project

// call newman.run to pass `options` object and wait for callback
newman.run({
    collection: require('./postman_echo.postman_collection.json'),
    reporters: 'cli'
}, function (err) {
	if (err) { throw err; }
    console.log('collection run complete!');
});
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç„¶ååœ¨å‘½ä»¤è¡Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;node test_echo.js
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æ‰§è¡Œæ•ˆæœå’Œç›´æ¥è¿è¡Œ newman å®Œå…¨ä¸€è‡´ã€‚&lt;/p&gt;

&lt;h1 id=&quot;section-2&quot;&gt;ç»“æœå¯¼å‡ºæ–¹å¼&lt;/h1&gt;

&lt;p&gt;Postman æä¾›äº†5ç§å¯¼å‡ºæ–¹æ³•ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;cliï¼šå‘½ä»¤è¡Œ&lt;/li&gt;
  &lt;li&gt;htmlï¼šç½‘é¡µ&lt;/li&gt;
  &lt;li&gt;json&lt;/li&gt;
  &lt;li&gt;junitï¼šä»¥ xml æ ¼å¼å¯¼å‡º&lt;/li&gt;
  &lt;li&gt;teamcityï¼šå¯¼å‡ºåˆ°æŒç»­é›†æˆï¼ˆContinuous Integrationï¼‰å·¥å…· &lt;a href=&quot;https://www.jetbrains.com/teamcity/&quot;&gt;TeamCity&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å¦å¤– Postman çš„ html å¯¼å‡ºæ–¹å¼æ”¯æŒè‡ªå®šä¹‰å¯¼å‡ºæ¨¡æ¿ã€‚å¦‚æœä¸æŒ‡å®šæ¨¡æ¿ï¼Œå°†é‡‡ç”¨ &lt;a href=&quot;https://github.com/postmanlabs/newman/blob/develop/lib/reporters/html/template-default.hbs&quot;&gt;é»˜è®¤æ¨¡æ¿&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h1 id=&quot;api&quot;&gt;APIå‚è€ƒ&lt;/h1&gt;

&lt;p&gt;Newman çš„æ ¸å¿ƒæ–¹æ³•æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;newman.run(options: *object* , callback: *function*) =&amp;gt; run: EventEmitter&lt;/code&gt;ã€‚å…¶ä¸­ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;options ä¸ºNewmanè¿è¡Œæ—¶çš„è®¾ç½®é¡¹ã€‚&lt;/li&gt;
  &lt;li&gt;callback ä¸ºå›è°ƒå‡½æ•°ï¼Œä¼šå›ä¼  error å’Œ summary ä¿¡æ¯ã€‚&lt;/li&gt;
  &lt;li&gt;run ä¸ºå‡½æ•°ä¸»ä½“ï¼Œå¯ç›‘å¬äº‹ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;options-&quot;&gt;options è®¾ç½®é¡¹&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;å‚æ•°&lt;/th&gt;
      &lt;th&gt;æ˜¯å¦å¿…éœ€&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;ç±»å‹&lt;/th&gt;
      &lt;th&gt;è§£é‡Š&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;options&lt;/td&gt;
      &lt;td&gt;æ˜¯&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;object&lt;/td&gt;
      &lt;td&gt;åŒ…å« run ä¸€ä¸ªé›†åˆæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;options.collection&lt;/td&gt;
      &lt;td&gt;æ˜¯&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;object|string|&lt;a href=&quot;https://github.com/postmanlabs/postman-collection/wiki#Collection&quot;&gt;PostmanCollection&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;æŒ‡å®š collectionã€‚å¯ä»¥ä¼ é€’collection å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ä¼ é€’ URL æˆ–æœ¬åœ°  JSON æ–‡ä»¶è·¯å¾„ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;options.environment&lt;/td&gt;
      &lt;td&gt;å¦&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;object|string&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šç¯å¢ƒå˜é‡ã€‚å¯ä»¥ä¼ é€’â€œé”®=&amp;gt;å€¼â€œå¯¹çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ä¼ é€’ URL æˆ–æœ¬åœ°æ–‡ä»¶è·¯å¾„ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;options.globals&lt;/td&gt;
      &lt;td&gt;å¦&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;object|string&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šå…¨å±€å˜é‡ã€‚å¯ä»¥ä¼ é€’å¯¹è±¡ï¼ŒURL æˆ–æœ¬åœ°æ–‡ä»¶è·¯å¾„ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;options.iterationCount&lt;/td&gt;
      &lt;td&gt;å¦&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;numberï¼Œé»˜è®¤å€¼ä¸º1&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šå¾ªç¯çš„æ¬¡æ•°ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;options.iterationData&lt;/td&gt;
      &lt;td&gt;å¦&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;string&lt;/td&gt;
      &lt;td&gt;å½“å¾ªç¯å¤šæ¬¡æ—¶ï¼ŒæŒ‡å®šä½œä¸ºæ•°æ®æºçš„ JSONã€CSVã€URLçš„è·¯å¾„ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;options.folder&lt;/td&gt;
      &lt;td&gt;å¦&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;string&lt;/td&gt;
      &lt;td&gt;é›†åˆä¸­æ–‡ä»¶å¤¹çš„åç§°æˆ– IDã€‚è®¾ç½®æ­¤é¡¹åï¼Œåªæœ‰è¯¥æ–‡ä»¶å¤¹æ‰ä¼šæ‰§è¡Œã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;options.timeoutRequest&lt;/td&gt;
      &lt;td&gt;å¦&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;numberï¼Œé»˜è®¤å€¼æ— ç©·å¤§&lt;/td&gt;
      &lt;td&gt;è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚é»˜è®¤ä¸è¶…æ—¶ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;options.delayRequest&lt;/td&gt;
      &lt;td&gt;å¦&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;numberï¼Œé»˜è®¤å€¼ä¸º 0&lt;/td&gt;
      &lt;td&gt;è¯·æ±‚ä¹‹é—´çš„æ—¶é—´é—´éš”ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;options.ignoreRedirects&lt;/td&gt;
      &lt;td&gt;å¦&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;booleanï¼Œé»˜è®¤å€¼ä¸º false&lt;/td&gt;
      &lt;td&gt;æ˜¯å¦å…è®¸ 3xx è·³è½¬ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;options.insecure&lt;/td&gt;
      &lt;td&gt;å¦&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;booleanï¼Œé»˜è®¤å€¼ä¸º false&lt;/td&gt;
      &lt;td&gt;æ˜¯å¦ç¦æ­¢ SSL éªŒè¯å’Œå…è®¸è‡ªç­¾åè¯ä¹¦ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;options.bail&lt;/td&gt;
      &lt;td&gt;å¦&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;booleanï¼Œé»˜è®¤å€¼ä¸º false&lt;/td&gt;
      &lt;td&gt;é‡åˆ°é”™è¯¯æ—¶æ˜¯å¦ç»ˆæ­¢è¿è¡Œã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;options.suppressExitCode&lt;/td&gt;
      &lt;td&gt;å¦&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;booleanï¼Œé»˜è®¤å€¼ä¸º false&lt;/td&gt;
      &lt;td&gt;æ˜¯å¦è¦†ç›–é€€å‡ºç ï¼ˆExit Codeï¼‰ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;options.reporters&lt;/td&gt;
      &lt;td&gt;å¦&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;string|array&lt;/td&gt;
      &lt;td&gt;æŒ‡å®š reporterã€‚å¯é€‰ cliã€jsonã€html å’Œ junitã€‚æŒ‡å®šä¸€ç§reportæ—¶ï¼Œç”¨ string å³å¯ï¼Œå¦‚  &lt;code class=&quot;highlighter-rouge&quot;&gt;cli&lt;/code&gt;ï¼›æŒ‡å®šå¤šç§æ—¶ï¼Œç”¨arrayï¼Œå¦‚&lt;code class=&quot;highlighter-rouge&quot;&gt;['cli','html']ã€‚&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;options.reporter&lt;/td&gt;
      &lt;td&gt;å¦&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;object&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šç‰¹å®š reporter çš„å±æ€§ã€‚ä¾‹å¦‚ &lt;code class=&quot;highlighter-rouge&quot;&gt;reporter : { junit : { export : './xmlResults.xml' } }&lt;/code&gt; æˆ–&lt;code class=&quot;highlighter-rouge&quot;&gt; reporter : { html : { export : './htmlResults.html', template: './customTemplate.hbs' } }&lt;/code&gt;ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;options.color&lt;/td&gt;
      &lt;td&gt;å¦&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;boolean&lt;/td&gt;
      &lt;td&gt;å¼ºåˆ¶åœ¨ CLI é‡Œä½¿ç”¨å½©è‰²è¾“å‡ºã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;options.noColor&lt;/td&gt;
      &lt;td&gt;å¦&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;boolean&lt;/td&gt;
      &lt;td&gt;å¼ºåˆ¶åœ¨ CLI é‡Œç¦æ­¢å½©è‰²è¾“å‡ºã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;options.sslClientCert&lt;/td&gt;
      &lt;td&gt;å¦&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;string&lt;/td&gt;
      &lt;td&gt;public client certificate file è·¯å¾„&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;options.sslClientKey&lt;/td&gt;
      &lt;td&gt;å¦&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;string&lt;/td&gt;
      &lt;td&gt;private client key file è·¯å¾„&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;options.sslClientPassphrase&lt;/td&gt;
      &lt;td&gt;å¦&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;string&lt;/td&gt;
      &lt;td&gt;secret client key passphrase&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;callback&lt;/td&gt;
      &lt;td&gt;æ˜¯&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;function&lt;/td&gt;
      &lt;td&gt;run å®Œæˆä¹‹åï¼Œä¼šè°ƒç”¨ callback å‡½æ•°ï¼Œä¼šå›ä¼  error å’Œ summary ä¿¡æ¯ã€‚&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;callback-&quot;&gt;callback å›è°ƒ&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;å‚æ•°&lt;/th&gt;
      &lt;th&gt;ç±»å‹&lt;/th&gt;
      &lt;th&gt;è§£é‡Š&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;error&lt;/td&gt;
      &lt;td&gt;object&lt;/td&gt;
      &lt;td&gt;è‡´å‘½é”™è¯¯ä¿¡æ¯ï¼Œå¦‚ Newman æ— æ³•å¤„ç†çš„å¼‚å¸¸ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;summary&lt;/td&gt;
      &lt;td&gt;object&lt;/td&gt;
      &lt;td&gt;æœ¬æ¬¡ run çš„æ‰€æœ‰æ±‡æ€»ä¿¡æ¯&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;summary.error&lt;/td&gt;
      &lt;td&gt;object&lt;/td&gt;
      &lt;td&gt;é”™è¯¯ä¿¡æ¯&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;summary.collection&lt;/td&gt;
      &lt;td&gt;object&lt;/td&gt;
      &lt;td&gt;é›†åˆä¿¡æ¯&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;summary.environment&lt;/td&gt;
      &lt;td&gt;object&lt;/td&gt;
      &lt;td&gt;ç¯å¢ƒå˜é‡&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;summary.globals&lt;/td&gt;
      &lt;td&gt;object&lt;/td&gt;
      &lt;td&gt;å…¨å±€å˜é‡&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;summary.run&lt;/td&gt;
      &lt;td&gt;object&lt;/td&gt;
      &lt;td&gt;æœ¬æ¬¡ run çš„ä¿¡æ¯&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;summary.run.stats&lt;/td&gt;
      &lt;td&gt;object&lt;/td&gt;
      &lt;td&gt;ç»Ÿè®¡ä¿¡æ¯&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;summary.run.failures&lt;/td&gt;
      &lt;td&gt;array.&amp;lt;object&amp;gt;&lt;/td&gt;
      &lt;td&gt;å¤±è´¥ä¿¡æ¯&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;summary.run.executions&lt;/td&gt;
      &lt;td&gt;array.&amp;lt;object&amp;gt;&lt;/td&gt;
      &lt;td&gt;æ¯ä¸ªè¯·æ±‚çš„ä¿¡æ¯&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;run-&quot;&gt;run äº‹ä»¶&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;äº‹ä»¶&lt;/th&gt;
      &lt;th&gt;æè¿°&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;start&lt;/td&gt;
      &lt;td&gt;å¼€å§‹run collection&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;beforeIteration&lt;/td&gt;
      &lt;td&gt;ä¸€æ¬¡å¾ªç¯å¼€å§‹ä¹‹å‰&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;beforeItem&lt;/td&gt;
      &lt;td&gt;ä¸€ä¸ªæ¡ç›®å¼€å§‹å¤„ç†ä¹‹å‰&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;beforePrerequest&lt;/td&gt;
      &lt;td&gt;pre-request è„šæœ¬å¼€å§‹æ‰§è¡Œä¹‹å‰&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;prerequest&lt;/td&gt;
      &lt;td&gt;pre-request è„šæœ¬æ‰§è¡Œå®Œæ¯•&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;beforeRequest&lt;/td&gt;
      &lt;td&gt;HTTPè¯·æ±‚å‘é€ä¹‹å‰&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;request&lt;/td&gt;
      &lt;td&gt;HTTPå“åº”æ¥æ”¶ä¹‹å&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;beforeTest&lt;/td&gt;
      &lt;td&gt;æµ‹è¯•è„šæœ¬æ‰§è¡Œä¹‹å‰&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;test&lt;/td&gt;
      &lt;td&gt;æµ‹è¯•è„šæœ¬æ‰§è¡Œä¹‹å&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;beforeScript&lt;/td&gt;
      &lt;td&gt;ä»»æ„è„šæœ¬ï¼ˆæµ‹è¯•è„šæœ¬æˆ–pre-request è„šæœ¬ï¼‰å¼€å§‹æ‰§è¡Œä¹‹å‰&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;script&lt;/td&gt;
      &lt;td&gt;ä»»æ„è„šæœ¬ï¼ˆæµ‹è¯•è„šæœ¬æˆ–pre-request è„šæœ¬ï¼‰æ‰§è¡Œä¹‹å&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;item&lt;/td&gt;
      &lt;td&gt;ä¸€ä¸ªæ¡ç›®æ‰§è¡Œå®Œæ¯•ä¹‹å&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;iteration&lt;/td&gt;
      &lt;td&gt;ä¸€ä¸ªå¾ªç¯æ‰§è¡Œå®Œæ¯•ä¹‹å&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;assertion&lt;/td&gt;
      &lt;td&gt;æµ‹è¯•è„šæœ¬é‡Œæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹è¢«æ‰§è¡Œä¹‹å&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;console&lt;/td&gt;
      &lt;td&gt;consoleæ–¹æ³•è¢«è°ƒç”¨æ—¶è§¦å‘&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;exception&lt;/td&gt;
      &lt;td&gt;è„šæœ¬é”™è¯¯å‡ºç°æ—¶è§¦å‘&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;beforeDone&lt;/td&gt;
      &lt;td&gt;runç»“æŸä¹‹å‰&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;done&lt;/td&gt;
      &lt;td&gt;runç»“æŸï¼Œæ— è®ºæœ‰æ²¡æœ‰é”™è¯¯éƒ½è§¦å‘&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;å®Œæ•´å‚è€ƒè¯·æŸ¥çœ‹ &lt;a href=&quot;https://github.com/postmanlabs/newman&quot;&gt;https://github.com/postmanlabs/newman&lt;/a&gt; ã€‚&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Postman åŠ Newman ä½¿ç”¨å¼€å‘æŒ‡å—ï¼ˆå››ï¼‰ï¼šPostman Collection ä¸ Runner</title>
   <link href="http://spetacular.github.io/2017/04/23/postman-collection-and-runner.html"/>
   <updated>2017-04-23T00:00:00+08:00</updated>
   <id>http://spetacular.github.io/2017/04/23/postman-collection-and-runner</id>
   <content type="html">&lt;p&gt;åœ¨ Postman é‡Œï¼Œé›†åˆï¼ˆCollectionï¼‰æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼Œå®ƒå¯ä»¥å°†å¤šä¸ªè¯·æ±‚è¿›è¡Œåˆ†ç»„ã€‚åœ¨æ¯ä¸ªé›†åˆå†…éƒ¨ï¼Œåˆå¯å‘ä¸‹ç»†åˆ†ä¸ºä¸åŒçš„æ–‡ä»¶å¤¹ã€‚ç»“æ„åŒ–çš„ä¼˜ç‚¹æ˜¯åˆ©äºåç»­æŸ¥çœ‹å’Œç»´æŠ¤ã€‚&lt;/p&gt;

&lt;h1 id=&quot;collection&quot;&gt;é›†åˆ Collection&lt;/h1&gt;

&lt;h2 id=&quot;section&quot;&gt;åˆ›å»º&lt;/h2&gt;

&lt;p&gt;åˆ›å»ºé›†åˆæœ‰ä¸¤ç§æ–¹æ³•ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;åœ¨å·¦è¾¹æ å¤„ç‚¹å‡»æ–°å»ºã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/postman_collection.jpeg&quot; alt=&quot;postmanåˆ›å»ºé›†åˆ&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;ä¿å­˜æˆ–å¦å­˜è¯·æ±‚æ—¶ï¼Œç›´æ¥æ–°å»ºã€‚&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;/images/2017/postman_collection_add.jpeg&quot; alt=&quot;postmanåˆ›å»ºé›†åˆ&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;section-1&quot;&gt;ç®¡ç†&lt;/h2&gt;

&lt;p&gt;ç‚¹å‡»æ¯ä¸ªé›†åˆå³ä¾§çš„â€œ&amp;lt;â€å’Œâ€œâ€¦â€ï¼Œä¼šåˆ†åˆ«å±•å¼€é›†åˆè¯¦æƒ…å’Œé›†åˆæ“ä½œé¡µé¢ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/postman_collection_detail.jpeg&quot; alt=&quot;postmanåˆ›å»ºç®¡ç†&quot; /&gt;&lt;/p&gt;

&lt;p&gt;é›†åˆè¯¦æƒ…ä»‹ç»è¯¥é›†åˆçš„åç§°ã€ç®€ä»‹ï¼ˆæ”¯æŒ Markdown è¯­æ³•ï¼‰ï¼Œå¹¶å¯åˆ†äº«ã€ç¼–è¾‘ã€å¤åˆ¶ã€å¯¼å‡ºã€åˆ é™¤ç­‰ã€‚ç‚¹å‡»è“è‰²çš„ â€œRunâ€ æŒ‰é’®ï¼Œä¼šè¿›å…¥ Runner é¡µé¢ã€‚&lt;/p&gt;

&lt;p&gt;é›†åˆæ“ä½œåˆ™åˆ—å‡ºå¯¹é›†åˆçš„å¸¸ç”¨æ“ä½œï¼šåˆ†äº«ã€é‡å‘½åã€ç¼–è¾‘ã€æ–°å¢æ–‡ä»¶å¤¹ã€å¤åˆ¶ã€å¯¼å‡ºã€åˆ é™¤ã€‚Pro ç‰ˆè¿˜æœ‰ç›‘æ§å’Œå‘å¸ƒæ–‡æ¡£åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;h2 id=&quot;section-2&quot;&gt;å¯¼å‡ºåŠŸèƒ½&lt;/h2&gt;

&lt;p&gt;å¯¼å‡ºåŠŸèƒ½æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/postman_export.jpeg&quot; alt=&quot;postmané›†åˆå¯¼å‡º&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¯¼å‡ºæ–‡ä»¶åï¼Œä½ å¯ä»¥åˆ†äº«ç»™åŒäº‹ï¼Œåœ¨å…¶å®ƒç”µè„‘ä¸Šå¯¼å…¥ï¼Œè€Œä¸”å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ã€‚æ¨èä½¿ç”¨v2ç‰ˆæœ¬ã€‚&lt;/p&gt;

&lt;h1 id=&quot;runner&quot;&gt;Runner&lt;/h1&gt;

&lt;p&gt;Runner æ˜¯ä¸€ä¸ªå¯¹é›†åˆä¸­è¯·æ±‚è¿›è¡Œæµ‹è¯•çš„å·¥å…·ã€‚å®ƒä¼šæ£€æµ‹æ¯ä¸ªè¯·æ±‚çš„æµ‹è¯•ç”¨ä¾‹ï¼Œæœ€ç»ˆè¿”å›ç»“æœæ±‡æ€»å’Œç»Ÿè®¡æ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;æœ‰ä¸¤ç§æ–¹å¼è¿›å…¥ Runnerï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;é›†åˆè¯¦æƒ…é¡µï¼Œç‚¹å‡»è“è‰²çš„ â€œRunâ€ æŒ‰é’®ã€‚&lt;/li&gt;
  &lt;li&gt;Postman å·¦ä¸Šè§’ â€œRunnerâ€ æŒ‰é’®ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;è¿›å…¥åï¼Œå¯ä»¥é€‰æ‹©ä¸€ä¸ªé›†åˆï¼Œæˆ–é›†åˆä¸­çš„æŸä¸€æ–‡ä»¶å¤¹è¿›è¡Œæµ‹è¯•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/postman_runner_ui.jpeg&quot; alt=&quot;postman Runner&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨ Start Run ä¹‹å‰ï¼Œå¯ä»¥é€‰æ‹©ç¯å¢ƒï¼Œç¡®å®šå¾ªç¯æ¬¡æ•°ï¼Œç¡®å®šå‘é€è¯·æ±‚çš„æ—¶é—´é—´éš”ï¼Œæ—¥å¿—ä¿å­˜é€‰é¡¹ï¼Œå¹¶å¯ä»¥ä¸Šä¼ ç›¸å…³çš„æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;ç‚¹å‡» Start Runï¼ŒRunnerå·¥å…·å¼€å§‹æŒ‰ç…§è®¾ç½®è¿è¡Œã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/postman_runner_running.jpeg&quot; alt=&quot;postman Runneræ­£åœ¨è¿è¡Œ&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å…¨éƒ¨å®Œæˆåï¼Œå±•ç¤ºæµ‹è¯•æ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/postman_runner_done.jpeg&quot; alt=&quot;postman runner ç»“æœæ±‡æ€»&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨æ­¤é¡µé¢ï¼Œå¯ä»¥æŸ¥çœ‹æ±‡æ€»ä¿¡æ¯ï¼Œå¯¼å‡ºç»“æœï¼Œé‡è¯•è¯¥æµ‹è¯•ã€‚&lt;/p&gt;

&lt;p&gt;Runneræä¾›äº†æ‰¹é‡æµ‹è¯•çš„åŠŸèƒ½ï¼ŒRun ä¸€ä¸‹ï¼Œå°±çŸ¥é“æ¥å£å“åº”æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚æ›´é‡è¦çš„æ˜¯ï¼ŒRunner å¯ä»¥åœ¨å‘½ä»¤è¡Œè¿è¡Œï¼Œå³å¯ç¼–ç¨‹ã€‚å€ŸåŠ©æ­¤å·¥å…·ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®Œæˆå®šæ—¶è„šæœ¬ã€å¥åº·æ£€æµ‹ã€å†’çƒŸæµ‹è¯•ç­‰åŠŸèƒ½ã€‚ä¸‹èŠ‚ï¼Œæˆ‘å°†ä»‹ç» â€Run in Command Lineâ€œ çš„å·¥å…·ï¼šNewman ã€‚&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Postman åŠ Newman ä½¿ç”¨å¼€å‘æŒ‡å—ï¼ˆä¸‰ï¼‰ï¼šPostman Test ä¸æ¥å£æµ‹è¯•</title>
   <link href="http://spetacular.github.io/2017/04/22/postman-api-test.html"/>
   <updated>2017-04-22T00:00:00+08:00</updated>
   <id>http://spetacular.github.io/2017/04/22/postman-api-test</id>
   <content type="html">&lt;p&gt;API å¼€å‘ã€æµ‹è¯•ã€ç»´æŠ¤çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›æ¥å£å„å¸å…¶èŒï¼Œå¹¶ä¸”ä¸€è´¯å¦‚æ­¤ã€‚åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦æ£€æŸ¥ä¸‹åˆ—é€‰é¡¹ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸&lt;/li&gt;
  &lt;li&gt;å“åº”æ—¶é—´æ˜¯å¦æ§åˆ¶åœ¨1ç§’ä»¥ä¸‹&lt;/li&gt;
  &lt;li&gt;HTTP è¿”å›çŠ¶æ€ç æ˜¯å¦ä¸º200&lt;/li&gt;
  &lt;li&gt;ç¬¦åˆä¸€å®šçš„JSONæˆ–XMLæ ¼å¼&lt;/li&gt;
  &lt;li&gt;è¿”å›å†…å®¹æ˜¯å¦åŒ…å«ç‰¹å®šå­—ç¬¦ä¸²&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åªæœ‰æ‰€æœ‰çš„é€‰é¡¹éƒ½ç¬¦åˆé¢„æœŸï¼Œæˆ‘ä»¬æ‰ä¼šè®¤ä¸ºæ¥å£æ­£å¸¸å·¥ä½œã€‚&lt;/p&gt;

&lt;p&gt;Postman Builderé¡µé¢æä¾›äº†æ¥å£æµ‹è¯•çš„åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/postman_tests.jpeg&quot; alt=&quot;å•å…ƒæµ‹è¯•&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä¹¦å†™æµ‹è¯•ç”¨ä¾‹çš„æ–¹æ³•æ˜¯ï¼Œåœ¨testsæ•°ç»„ä¸­å¢åŠ ä¸€ä¸ªå…ƒç´ ï¼Œkeyä¸ºæµ‹è¯•ç”¨ä¾‹çš„åç§°ï¼Œvalueä¸ºè¡¨è¾¾å¼ã€‚å¦‚æœæ‰§è¡Œè¿‡åè¡¨è¾¾å¼çš„å€¼ä¸º true ï¼Œè¡¨æ˜é€šè¿‡æµ‹è¯•ï¼›åä¹‹ï¼Œæœªé€šè¿‡æµ‹è¯•ã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tests[&quot;Body matches string&quot;] = responseBody.has(&quot;string_you_want_to_search&quot;);
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Postman å¸¸è§çš„æµ‹è¯•ç”¨ä¾‹å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;è®¾ç½®ç¯å¢ƒå˜é‡&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;postman.setEnvironmentVariable(&quot;key&quot;, &quot;value&quot;);

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è·å–ç¯å¢ƒå˜é‡&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;postman.getEnvironmentVariable(&quot;key&quot;);

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è®¾ç½®å…¨å±€å˜é‡&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;postman.setGlobalVariable(&quot;key&quot;, &quot;value&quot;);

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è·å–å…¨å±€å˜é‡&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;postman.getGlobalVariable(&quot;key&quot;); 

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¿”å›å†…å®¹æ˜¯å¦åŒ…å«ç‰¹å®šå­—ç¬¦ä¸²&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tests[&quot;Body matches string&quot;] = responseBody.has(&quot;string_you_want_to_search&quot;);
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å°† XML è½¬åŒ–ä¸º JSON&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;var jsonObject = xml2Json(responseBody);
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¿”å›å†…å®¹æ˜¯å¦ä¸ºç‰¹å®šå­—ç¬¦ä¸²&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tests[&quot;Body is correct&quot;] = responseBody === &quot;response_body_string&quot;;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æ£€æŸ¥ JSON æ•°æ®çš„æŸä¸ªå­—æ®µæ˜¯å¦ç­‰äºç‰¹å®šå€¼&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;var data = JSON.parse(responseBody);
tests[&quot;Your test name&quot;] = data.value === 100;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æ£€æŸ¥æ˜¯å¦å­˜åœ¨ Content-Typeï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tests[&quot;Content-Type is present&quot;] = postman.getResponseHeader(&quot;Content-Type&quot;); //Note: the getResponseHeader() method returns the header value, if it exists.
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æ£€æŸ¥æ˜¯å¦å­˜åœ¨ Content-Typeï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tests[&quot;Content-Type is present&quot;] = responseHeaders.hasOwnProperty(&quot;Content-Type&quot;);
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å“åº”æ—¶é—´å°äº 200ms&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tests[&quot;Response time is less than 200ms&quot;] = responseTime &amp;lt; 200;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;HTTP è¿”å›çŠ¶æ€ç ä¸º 200&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tests[&quot;Status code is 200&quot;] = responseCode.code === 200;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;HTTP è¿”å›çŠ¶æ€ç åŒ…å«ç‰¹å®šå­—ç¬¦ä¸²&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tests[&quot;Status code name has string&quot;] = responseCode.name.has(&quot;Created&quot;);
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;POST è¯·æ±‚æˆåŠŸçš„çŠ¶æ€ç &lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tests[&quot;Successful POST request&quot;] = responseCode.code === 201 || responseCode.code === 202;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;åˆ©ç”¨ TinyValidator æ¥æ£€æŸ¥ JSON æ˜¯å¦ç¬¦åˆç‰¹å®šæ ¼å¼&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;var schema = {
 &quot;items&quot;: {
 &quot;type&quot;: &quot;boolean&quot;
 }
};
var data1 = [true, false];
var data2 = [true, 123];

tests[&quot;Valid Data1&quot;] = tv4.validate(data1, schema);
tests[&quot;Valid Data2&quot;] = tv4.validate(data2, schema);
console.log(&quot;Validation failed: &quot;, tv4.error);

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¯¥ä¾‹å­çš„æ ·æœ¬æ–‡ä»¶å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;JSON æ–‡ä»¶ï¼š&lt;a href=&quot;http://www.getpostman.com/samples/test_data_file.json&quot;&gt;Download JSON file&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CSV æ–‡ä»¶ï¼š&lt;a href=&quot;http://www.getpostman.com/samples/test_data_file.csv&quot;&gt;Download CSV file&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Postman åŠ Newman ä½¿ç”¨å¼€å‘æŒ‡å—ï¼ˆäºŒï¼‰ï¼šPostman ç¯å¢ƒå˜é‡ä¸å…¨å±€å˜é‡</title>
   <link href="http://spetacular.github.io/2017/04/21/postman-environment-variable-and-global-variable.html"/>
   <updated>2017-04-21T00:00:00+08:00</updated>
   <id>http://spetacular.github.io/2017/04/21/postman-environment-variable-and-global-variable</id>
   <content type="html">&lt;p&gt;ä½¿ç”¨APIçš„å¸¸è§åœºæ™¯æ˜¯å¼€å‘äººå‘˜æœ‰è‡ªå·±çš„æœ¬æœºå¼€å‘ï¼ˆdevï¼‰ç¯å¢ƒï¼Œå›¢é˜Ÿä¹‹é—´å…±ç”¨æµ‹è¯•ï¼ˆstagingï¼‰ç¯å¢ƒï¼Œå¯¹å¤–æä¾›ç”Ÿäº§ï¼ˆproductionï¼‰ç¯å¢ƒã€‚&lt;/p&gt;

&lt;p&gt;æœ¬æ–‡å‡è®¾å„ç§ç¯å¢ƒçš„é“¾æ¥å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;dev http://localhost
staging http://staging
production https://production
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¼€å‘äººå‘˜å¯¹&lt;code class=&quot;highlighter-rouge&quot;&gt;/users&lt;/code&gt;æ¥å£è¿›è¡Œè°ƒè¯•æ—¶ï¼Œå¦‚æœæ²¡æœ‰ç¯å¢ƒå˜é‡ï¼Œåˆ™å¯èƒ½è¦ä¸æ–­åœ°è¾“å…¥ä»¥ä¸‹é“¾æ¥è¿›è¡Œæ›¿æ¢ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-reStructuredText&quot;&gt;http://localhost/users
http://staging/users
https://production/users
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Postman æä¾›äº†ç¯å¢ƒå˜é‡ï¼ˆEnvironment Variableï¼‰ï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;

&lt;h1 id=&quot;section&quot;&gt;ç¯å¢ƒå˜é‡&lt;/h1&gt;

&lt;h2 id=&quot;section-1&quot;&gt;ç®¡ç†&lt;/h2&gt;

&lt;p&gt;Postman ç¯å¢ƒå˜é‡ç›¸å…³æŒ‰é’®æ”¾ç½®åœ¨Builderé¡µé¢çš„å³ä¸Šè§’ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/postman_env.jpeg&quot; alt=&quot;postmanç¯å¢ƒå˜é‡ç›¸å…³æŒ‰é’®&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç‚¹å‡»æœ€å³çš„ âš™ï¸ å›¾æ ‡ï¼Œå¯ä»¥æ·»åŠ ã€ç¼–è¾‘ã€æŸ¥çœ‹ç¯å¢ƒã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªstagingçš„ç¯å¢ƒï¼Œä¸‹å±å˜é‡urlè®¾ç½®ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;http://staging&lt;/code&gt; ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/postman_add_env.jpeg&quot; alt=&quot;postmanç¯å¢ƒå˜é‡ç›¸å…³æŒ‰é’®&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å†æ·»åŠ devå’Œproductionç¯å¢ƒã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/postman_env_lists.jpeg&quot; alt=&quot;postmanç¯å¢ƒå˜é‡ç›¸å…³æŒ‰é’®&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;section-2&quot;&gt;ä½¿ç”¨ç¤ºä¾‹&lt;/h2&gt;

&lt;p&gt;æˆ‘ä»¬å°†ç¯å¢ƒåˆ‡æ¢ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;dev&lt;/code&gt;ï¼Œåœ¨åœ°å€æ è¾“å…¥{{url}}/usersï¼ŒæŸ¥çœ‹â€œCodeâ€ä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;GET /users HTTP/1.1
Host: localhost
Cache-Control: no-cache
Postman-Token: 9a0ae49e-8983-55f2-7585-a4ea721863da
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¯è§ï¼ŒPostman è‡ªåŠ¨å°†{{url}}è§£æä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;http://localhost&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h1 id=&quot;section-3&quot;&gt;å…¨å±€å˜é‡&lt;/h1&gt;

&lt;p&gt;APIæµ‹è¯•æ—¶ï¼Œä¹Ÿå¸¸æœ‰è¿™æ ·çš„åœºæ™¯ï¼šé¦–å…ˆè¦è¿›è¡Œç™»å½•ï¼Œç™»å½•åè·å–ç”¨æˆ·åï¼Œè€Œç”¨æˆ·åå°†åœ¨åç»­è¯·æ±‚ä¸­ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;Postman æä¾›äº†å…¨å±€å˜é‡ï¼ˆGlobal Variableï¼‰ï¼Œæ¥è§£å†³ç±»ä¼¼é—®é¢˜ã€‚&lt;/p&gt;

&lt;h1 id=&quot;section-4&quot;&gt;è®¾ç½®å…¨å±€å˜é‡&lt;/h1&gt;

&lt;p&gt;è‡³å°‘æœ‰ä¸‰ç§æ–¹å¼æ¥è®¾ç½®å…¨å±€å˜é‡ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Postman å…¨å±€å˜é‡çš„æŒ‰é’®æ”¾ç½®åœ¨Builderé¡µé¢çš„å³ä¸Šè§’ï¼ŒğŸ‘ï¸ å›¾æ ‡ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/postman_var.jpeg&quot; alt=&quot;postmanå…¨å±€å˜é‡ç›¸å…³æŒ‰é’®&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç‚¹å‡»â€œGlobalâ€å¯¹åº”çš„â€œEditâ€å³å¯è¿›å…¥ç®¡ç†é¡µé¢ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/postman_set_var.jpeg&quot; alt=&quot;postmanå…¨å±€å˜é‡ç›¸å…³æŒ‰é’®&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Pre-request Script&lt;/li&gt;
  &lt;li&gt;Tests&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å…¶ä¸­æ–¹å¼2å’Œæ–¹å¼3éƒ½å¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤è®¾ç½®å…¨å±€å˜é‡ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;postman&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;setGlobalVariable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;variable_key&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;variable_value&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;section-5&quot;&gt;ç¤ºä¾‹&lt;/h1&gt;

&lt;p&gt;æˆ‘ä»¬é¦–å…ˆé€šè¿‡ä¸ŠèŠ‚çš„æ–¹å¼1æ·»åŠ ä¸€ä¸ªå…¨å±€å˜é‡ï¼š&lt;code class=&quot;highlighter-rouge&quot;&gt;leap_year_2016&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/postman_var_false.jpeg&quot; alt=&quot;postmanå…¨å±€å˜é‡&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬è®¿é—® Postman å®˜æ–¹ç¤ºä¾‹ä¸­åˆ¤æ–­å¹´ä»½æ˜¯å¦ä¸ºé—°å¹´çš„é“¾æ¥ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;https://postman-echo.com/time/leap?timestamp=2016-10-10
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç„¶ååœ¨Testsé‡Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;jsonData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;responseBody&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;postman&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;setGlobalVariable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'leap_year_2016'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;jsonData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;leap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/postman_var_leap.jpeg&quot; alt=&quot;postmanå…¨å±€å˜é‡&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å‘é€è¯·æ±‚åï¼Œç”±äº2016å¹´æ˜¯é—°å¹´ï¼Œæ‰€ä»¥å…¨å±€å˜é‡&lt;code class=&quot;highlighter-rouge&quot;&gt;leap_year_2016&lt;/code&gt;å€¼åº”å˜ä¸ºtrueã€‚&lt;/p&gt;

&lt;p&gt;æŸ¥çœ‹ä¸€ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/postman_var_true.jpeg&quot; alt=&quot;postmanå…¨å±€å˜é‡&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;leap_year_2016=true&lt;/code&gt;ï¼Œç¬¦åˆé¢„æœŸã€‚&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Postman åŠ Newman ä½¿ç”¨å¼€å‘æŒ‡å—ï¼ˆä¸€ï¼‰ï¼šPostman ç®€ä»‹</title>
   <link href="http://spetacular.github.io/2017/04/20/postman-and-newman-development.html"/>
   <updated>2017-04-20T00:00:00+08:00</updated>
   <id>http://spetacular.github.io/2017/04/20/postman-and-newman-development</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;https://www.getpostman.com/&quot;&gt;Postman&lt;/a&gt; æ˜¯ä¸€æ¬¾å¸®åŠ©å¼€å‘è€…åˆ†äº«ã€æµ‹è¯•ã€æ–‡æ¡£åŒ–ã€ç›‘æ§APIæ¥å£çš„å·¥å…·ã€‚å®ƒæœ€å¼€å§‹æ˜¯ä¸€ä¸ª &lt;a href=&quot;https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop&quot;&gt;Chromeæ’ä»¶&lt;/a&gt; ï¼Œä½†ç°åœ¨æä¾›äº† Macã€Windwosã€Linuxã€Chrome å…¨å¹³å°çš„æ”¯æŒã€‚&lt;/p&gt;

&lt;h1 id=&quot;section&quot;&gt;ç®€ä»‹&lt;/h1&gt;

&lt;h2 id=&quot;section-1&quot;&gt;ä¸‹è½½å®‰è£…&lt;/h2&gt;

&lt;p&gt;Postman ç›®å‰æä¾›äº†å…¨å¹³å°çš„ç‰ˆæœ¬ï¼Œè¯»è€…å¯ä»¥åˆ°ä»¥ä¸‹åœ°å€è¿›è¡Œä¸‹è½½å®‰è£…ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.getpostman.com/&quot;&gt;https://www.getpostman.com/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å®‰è£…å¯åŠ¨åï¼Œç•Œé¢å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/postman_ui.jpeg&quot; alt=&quot;postmanç•Œé¢&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;section-2&quot;&gt;ç•Œé¢ä»‹ç»&lt;/h2&gt;

&lt;h3 id=&quot;section-3&quot;&gt;é¡¶éƒ¨&lt;/h3&gt;

&lt;p&gt;Show/Hide Sidebar: æ˜¾ç¤ºæˆ–éšè—è¾¹æ &lt;/p&gt;

&lt;p&gt;Runner: æ‰“å¼€æ¥å£æµ‹è¯•å·¥å…·Runnerï¼›&lt;/p&gt;

&lt;p&gt;Import: å¯¼å…¥postmanæ•°æ®ï¼ŒåŒ…æ‹¬postmané›†åˆã€ç¯å¢ƒå˜é‡ã€curlå‘½ä»¤ç­‰æ–‡ä»¶ï¼›&lt;/p&gt;

&lt;p&gt;Open: æ‰“å¼€æ–°çª—å£&lt;/p&gt;

&lt;p&gt;Builder: è¯·æ±‚æ„é€ å™¨ï¼Œä¸ºä¸»å·¥ä½œåŒºåŸŸ&lt;/p&gt;

&lt;p&gt;Team Libraryï¼šå›¢é˜Ÿå·¥ä½œåŒºåŸŸ&lt;/p&gt;

&lt;p&gt;SYNCï¼šåŒæ­¥åŠŸèƒ½ï¼Œç™»å½•åå¯å°†æœ¬åœ°æ•°æ®é›†ä¸Šä¼ åˆ°äº‘ç«¯ï¼Œä»¥ä¾¿å¤‡ä»½ã€åˆ†äº«æˆ–å¼‚å¤„ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;Sign Inï¼šç™»å½•åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;p&gt;è®¾ç½®ï¼šè®¾ç½®ï¼Œæ–‡æ¡£ï¼Œå®˜æ–¹æ”¯æŒä¸­å¿ƒ&lt;/p&gt;

&lt;h3 id=&quot;section-4&quot;&gt;è¾¹æ &lt;/h3&gt;

&lt;p&gt;Filterï¼šæœç´¢æ¡†ï¼Œæä¾›å…³é”®å­—æ£€ç´¢&lt;/p&gt;

&lt;p&gt;Historyï¼šè¯·æ±‚å†å²ï¼ŒæŒ‰æ—¶é—´å€’åº&lt;/p&gt;

&lt;p&gt;Collectionsï¼špostmané›†åˆï¼ŒåŒ…å«å¤šä¸ªAPIã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼Œåç»­çš„Runnerå°±æ˜¯åŸºäºé›†åˆè¿›è¡Œçš„ã€‚&lt;/p&gt;

&lt;h3 id=&quot;builder&quot;&gt;Builder&lt;/h3&gt;

&lt;p&gt;è¯·æ±‚æ„é€ å™¨ï¼Œä½¿ç”¨æ–¹å¼ç±»ä¼¼äºæµè§ˆå™¨ã€‚æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼å°±æ˜¯åœ¨åœ°å€æ è¾“å…¥åœ°å€ï¼Œç‚¹å‡»â€œSendâ€æŒ‰é’®ï¼Œç¨åå“åº”çª—å£ä¼šæ˜¾ç¤ºå“åº”ç»“æœã€‚&lt;/p&gt;

&lt;p&gt;postmanå¯æŒ‡å®šå¦‚ä¸‹è¯·æ±‚æ„é€ éƒ¨åˆ†ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;è¯·æ±‚æ–¹å¼ï¼šGETã€POSTã€PUTã€PATCHã€DELETEã€COPYã€HEADã€OPTIONSã€LINKã€UNLINKã€PURGEã€LOCKã€UNLOCKã€PROPFINDã€VIEW&lt;/li&gt;
  &lt;li&gt;å‚æ•°ï¼šæ”¯æŒå¯è§†åŒ–ç¼–è¾‘ã€æ‰¹é‡ç¼–è¾‘&lt;/li&gt;
  &lt;li&gt;è®¤è¯æ–¹å¼ï¼šAuthorizationæ–¹å¼ï¼Œæ”¯æŒNo Authã€Basic Authã€Digest Authã€OAuth 1.0ã€OAuth 2.0ã€Hawk Authenticationã€AWS Signatureã€‚å…¶ä¸­No Authæ˜¯åˆ©ç”¨Cookieè®¤è¯ã€‚&lt;/li&gt;
  &lt;li&gt;headersï¼šè®¾ç½®è¯·æ±‚å¤´&lt;/li&gt;
  &lt;li&gt;Bodyï¼šå½“è¯·æ±‚ä¸ºPOSTæ–¹å¼æ—¶ï¼Œå¯ä»¥è®¾ç½®Bodyã€‚å…±æœ‰å››ç§æƒ…å†µï¼š
    &lt;ul&gt;
      &lt;li&gt;form-dataï¼šæ¨¡æ‹Ÿè¡¨å•æäº¤&lt;/li&gt;
      &lt;li&gt;x-www-form-urlencodedï¼šæ¨¡æ‹Ÿajaxè¯·æ±‚&lt;/li&gt;
      &lt;li&gt;rawï¼šåŸå§‹æ ¼å¼ï¼Œæ”¯æŒå¤šç§æ ¼å¼ï¼ŒåŒ…æ‹¬Textã€JSONã€Javascriptã€XMLã€HTMLç­‰&lt;/li&gt;
      &lt;li&gt;binaryï¼šä¸Šä¼ æ–‡ä»¶&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Pre-request Script: æäº¤è¯·æ±‚ä¹‹å‰æ‰§è¡Œçš„è„šæœ¬ã€‚&lt;/li&gt;
  &lt;li&gt;Testsï¼šå¯¹å“åº”ç»“æœåšæµ‹è¯•ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;postmanå¯ä»¥æŸ¥çœ‹å“åº”ç»“æœï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Bodyï¼š å“åº”å†…å®¹ï¼Œæ”¯æŒJSONã€XMLç¾åŒ–é«˜äº®æ–¹å¼ã€‚&lt;/li&gt;
  &lt;li&gt;Cookiesï¼šè¿”å›Cookies&lt;/li&gt;
  &lt;li&gt;Headersï¼šå“åº”å¤´ä¿¡æ¯ã€‚&lt;/li&gt;
  &lt;li&gt;Testsï¼šå¯¹å“åº”ç»“æœçš„å•å…ƒæµ‹è¯•ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;section-5&quot;&gt;åŠŸèƒ½&lt;/h1&gt;

&lt;h2 id=&quot;code&quot;&gt;ç”ŸæˆCode&lt;/h2&gt;

&lt;p&gt;Builderé¡µé¢çš„å³ä¸Šè§’ï¼Œæœ‰â€œCookieâ€ã€â€Codeâ€œå­—æ ·ï¼Œç‚¹å‡»â€Codeâ€œï¼Œå¯ä»¥æŸ¥çœ‹å„ç§è¯­è¨€ç”Ÿæˆçš„è¯·æ±‚ä»£ç ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/postman_code.jpeg&quot; alt=&quot;ç”Ÿæˆcode&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç›®å‰æ”¯æŒå¤§éƒ¨åˆ†å¸¸ç”¨è¯­è¨€ï¼ŒåŒ…æ‹¬HTTPã€Cã€cURLã€C#ã€Goã€Javaã€Javascriptã€NodeJSã€Object-Cã€OCamlã€PHPã€Pythonã€Rubyã€Shellã€Swiftç­‰ã€‚&lt;/p&gt;

&lt;h2 id=&quot;cookie&quot;&gt;ç®¡ç†Cookie&lt;/h2&gt;

&lt;p&gt;Builderé¡µé¢çš„å³ä¸Šè§’ï¼Œæœ‰â€œCookieâ€ã€â€Codeâ€œå­—æ ·ï¼Œç‚¹å‡»â€Cookieâ€œï¼Œå¯ä»¥è¿›å…¥ç®¡ç†Cookieé¡µé¢ã€‚ã€Œæ³¨æ„ï¼šæŸäº›ç‰ˆæœ¬çš„postmanè¿˜æœªé›†æˆæ­¤åŠŸèƒ½ï¼Œå¦‚Chromeæ’ä»¶ã€&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/postman_cookie.jpeg&quot; alt=&quot;ç®¡ç†Cookie&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;section-6&quot;&gt;å•å…ƒæµ‹è¯•&lt;/h2&gt;

&lt;p&gt;è¯·æ±‚ä¸€ä¸ªæ¥å£åï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›è¿™ä¸ªæ¥å£èƒ½æ»¡è¶³ä¸€å®šçš„æ¡ä»¶ï¼Œå¦‚ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;HTTPè¿”å›ç ä¸º200&lt;/li&gt;
  &lt;li&gt;ç¬¦åˆä¸€å®šçš„JSONæ ¼å¼&lt;/li&gt;
  &lt;li&gt;å“åº”æ—¶é—´å°‘äº200ms&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;postmançš„testsåŠŸèƒ½å¯ä»¥æ»¡è¶³æ­¤éœ€æ±‚ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/postman_tests.jpeg&quot; alt=&quot;å•å…ƒæµ‹è¯•&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;tests&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Status code is 200&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;responseCode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;jsonData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;responseBody&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;tests&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2016 is a leap year&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;jsonData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;leap&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æˆ‘ä»¬å¸Œæœ›HTTPè¿”å›ç ä¸º200ã€‚2016å¹´æ˜¯é—°å¹´ï¼Œæ‰€ä»¥æˆ‘ä»¬å¸Œæœ›è¿”å›leap=trueã€‚&lt;/p&gt;

&lt;p&gt;è€Œå“åº”çª—å£çš„Testsé€‰é¡¹å¡ï¼Œæ˜¾ç¤º2æ¡æµ‹è¯•éƒ½é€šè¿‡ï¼Œè¯´æ˜æ¥å£ä¸€åˆ‡æ­£å¸¸ã€‚&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Nginxç¼“å­˜æœ€ä½³å®è·µ</title>
   <link href="http://spetacular.github.io/2017/04/10/nginx-cache.html"/>
   <updated>2017-04-10T00:00:00+08:00</updated>
   <id>http://spetacular.github.io/2017/04/10/nginx-cache</id>
   <content type="html">&lt;p&gt;ä¸&lt;a href=&quot;https://varnish-cache.org/&quot;&gt;Varnish&lt;/a&gt;ç±»ä¼¼ï¼Œ&lt;a href=&quot;https://nginx.org/&quot;&gt;Nginx&lt;/a&gt;éå¸¸é€‚åˆåšç½‘é¡µç¼“å­˜ã€‚è®¸å¤šç®¡ç†å‘˜è½¬å‘Varnishï¼Œå› ä¸ºVarnishç¡®å®æœ‰ç”¨ã€‚ä½†æ˜¯ï¼ŒNginxä¹Ÿæœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Nginxèƒ½éå¸¸æœ‰æ•ˆåœ°ç›´æ¥å¤„ç†é™æ€å†…å®¹ã€‚åœ¨é™æ€æ–‡ä»¶å’ŒNginxåœ¨åŒä¸€ä¸»æœºçš„æƒ…å†µä¸‹ï¼Œè¿™ç§ç‰¹æ€§å°¤ä¸ºæœ‰ç”¨ã€‚&lt;/li&gt;
  &lt;li&gt;å½“æ”¾ç½®åœ¨åº”ç”¨æœåŠ¡å™¨å‰ç«¯æ—¶ï¼ŒNginxç¡®å®èƒ½å¤Ÿæ‹…å½“ç¼“å­˜æœåŠ¡å™¨çš„è§’è‰²ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è™½ç„¶Varnishä½œä¸ºç½‘é¡µç¼“å­˜æœåŠ¡å™¨æ‹¥æœ‰æ¯”Nginxæ›´ä¸°å¯Œçš„ç¼“å­˜ç›¸å…³çš„ç‰¹æ€§ï¼Œä½†æ˜¯Nginxä»ç„¶æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæ‚¨çš„æµé‡éœ€è¦ä¸ºç¼“å­˜æ·»åŠ ä¸€å±‚åŸºç¡€è®¾æ–½ï¼Œä½†ä¸éœ€è¦å¼•å…¥å­¦ä¹ å’Œç»´æŠ¤çš„æ–°æŠ€æœ¯çš„å¼€é”€ï¼ŒNginxå¯èƒ½æ›´é€‚åˆã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæ‚¨ç¢°å·§ä½¿ç”¨Nginx Plusï¼Œå®ƒå…·æœ‰æ”¯æŒå’Œé¢å¤–çš„åŠŸèƒ½ï¼Œè¿™ä¸€ç‚¹å°¤å…¶å¦‚æ­¤ã€‚&lt;/p&gt;

&lt;h1 id=&quot;section&quot;&gt;ç”¨ä¾‹&lt;/h1&gt;

&lt;p&gt;Nginxè‡ªå·±å¤„ç†é™æ€å†…å®¹ã€‚è¿™æ˜¯WebæœåŠ¡å™¨çš„å…¸å‹ç”¨ä¾‹ï¼Œè€Œä¸æ˜¯ç¼“å­˜æœåŠ¡å™¨ã€‚ç„¶è€Œï¼Œç”±äºNginxå¯ä»¥å‘å…¶ä»–WebæœåŠ¡å™¨æˆ–åº”ç”¨ç¨‹åºï¼ˆé€šè¿‡HTTPï¼ŒFastCGIå’ŒuWSGIï¼‰ä»£ç†è¯·æ±‚ï¼Œå› æ­¤é€šå¸¸ç”¨äºåœ¨å‘å…¶ä»–è¿›ç¨‹ä»£ç†åº”ç”¨ç¨‹åºè¯·æ±‚æ—¶æé«˜æœåŠ¡é™æ€æ–‡ä»¶çš„æ€§èƒ½ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„æ¶æ„ï¼Œä½†æ˜¯PHPçš„ç”¨æˆ·å¯èƒ½ä¼šä½¿ç”¨Apache + Apacheçš„&lt;code class=&quot;highlighter-rouge&quot;&gt;mod_php&lt;/code&gt;ï¼Œå®ƒå°†PHPâ€œå†…ç½®â€åˆ°Apacheä¸­ï¼Œä½¿å¾—å®ƒä¼¼ä¹ä¸€åˆ‡éƒ½åœ¨ä¸€ä¸ªç¥å¥‡ï¼ˆä½†æ•ˆç‡è¾ƒä½ï¼‰çš„åœ°æ–¹ã€‚
é™¤äº†ç›´æ¥æä¾›é™æ€æ–‡ä»¶çš„èƒ½åŠ›å¤–ï¼ŒNginxè¿˜å¯ä»¥ä½œä¸ºç¼“å­˜æœåŠ¡å™¨ï¼Œè¿™æ„å‘³ç€Nginxå¯ä»¥ç¼“å­˜ä»å…¶ä»–æœåŠ¡å™¨æ¥æ”¶çš„å†…å®¹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä»¥ä¸‹ç”¨ä¾‹æ˜¯ä½¿ç”¨Nginxä½œä¸ºç¼“å­˜æœåŠ¡å™¨çš„ä¸€äº›å¸¸è§çš„ç”¨ä¾‹ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Nginxå¯ä»¥ä½äºWebæœåŠ¡å™¨çš„å‰ç«¯ï¼Œè¿™å¯èƒ½æ˜¯å…¶ä»–Nginxå®ä¾‹æˆ–Webåº”ç”¨ç¨‹åºã€‚è¿™æ˜¯ç¼“å­˜æœåŠ¡å™¨çš„å…¸å‹ç”¨ä¾‹ - å®ƒä½œä¸ºå…¶ä»–Webæˆ–åº”ç”¨ç¨‹åºæœåŠ¡å™¨çš„ç½‘å…³ï¼Œèµ·åˆ°äº†è´Ÿè½½å¹³è¡¡å™¨çš„ä½œç”¨ã€‚&lt;/li&gt;
  &lt;li&gt;Nginxç¼“å­˜å¯ä»¥ä¸è´Ÿè½½å‡è¡¡å™¨ä¸€èµ·ä½¿ç”¨ã€‚&lt;/li&gt;
  &lt;li&gt;å®é™…ä¸Šï¼ŒNginxå¯ä»¥å……å½“è´Ÿè½½å¹³è¡¡å™¨å’Œç¼“å­˜æœåŠ¡å™¨ï¼&lt;/li&gt;
  &lt;li&gt;é™¤äº†å…¶ä»–HTTPæœåŠ¡å™¨/ç›‘å¬å™¨ä¹‹å¤–ï¼ŒNginxè¿˜å¯ä»¥ç¼“å­˜ä»£ç†åˆ°FastCGIå’ŒuWSGIè¿›ç¨‹çš„è¯·æ±‚ç»“æœï¼ä¸€ä¸ªå¾ˆå¥½çš„ç”¨ä¾‹æ˜¯ç¼“å­˜å†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆCMSï¼‰çš„ç»“æœï¼Œå¤§å¤šæ•°ç”¨æˆ·ä¸éœ€è¦ç½‘ç«™çš„åŠ¨æ€æ–¹é¢ - ä»–ä»¬åªæ˜¯æƒ³çœ‹åˆ°å†…å®¹ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;ç¼“å­˜æœåŠ¡å™¨çš„ä¸»è¦ä¼˜ç‚¹&lt;/strong&gt;æ˜¯æˆ‘ä»¬åœ¨æˆ‘ä»¬çš„åº”ç”¨æœåŠ¡å™¨ä¸Šæ”¾ç½®çš„è´Ÿè½½è¾ƒå°‘ã€‚å¯¹ç¼“å­˜çš„é™æ€æˆ–åŠ¨æ€èµ„äº§çš„è¯·æ±‚æ— éœ€ç”šè‡³åˆ°è¾¾åº”ç”¨ç¨‹åºï¼ˆæˆ–é™æ€å†…å®¹ï¼‰æœåŠ¡å™¨ - æˆ‘ä»¬çš„ç¼“å­˜æœåŠ¡å™¨æœ¬èº«å¯ä»¥å¤„ç†è®¸å¤šè¯·æ±‚ï¼&lt;/p&gt;

&lt;p&gt;åœ¨è¿™é‡Œçš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨Nginxå¤„ç†é™æ€ç«™ç‚¹ï¼Œå†åœ¨å‰é¢æ”¾ç½®Nginxç¼“å­˜æœåŠ¡å™¨ã€‚&lt;/p&gt;

&lt;h1 id=&quot;section-1&quot;&gt;å®ƒå¦‚ä½•å·¥ä½œ&lt;/h1&gt;

&lt;p&gt;é¦–å…ˆä½ éœ€è¦çŸ¥é“Origin Serveræ˜¯ä»€ä¹ˆã€‚&lt;/p&gt;

&lt;p&gt;æºæœåŠ¡å™¨æ˜¯æ‹¥æœ‰çœŸæ­£çš„é™æ€æ–‡ä»¶æˆ–åŠ¨æ€ç”Ÿæˆçš„HTMLçš„æœåŠ¡å™¨ã€‚ä»–ä»¬æœ‰ä¸¤ä¸ªè´£ä»»ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;è¯·æ±‚æ—¶æä¾›åŠ¨æ€å’Œé™æ€å†…å®¹&lt;/li&gt;
  &lt;li&gt;é€šè¿‡HTTPç¼“å­˜å¤´å†³å®šå¦‚ä½•ç¼“å­˜æ–‡ä»¶ï¼ˆå’Œæ½œåœ¨çš„åŠ¨æ€å†…å®¹ï¼‰&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ¥ä¸‹æ¥è¯´ä¸‹&lt;strong&gt;ç¼“å­˜æœåŠ¡å™¨&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ç¼“å­˜æœåŠ¡å™¨ï¼ˆé€šå¸¸ï¼‰æ˜¯â€œå‰ç«¯â€;å®ƒä»å®¢æˆ·ç«¯æ”¶åˆ°åˆå§‹HTTPè¯·æ±‚ã€‚ç„¶åå®ƒä¼šå¤„ç†è¯·æ±‚æœ¬èº«ï¼ˆå¦‚æœå®ƒå…·æœ‰æ‰€è¯·æ±‚èµ„æºçš„æ–°ç¼“å­˜å‰¯æœ¬ï¼‰ï¼Œæˆ–è€…å°†è¯·æ±‚ä¼ é€’ç»™Origin Serveræ¥å®ç°ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœè¯·æ±‚å‘é€åˆ°Origin Serverï¼Œåˆ™ç”±Cache Serverè¯»å–æºæœåŠ¡å™¨çš„å“åº”å¤´ï¼Œä»¥ç¡®å®šå“åº”æ˜¯ç¼“å­˜è¿˜æ˜¯ç®€å•ä¼ é€’ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä¸€äº›è¾ƒå¤§çš„Webåº”ç”¨ç¨‹åºé™¤äº†ç¼“å­˜æœåŠ¡å™¨ä¹‹å¤–è¿˜ä½¿ç”¨è´Ÿè½½å¹³è¡¡å™¨ï¼Œä»è€Œå¯¼è‡´é«˜åº¦åˆ†å±‚çš„åŸºç¡€æ¶æ„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ç¼“å­˜æœåŠ¡å™¨çš„èŒè´£ï¼š
- ç¡®å®šHTTPè¯·æ±‚æ˜¯å¦æ¥å—ç¼“å­˜å“åº”ï¼Œå¹¶ä¸”ç¼“å­˜ä¸­æœ‰ä¸€ä¸ªæ–°é¡¹ç›®å¯ä»¥å“åº”
- å¦‚æœè¯·æ±‚ä¸åº”è¢«ç¼“å­˜ï¼Œæˆ–è€…ç¼“å­˜çš„é¡¹ç›®æ˜¯å¦è¿‡æœŸï¼Œåˆ™å‘æºæœåŠ¡å™¨å‘é€HTTPè¯·æ±‚
- å“åº”æ¥è‡ªå…¶ç¼“å­˜æˆ–æºæœåŠ¡å™¨çš„HTTPå“åº”ä¸ºé€‚å½“çš„ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åè¯´ä¸‹&lt;strong&gt;å®¢æˆ·ç«¯&lt;/strong&gt;ã€‚å®¢æˆ·ç«¯å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„æœ¬åœ°ï¼ˆç§æœ‰ï¼‰ç¼“å­˜ - ä¾‹å¦‚æ¯ä¸ªæµè§ˆå™¨éƒ½æœ‰ä¸€ä¸ªæœ¬åœ°ç¼“å­˜ã€‚æˆ‘ä»¬çš„æµè§ˆå™¨å¯èƒ½ä¼šç¼“å­˜ä¸€ä¸ªå“åº”æœ¬èº«ï¼ˆé€šå¸¸æ˜¯å›¾åƒï¼ŒCSSå’ŒJSæ–‡ä»¶ï¼‰ï¼Œå› æ­¤ï¼Œå¦‚æœé™æ€æ–‡ä»¶åœ¨å…¶æœ¬åœ°ç¼“å­˜ä¸­å·²ç»æœ‰æ–°ç‰ˆæœ¬ï¼Œé‚£ä¹ˆæµè§ˆå™¨æ ¹æœ¬ä¸ä¼šå‘ç¼“å­˜æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚&lt;/p&gt;

&lt;p&gt;å®ç°æœ¬åœ°ç¼“å­˜çš„å®¢æˆ·ç«¯å…·æœ‰ä»¥ä¸‹èŒè´£ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;å‘é€è¯·æ±‚&lt;/li&gt;
  &lt;li&gt;ç¼“å­˜å“åº”&lt;/li&gt;
  &lt;li&gt;å†³å®šä»æœ¬åœ°ç¼“å­˜ä¸­æå–è¯·æ±‚æˆ–å‘å‡ºHTTPè¯·æ±‚ä»¥æ£€ç´¢å®ƒä»¬&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;section-2&quot;&gt;æºæœåŠ¡å™¨&lt;/h1&gt;

&lt;p&gt;æºæœåŠ¡å™¨æœ€ç»ˆè´Ÿè´£æä¾›æ–‡ä»¶å’Œæ§åˆ¶å¦‚ä½•ç¼“å­˜æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;å®¢æˆ·ç«¯å¯ä»¥è¯·æ±‚ä¸è¢«ç¼“å­˜çš„èµ„æºã€‚ç¼“å­˜æœåŠ¡å™¨â€œå¿…é¡»â€éµå®ˆHTTPè§„èŒƒã€‚&lt;/p&gt;

&lt;p&gt;æ­¤å¤–ï¼Œå®¢æˆ·ç«¯è¯·æ±‚å¯ç¼“å­˜èµ„æºæ—¶ï¼Œå¿…é¡»éµå¾ªä»æºæœåŠ¡å™¨è¿”å›çš„ç¼“å­˜å‚æ•°ï¼Œè¿™å¯èƒ½åŒ…æ‹¬ä¸ç¼“å­˜ç»“æœçš„æŒ‡ä»¤ï¼&lt;/p&gt;

&lt;p&gt;è¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦ç¡®å®šæ–‡ä»¶å¦‚ä½•ç¼“å­˜åœ¨æˆ‘ä»¬çš„æºæœåŠ¡å™¨ä¸Šã€‚ ä¸ºæ­¤ï¼Œæˆ‘é€šå¸¸å°†&lt;a href=&quot;https://github.com/h5bp/server-configs-nginx/tree/master/h5bp&quot;&gt;H5BPé…ç½®ç›®å½•&lt;/a&gt;å¤åˆ¶åˆ°&lt;code class=&quot;highlighter-rouge&quot;&gt;/etc/nginx/h5bp&lt;/code&gt;,ä½œä¸ºNginxæœåŠ¡å™¨é…ç½®ã€‚&lt;/p&gt;

&lt;p&gt;å¤åˆ¶H5BPæ–‡ä»¶ä¹‹åï¼Œæˆ‘å¯ä»¥åœ¨æºæœåŠ¡å™¨çš„Nginxè™šæ‹Ÿä¸»æœºä¸­åŒ…å«&lt;code class=&quot;highlighter-rouge&quot;&gt;basic.conf&lt;/code&gt;é…ç½®ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;server {
    # Note that it's listening on port 9000
    listen 9000 default_server;
    root /var/www/;
    index index.html index.htm;

    server_name example.com www.example.com;

    charset utf-8;
    include h5bp/basic.conf;

    location / {
        try_files $uri $uri/ =404;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä¸ç¼“å­˜æœ€ç›¸å…³çš„H5BPé…ç½®æ–‡ä»¶æ˜¯&lt;code class=&quot;highlighter-rouge&quot;&gt;expires.conf&lt;/code&gt;ï¼Œå®ƒç¡®å®šäº†å¸¸è§æ–‡ä»¶çš„ç¼“å­˜è¡Œä¸ºï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Expire rules for static content

# cache.appcache, your document html and data
location ~* \.(?:manifest|appcache|html?|xml|json)$ {
  expires -1;
  # access_log logs/static.log; # I don't usually include a static log
}

# Feed
location ~* \.(?:rss|atom)$ {
  expires 1h;
  add_header Cache-Control &quot;public&quot;;
}

# Media: images, icons, video, audio, HTC
location ~* \.(?:jpg|jpeg|gif|png|ico|cur|gz|svg|svgz|mp4|ogg|ogv|webm|htc)$ {
  expires 1M;
  access_log off;
  add_header Cache-Control &quot;public&quot;;
}

# CSS and Javascript
location ~* \.(?:css|js)$ {
  expires 1y;
  access_log off;
  add_header Cache-Control &quot;public&quot;;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä¸Šè¿°é…ç½®ç¦ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;manifest&lt;/code&gt;ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;appcache&lt;/code&gt;ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;html&lt;/code&gt;ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;xml&lt;/code&gt;å’Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;json&lt;/code&gt;æ–‡ä»¶çš„ç¼“å­˜ã€‚ å®ƒå°†&lt;code class=&quot;highlighter-rouge&quot;&gt;RSS&lt;/code&gt;å’Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;ATOM&lt;/code&gt;è®¢é˜…æ–‡ä»¶ç¼“å­˜1å°æ—¶ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;Javascript&lt;/code&gt;å’Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;CSS&lt;/code&gt;æ–‡ä»¶1å¹´ï¼Œä»¥åŠå…¶ä»–é™æ€æ–‡ä»¶ï¼ˆå›¾åƒå’Œåª’ä½“ï¼‰1ä¸ªæœˆã€‚&lt;/p&gt;

&lt;p&gt;ç¼“å­˜å…¨éƒ¨è®¾ç½®ä¸ºâ€œpublicâ€ï¼Œæ‰€ä»¥ä»»ä½•ç³»ç»Ÿéƒ½å¯ä»¥ç¼“å­˜å®ƒä»¬ã€‚ å°†å®ƒä»¬è®¾ç½®ä¸ºç§æœ‰å°†é™åˆ¶å®ƒä»¬è¢«ç§æœ‰ç¼“å­˜ï¼ˆä¾‹å¦‚æˆ‘ä»¬çš„æµè§ˆå™¨ï¼‰ç¼“å­˜ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥æºæœåŠ¡å™¨æœ¬èº«æ²¡æœ‰è¿›è¡Œä»»ä½•ç¼“å­˜ï¼Œåªæ˜¯è¯´æ–‡ä»¶åº”è¯¥æ ¹æ®æ–‡ä»¶æ‰©å±•åè¿›è¡Œç¼“å­˜ã€‚ H5BPä¸ºè®¾ç½®ç¼“å­˜è§„åˆ™æä¾›äº†ä¸é”™çš„å‚è€ƒã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœç›´æ¥å‘æºæœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™äº›è§„åˆ™ç”Ÿæ•ˆã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;åŸå§‹æœåŠ¡å™¨æˆ‘è®¾ç½®æ¥æµ‹è¯•è¿™ä¸ªæ°å¥½æ˜¯è¿è¡Œåœ¨127.17.0.18:9000&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä»¥&lt;code class=&quot;highlighter-rouge&quot;&gt;.html&lt;/code&gt;ç»“å°¾çš„æ–‡ä»¶ä¸ä¼šè¢«ç¼“å­˜ã€‚ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å“åº”å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# GET curl request and select response headers
$ curl -X GET -I 127.17.0.18:9000/index.html
HTTP/1.1 200 OK
Server: nginx/1.4.6 (Ubuntu)
Date: Fri, 05 Sep 2014 23:24:52 GMT
Content-Type: text/html
Last-Modified: Fri, 05 Sep 2014 22:16:24 GMT
Expires: Fri, 05 Sep 2014 23:24:52 GMT
Cache-Control: no-cache
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¯·æ³¨æ„ï¼ŒExpiresä¸Dateç›¸åŒï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚ç«‹å³åˆ°æœŸï¼Œå³å‘Šè¯‰å®¢æˆ·ç«¯ä¸è¦ç¼“å­˜ã€‚ å“åº”è¿˜è¿”å›å¤´ä¿¡æ¯&lt;code class=&quot;highlighter-rouge&quot;&gt;Cache-Controlï¼šno-cache&lt;/code&gt;æ¥è¡¨æ˜ä¸ç¼“å­˜å“åº”å†…å®¹ã€‚ è¿™å®Œå…¨éµå¾ªH5BP &lt;code class=&quot;highlighter-rouge&quot;&gt;expires.conf&lt;/code&gt;é…ç½®è®¾ç½®çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;.html&lt;/code&gt;æ–‡ä»¶çš„è§„åˆ™ã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•è·å–ä¸€ä¸ªéœ€è¦ç¼“å­˜çš„æ–‡ä»¶ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# GET curl request and select response headers
$ curl -X GET -I 127.17.0.18:9000/css/style.css
HTTP/1.1 200 OK
Server: nginx/1.4.6 (Ubuntu)
Date: Fri, 05 Sep 2014 23:25:04 GMT
Content-Type: text/css
Last-Modified: Fri, 05 Sep 2014 22:46:39 GMT
Expires: Sat, 05 Sep 2015 23:25:04 GMT
Cache-Control: max-age=31536000
Cache-Control: public
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªcssæ–‡ä»¶åœ¨å½“å‰æ—¥æœŸçš„1å¹´åè¿‡æœŸï¼ ç¼“å­˜è§„åˆ™çš„è®¾ç½®&lt;code class=&quot;highlighter-rouge&quot;&gt;max-age&lt;/code&gt;(è¿‡æœŸæ—¶é—´ï¼‰å¤§çº¦ä¸º1å¹´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ï¼Œå¹¶å…è®¸å…¬å…±ç¼“å­˜ã€‚ è¿™ä¹Ÿéµå¾ªäº†H5BP &lt;code class=&quot;highlighter-rouge&quot;&gt;expires.conf&lt;/code&gt;é‡Œè®¾ç½®çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;.css&lt;/code&gt;æ–‡ä»¶çš„è§„åˆ™ã€‚&lt;/p&gt;

&lt;p&gt;è‡³æ­¤ï¼ŒæºæœåŠ¡å™¨è®¾ç½®å¥½äº†ã€‚&lt;/p&gt;

&lt;h1 id=&quot;section-3&quot;&gt;ç¼“å­˜æœåŠ¡å™¨&lt;/h1&gt;

&lt;p&gt;æºæœåŠ¡å™¨å·²ç»è®¾ç½®å®Œæ¯•ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦åœ¨æºæœåŠ¡å™¨å‰é¢æ”¾ç½®ä¸€ä¸ªç¼“å­˜æœåŠ¡å™¨ã€‚ åœ¨æˆ‘ä»¬çš„åœºæ™¯ä¸­ï¼Œç¼“å­˜æœåŠ¡å™¨å°†ä½œä¸ºWebæœåŠ¡å™¨æ¥æ¥æ”¶è¯·æ±‚ã€‚ å¦‚æœç¼“å­˜æœåŠ¡å™¨ä¸èƒ½ç›´æ¥ä»ç¼“å­˜é‡Œå‘½ä¸­æ–‡ä»¶ï¼Œåˆ™å®ƒä¼šå°†HTTPè¯·æ±‚ä¼ é€’ç»™æºæœåŠ¡å™¨ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨å¼€å§‹å®‰è£…æ–°çš„Nginxä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆçœ‹ä¸€ä¸‹åå‘ä»£ç†çš„â€œæ ‡å‡†â€è®¾ç½®ã€‚ä»¥ä¸‹è®¾ç½®å°šæœªé…ç½®ä»»ä½•ç¼“å­˜ï¼Œå®ƒåªæ˜¯å®ç°å°†è¯·æ±‚ä»£ç†åˆ°æºæœåŠ¡å™¨çš„åŠŸèƒ½ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;server {
    # Note that it's listening on port 80
    listen 80 default_server;
    root /var/www/;
    index index.html index.htm;

    server_name example.com www.example.com;

    charset utf-8;

    location / {
        include proxy_params;
        proxy_pass http://172.17.0.18:9000;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;åªæ˜¯ç®€å•åœ°å°†è¯·æ±‚ä»£ç†åˆ°æºæœåŠ¡å™¨ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;è¿™é‡Œä¸ºæµ‹è¯•è€Œè®¾ç½®çš„ç¼“å­˜æœåŠ¡å™¨ç›‘å¬åœ¨&lt;code class=&quot;highlighter-rouge&quot;&gt;172.17.0.13:80&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¦‚æœæˆ‘ä»¬åœ¨ç¼“å­˜æœåŠ¡å™¨ä¸Šå‘å‡ºè¯·æ±‚ï¼Œå°±åƒç›´æ¥å‘é€è¯·æ±‚åˆ°æºæœåŠ¡å™¨ä¸€æ ·ã€‚ è¿™æ˜¯å› ä¸ºç¼“å­˜æœåŠ¡å™¨å½“å‰æ²¡æœ‰ç¼“å­˜ï¼šå®ƒåªæ˜¯å°†è¯·æ±‚ä¼ é€’ç»™æºæœåŠ¡å™¨ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ curl -X GET -I 172.17.0.13/css/style.css
HTTP/1.1 200 OK
Server: nginx/1.4.6 (Ubuntu)
Date: Fri, 05 Sep 2014 23:30:07 GMT
Content-Type: text/css
Last-Modified: Fri, 05 Sep 2014 22:46:39 GMT
Expires: Sat, 05 Sep 2015 23:30:07 GMT
Cache-Control: max-age=31536000
Cache-Control: public
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç°åœ¨ï¼Œæˆ‘ä»¬æ·»åŠ å¿…è¦çš„æŒ‡ä»¤ï¼Œå®ç°ä»æºæœåŠ¡å™¨ä¸­è·å–Nginxç¼“å­˜å“åº”ã€‚ æˆ‘ä»¬åœ¨ä¸Šé¢å®šä¹‰çš„é…ç½®ä¸­ï¼Œå¢åŠ é¢å¤–çš„ç¼“å­˜æŒ‡ä»¤ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Note that these are defined outside of the server block,
# altho they don't necessarily need to be
proxy_cache_path /tmp/nginx levels=1:2 keys_zone=my_zone:10m inactive=60m;
proxy_cache_key &quot;$scheme$request_method$host$request_uri&quot;;

server {
    # Note that it's listening on port 80
    listen 80 default_server;
    root /var/www/;
    index index.html index.htm;

    server_name example.com www.example.com;

    charset utf-8;

    location / {
        proxy_cache my_zone;
        add_header X-Proxy-Cache $upstream_cache_status;

        include proxy_params;
        proxy_pass http://172.17.0.18:9000;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;ä»¥ä¸‹è§£é‡Šä¸€ä¸‹ç¼“å­˜æŒ‡ä»¤ã€‚&lt;/p&gt;

&lt;h2 id=&quot;proxycachepath&quot;&gt;proxy_cache_path&lt;/h2&gt;

&lt;p&gt;è¿™æ˜¯ä¿å­˜ç¼“å­˜æ–‡ä»¶çš„è·¯å¾„ã€‚ &lt;code class=&quot;highlighter-rouge&quot;&gt;levels&lt;/code&gt;æŒ‡ä»¤è®¾ç½®ç¼“å­˜æ–‡ä»¶å¦‚ä½•ä¿å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿã€‚å¦‚æœæ²¡æœ‰å®šä¹‰ï¼Œç¼“å­˜æ–‡ä»¶ç›´æ¥ä¿å­˜åœ¨æŒ‡å®šçš„è·¯å¾„ä¸­ã€‚å¦‚æœè¿™æ ·å®šä¹‰ï¼ˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;1ï¼š2&lt;/code&gt;ï¼‰ï¼Œç¼“å­˜æ–‡ä»¶å°†æ ¹æ®å…¶md5å“ˆå¸Œå€¼ä¿å­˜åœ¨ç¼“å­˜è·¯å¾„çš„å­ç›®å½•ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;keys_zone&lt;/code&gt;æ˜¯ç¼“å­˜åŒºåŸŸçš„åç§°ã€‚è¿™é‡Œå®ƒè¢«å‘½åä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;my_zone&lt;/code&gt;ï¼Œå¹¶ä¸ºç¼“å­˜keyå’Œå…¶ä»–å…ƒæ•°æ®æä¾›äº†10MBçš„å­˜å‚¨ç©ºé—´ï¼Œå°½ç®¡è¿™å¹¶ä¸é™åˆ¶å¯ä»¥ç¼“å­˜çš„æ–‡ä»¶æ•°é‡ï¼å®ƒåªæ˜¯è®¾ç½®å…ƒæ•°æ®çš„å­˜å‚¨ç©ºé—´ã€‚æ–‡æ¡£å£°ç§°1MBåŒºå¯ä»¥å­˜å‚¨çº¦8000ä¸ªkeyå’Œå…ƒæ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åï¼Œæˆ‘ä»¬è®¾ç½®äº†&lt;code class=&quot;highlighter-rouge&quot;&gt;inactive&lt;/code&gt;æŒ‡ä»¤ï¼Œå®ƒå‘Šè¯‰Nginxåœ¨60åˆ†é’Ÿå†…æ¸…é™¤ä»»ä½•æ²¡æœ‰è®¿é—®çš„ç¼“å­˜ã€‚è¯·æ³¨æ„ï¼Œè¿™é‡Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;60m&lt;/code&gt;æ˜¯60åˆ†é’Ÿï¼Œè€Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;key_zone&lt;/code&gt;çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;10m&lt;/code&gt;æ˜¯10å…†å­—èŠ‚ã€‚å¦‚æœæœªæ˜¾å¼è®¾ç½®ï¼Œåˆ™&lt;code class=&quot;highlighter-rouge&quot;&gt;inactive&lt;/code&gt;æŒ‡ä»¤é»˜è®¤ä¸º10åˆ†é’Ÿã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;inactive&lt;/code&gt;ä½¿Nginxæœ‰æœºä¼šâ€œå¿˜è®°â€å…³äºä¸å¸¸è¢«è¯·æ±‚çš„ç¼“å­˜èµ„æºã€‚è¿™æ ·ä¸€æ¥ï¼ŒNginxç¼“å­˜å¯ä»¥è®©æ‚¨æœ€å¤§ç¨‹åº¦çš„é™ä½æˆæœ¬ - æœ€éœ€è¦çš„èµ„æºä¼šä¿ç•™åœ¨ç¼“å­˜ä¸­ï¼ˆå¹¶éµå¾ªæ„¿æœåŠ¡å™¨æ‰€æŒ‡ç¤ºçš„ç¼“å­˜è§„åˆ™ï¼‰ã€‚&lt;/p&gt;

&lt;h2 id=&quot;proxycachekey&quot;&gt;proxy_cache_key&lt;/h2&gt;

&lt;p&gt;è¿™æ˜¯ç”¨æ¥åŒºåˆ†ç¼“å­˜æ–‡ä»¶çš„keyã€‚ é»˜è®¤å€¼ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;$scheme$proxy_host$uri$is_args$args&lt;/code&gt;ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œæ›´æ”¹ã€‚&lt;/p&gt;

&lt;p&gt;proxy_cache_keyä¹Ÿå¯ä»¥è®¾ç½®ä¸ºç±»ä¼¼&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;$host$request_uri $cookie_user&quot;&lt;/code&gt;ï¼ˆå¸¦å¼•å·ï¼‰è¿™æ ·çš„å½¢å¼ï¼Œä¹Ÿå¯ä»¥åŒ…æ‹¬cookiesä¿¡æ¯ã€‚&lt;/p&gt;

&lt;p&gt;Cookieç¡®å®ä¼šå½±å“ç¼“å­˜ï¼Œæ‰€ä»¥è¯·è°¨æ…è®¾ç½®ï¼ å¦‚æœCookieè¢«å¹¶å…¥ç¼“å­˜å¯†é’¥ï¼Œæ‚¨å¯èƒ½ä¼šæ„å¤–åœ°Nginxä¸ºæ¯ä¸ªç‹¬ç«‹cookieï¼ˆæ¯ä¸ªç«™ç‚¹è®¿é—®è€…ï¼‰éƒ½åˆ›å»ºäº†é‡å¤ç¼“å­˜çš„æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;è¿™æ„å‘³ç€å°†Cookieå¹¶å…¥keyç¡®å®ä¼šé™ä½ç¼“å­˜çš„æœ‰æ•ˆæ€§ã€‚ é’ˆå¯¹æ¯ä¸ªç”¨æˆ·çš„ç¼“å­˜ï¼Œæ˜¯ç§æœ‰ç¼“å­˜ï¼ˆWebæµè§ˆå™¨ï¼‰çš„ç›®çš„ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬æ­£åœ¨æ„å»ºçš„â€œå…¬å…±â€ç¼“å­˜æœåŠ¡å™¨çš„ç›®çš„ã€‚ ä½†æ˜¯ï¼Œåœ¨æŸç§æƒ…æ™¯ä¸‹ç¡®å®éœ€è¦å¼•å…¥Cookieï¼Œé‚£ä¹ˆproxy_cache_keyçš„è¿™ä¸ªé€‰é¡¹å°±å¾ˆæœ‰ç”¨äº†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;proxycache&quot;&gt;proxy_cache&lt;/h2&gt;

&lt;p&gt;åœ¨&lt;code class=&quot;highlighter-rouge&quot;&gt;location&lt;/code&gt;å—å†…ï¼ŒNginxä»¥&lt;code class=&quot;highlighter-rouge&quot;&gt;proxy_cache my_zone&lt;/code&gt;æŒ‡ä»¤å®šä¹‰ç¼“å­˜åŒºåŸŸã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬è¿˜æ·»åŠ äº†ä¸€ä¸ªæœ‰ç”¨çš„headerï¼ˆå¤´ä¿¡æ¯ï¼‰æ¥é€šçŸ¥æˆ‘ä»¬èµ„æºæ˜¯å¦ä»ç¼“å­˜æä¾›ã€‚è¿™å¯ä»¥é€šè¿‡&lt;code class=&quot;highlighter-rouge&quot;&gt;add_header X-Proxy-Cache $ upstream_cache_status&lt;/code&gt;æŒ‡ä»¤å®Œæˆã€‚ è¿™å°†è®¾ç½®ä¸€ä¸ªåä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;X-Proxy-Cache&lt;/code&gt;çš„å“åº”å¤´ï¼Œå€¼ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;HIT&lt;/code&gt;ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;MISS&lt;/code&gt; æˆ– &lt;code class=&quot;highlighter-rouge&quot;&gt;BYPASS&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä¿å­˜é…ç½®æ–‡ä»¶åï¼Œé‡æ–°åŠ è½½Nginxçš„é…ç½®ï¼ˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;sudo service nginx reload&lt;/code&gt;ï¼‰ï¼Œå¹¶å†æ¬¡å°è¯•HTTPè¯·æ±‚ã€‚&lt;/p&gt;

&lt;p&gt;é¦–æ¬¡è·å–CSSæ–‡ä»¶ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# GET curl request and selected headers
$ curl -X GET -I 172.17.0.13/css/style.css
Date: Fri, 05 Sep 2014 23:50:12 GMT
Content-Type: text/css
Last-Modified: Fri, 05 Sep 2014 22:46:39 GMT
Expires: Sat, 05 Sep 2015 23:50:12 GMT
Cache-Control: max-age=31536000
Cache-Control: public
X-Proxy-Cache: MISS
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å› ä¸ºä¹‹å‰æ²¡æœ‰è¯·æ±‚è¿‡è¯¥æ–‡ä»¶ï¼Œæ‰€ä»¥è¿™é‡Œè¿”å›çš„cacheçŠ¶æ€ä¸ºMISSã€‚ç¼“å­˜æœåŠ¡å™¨éœ€è¦å‘æºæœåŠ¡å™¨è¯·æ±‚èµ„æºã€‚
å†è¯•ä¸€æ¬¡ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# GET curl request and selected headers
$ curl -X GET -I 172.17.0.13/css/style.css
Date: Fri, 05 Sep 2014 23:50:48 GMT
Content-Type: text/css
Last-Modified: Fri, 05 Sep 2014 22:46:39 GMT
Expires: Sat, 05 Sep 2015 23:50:12 GMT
Cache-Control: max-age=31536000
Cache-Control: public
X-Proxy-Cache: HIT
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç¬¬äºŒä¸ªè¯·æ±‚å’Œç¬¬ä¸€ä¸ªè¯·æ±‚ç›¸å·®ä¸åˆ°30ç§’ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡&lt;code class=&quot;highlighter-rouge&quot;&gt;X-Proxy-Cache&lt;/code&gt;å¤´ä¿¡æ¯çœ‹åˆ°ç¼“å­˜çŠ¶æ€æ˜¯&lt;code class=&quot;highlighter-rouge&quot;&gt;HIT&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Expires&lt;/code&gt;å¤´ä¿¡æ¯ä¿æŒä¸å˜ï¼Œå› ä¸ºNginxåªæ˜¯ä»ç¼“å­˜ä¸­è¿”å›èµ„æºã€‚ å½“ç¼“å­˜æœåŠ¡å™¨è¿”å›åˆ°æºæœåŠ¡å™¨è·å–æ–°æ–‡ä»¶æ—¶ï¼Œé‚£äº›å¤´ä¿¡æ¯å°†ä¼šæ›´æ–°ã€‚&lt;/p&gt;

&lt;p&gt;å®‰è£…ç°åœ¨çš„è®¾ç½®ï¼ŒNginxå°†å¿½ç•¥å®¢æˆ·ç«¯çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;Cache-Control&lt;/code&gt;è¯·æ±‚å¤´ã€‚ ä½†æ˜¯ï¼Œæœ‰äº›Webå®¢æˆ·ç«¯ä¸æƒ³ä½¿ç”¨ç¼“å­˜é¡¹ç›®ï¼Œæˆ‘ä»¬å¸Œæœ›ç¼“å­˜æœåŠ¡å™¨èƒ½å¤Ÿæ”¯æŒè¿™ç§è¦æ±‚ã€‚&lt;/p&gt;

&lt;p&gt;ä¾‹å¦‚ï¼Œä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ç½‘é¡µæ—¶ï¼ŒæŒ‰ä½SHIFTï¼ŒåŒæ—¶å•å‡»é‡æ–°åŠ è½½æŒ‰é’®ï¼Œè¿™æ—¶æµè§ˆå™¨å°†å‘é€ä¸€ä¸ª&lt;code class=&quot;highlighter-rouge&quot;&gt;Cache-Control: no-cache&lt;/code&gt;ã€‚ è¿™è¦æ±‚ç¼“å­˜æœåŠ¡å™¨ä¸æä¾›èµ„æºçš„ç¼“å­˜ç‰ˆæœ¬ã€‚ ä½†ç›®å‰æˆ‘ä»¬çš„è®¾ç½®ä¼šå°†ä¹‹å¿½ç•¥ã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†åœ¨è¯·æ±‚æ—¶é€‚å½“åœ°ç»•è¿‡ç¼“å­˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨&lt;code class=&quot;highlighter-rouge&quot;&gt;location&lt;/code&gt;å—ä¸­å°†&lt;code class=&quot;highlighter-rouge&quot;&gt;proxy_cache_bypass $http_cache_control&lt;/code&gt;æŒ‡ä»¤æ·»åŠ åˆ°ç¼“å­˜æœåŠ¡å™¨ä¸­ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;location / {
    proxy_cache my_zone;
    proxy_cache_bypass  $http_cache_control;
    add_header X-Proxy-Cache $upstream_cache_status;

    include proxy_params;
    proxy_pass http://172.17.0.18:9000;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;nginx reload ä¹‹åï¼Œå¯ä»¥çœ‹åˆ°è®¾ç½®ç”Ÿæ•ˆäº†ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ curl -X GET -I 172.17.0.13/css/style.css
...
X-Proxy-Cache: HIT     # A regular request which is normally a cache HIT ...

$ curl -X GET -I -H &quot;Cache-Control: no-cache&quot; 172.17.0.13/css/style.css
...
X-Proxy-Cache: BYPASS  # ... is now bypassed when told to
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;proxy_cache_bypass&lt;/code&gt;æŒ‡ä»¤å‘ŠçŸ¥Nginxéµå®ˆHTTPè¯·æ±‚ä¸­çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;Cache-Control&lt;/code&gt;è¯·æ±‚å¤´ã€‚&lt;/p&gt;

&lt;h1 id=&quot;section-4&quot;&gt;ä»£ç†ç¼“å­˜&lt;/h1&gt;

&lt;p&gt;Nginxçš„ç¼“å­˜åŠŸèƒ½å¼ºå¤§ï¼ æˆ‘ä»¬åˆšåˆšçœ‹åˆ°å®ƒå¯ä»¥ç¼“å­˜ä»£ç†çš„HTTPè¯·æ±‚ï¼Œä½†æ˜¯å®ƒä¹Ÿå¯ä»¥ç¼“å­˜FastCGIï¼ŒuWSGIä»£ç†è¯·æ±‚çš„ç»“æœï¼Œç”šè‡³ç¼“å­˜è´Ÿè½½å¹³è¡¡è¯·æ±‚ï¼ˆâ€œupstreamâ€ï¼‰çš„ç»“æœã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ç¼“å­˜åˆ°åŠ¨æ€åº”ç”¨ç¨‹åºçš„è¯·æ±‚ç»“æœã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæˆ‘ä»¬ä½¿ç”¨Nginxæ¥ç¼“å­˜FastCGIè¿›ç¨‹çš„ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥å°†FastCGIè¿›ç¨‹è§†ä¸ºæºæœåŠ¡å™¨ï¼Œå°†Nginxä½œä¸ºç¼“å­˜æœåŠ¡å™¨ã€‚ ä¾‹å¦‚ï¼Œåœ¨&lt;code class=&quot;highlighter-rouge&quot;&gt;fideloper.com&lt;/code&gt;ä¸Šï¼Œæˆ‘ç¼“å­˜äº†ä»PHP-FPMè¿”å›çš„HTMLç»“æœã€‚&lt;/p&gt;

&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;fastcgi_cache&lt;/code&gt;çš„ç¤ºä¾‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;fastcgi_cache_path /tmp/cache levels=1:2 keys_zone=fideloper:100m inactive=60m;
fastcgi_cache_key &quot;$scheme$request_method$host$request_uri&quot;;

server {

    # Boilerplay omitted

    set $no_cache 0;

    # Example: Don't cache admin area
    # Note: Conditionals are typically frowned upon :/
    if ($request_uri ~* &quot;/(admin/)&quot;)
    {
        set $no_cache 1;
    }

    location ~ ^/(index)\.php(/|$) {
            fastcgi_cache fideloper;
            fastcgi_cache_valid 200 60m; # Only cache 200 responses, cache for 60 minutes
            fastcgi_cache_methods GET HEAD; # Only GET and HEAD methods apply
            add_header X-Fastcgi-Cache $upstream_cache_status;
            fastcgi_cache_bypass $no_cache;  # Don't pull from cache based on $no_cache
            fastcgi_no_cache $no_cache; # Don't save to cache based on $no_cache

            # Regular PHP-FPM stuff:
            include fastcgi.conf; # fastcgi_params for nginx &amp;lt; 1.6.1
            fastcgi_split_path_info ^(.+\.php)(/.+)$;
            fastcgi_pass unix:/var/run/php5-fpm.sock;
            fastcgi_index index.php;
            fastcgi_param LARA_ENV production;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¿™é‡Œçš„ç¼“å­˜è®¾ç½®é€‰é¡¹å¾ˆå¤šã€‚å¯¹äºä½¿ç”¨FastCGIç¼“å­˜ï¼Œè¯·æ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;fastcgi_cache&lt;/code&gt;æ›¿æ¢proxy_cacheçš„æ‰€æœ‰å®ä¾‹&lt;/li&gt;
  &lt;li&gt;ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;fastcgi_cache_valid 200 60m&lt;/code&gt;æ¥è®¾ç½®PHPè¯·æ±‚å“åº”çš„åˆ°æœŸæ—¶é—´ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä½ å¯ä»¥çœ‹åˆ°å®é™…æ•ˆæœï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ curl -X GET -I fideloper.com/index.php
...
Cache-Control: max-age=86400, public
X-Fastcgi-Cache: MISS

$ curl -X GET -I fideloper.com/index.php
...
X-Fastcgi-Cache: HIT

# If this URL existed, you'd see a BYPASS
$ curl -X GET -I fideloper.com/admin
...
X-Fastcgi-Cache: BYPASS
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;section-5&quot;&gt;ç›¸å…³èµ„æº&lt;/h1&gt;

&lt;p&gt;æ‚¨å¯ä»¥ä½¿ç”¨ç¼“å­˜è¿›è¡Œæ›´å¤šçš„æ“ä½œï¼Œä¾‹å¦‚è®¾ç½®ä¸è¿›è¡Œç¼“å­˜çš„æƒ…å†µï¼ˆä¾‹å¦‚ç®¡ç†åŒºåŸŸï¼‰ä»¥åŠæ¸…é™¤ç¼“å­˜çš„æ–¹æ³•ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.mnot.net/cache_docs/&quot;&gt;Learn about Web Caches&lt;/a&gt; , ä½œè€…æ˜¯Mark Nottinghamï¼ŒIETFç»„ç»‡HTTPå·¥ä½œç»„ä¸»å¸­ï¼ŒW3CæŠ€æœ¯æ¶æ„ç»„çš„æˆå‘˜ã€‚ å»ºè®®æ‰€æœ‰ç½‘ç«™å¼€å‘è€…éƒ½é˜…è¯»ã€‚è¿˜æœ‰ &lt;a href=&quot;http://www.w3.org/Protocols/rfc2616/rfc2616.html&quot;&gt;HTTP Specification&lt;/a&gt; ä¹Ÿå¾ˆæœ‰å‚è€ƒä»·å€¼ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://nginx.com/resources/admin-guide/caching/&quot;&gt;Nginx Admin Guide on Caching&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://nginx.org/en/docs/http/ngx_http_proxy_module.html&quot;&gt;HTTP Cache Docs&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://nginx.org/en/docs/http/ngx_http_fastcgi_module.html&quot;&gt;FastCGI Cache docs&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://nginx.org/en/docs/http/ngx_http_uwsgi_module.html&quot;&gt;uWSGI Cache Docs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;æœ¬æ–‡ç¿»è¯‘è‡ª&lt;a href=&quot;https://serversforhackers.com/nginx-caching&quot;&gt;Nginx Caching&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ„Ÿè°¢&lt;a href=&quot;https://translate.google.com&quot;&gt;è°·æ­Œç¿»è¯‘&lt;/a&gt;ï¼Œå®ƒå‡ºè‰²çš„æ•ˆæœå‡å°‘äº†åšä¸»å¾ˆå¤šå·¥ä½œé‡ã€‚&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Editor.mdå¼€æºåœ¨çº¿ Markdown ç¼–è¾‘å™¨å¢åŠ æœ¬åœ°è‡ªåŠ¨ä¿å­˜åŠŸèƒ½</title>
   <link href="http://spetacular.github.io/2017/04/07/editor-md-auto-save-markdown.html"/>
   <updated>2017-04-07T00:00:00+08:00</updated>
   <id>http://spetacular.github.io/2017/04/07/editor-md-auto-save-markdown</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;http://pandao.github.io/editor.md/&quot;&gt;Editor.md&lt;/a&gt; æ˜¯ä¸€æ¬¾å¼€æº Markdown åœ¨çº¿ç¼–è¾‘å™¨ã€‚åœ¨ç¼–è¾‘è¾ƒé•¿æ–‡ç« æ—¶ï¼Œä¸ºé˜²æ­¢ç–å¿½é€ æˆå†…å®¹ä¸¢å¤±ï¼Œå¯ä»¥æ·»åŠ è‡ªåŠ¨ä¿å­˜åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;p&gt;é¢„è§ˆåœ°å€ï¼š&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.text.wiki/md/&quot;&gt;https://www.text.wiki/md/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;åˆ©ç”¨localStorageæ¥æš‚å­˜æ•°æ®ã€‚å½“æ–‡æœ¬æ¡†æœ‰æ”¹åŠ¨æ—¶ï¼Œå°†å†…å®¹å­˜åˆ°localStorageé‡Œï¼›å½“é¡µé¢å†æ¬¡åŠ è½½æ—¶ï¼Œè¯»å–localStorageçš„å€¼ã€‚&lt;/p&gt;

&lt;p&gt;å‡è®¾é¡µé¢åˆ›å»ºçš„ç¼–è¾‘å™¨å‘½åä¸º mdEditor ,åˆ™åªéœ€å°†ä»¥ä¸‹jsåŠ å…¥é¡µé¢å³å¯ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;script&amp;gt;
    var key = 'default_md_key';
    mdEditor.on(&quot;load&quot;, function(){
        var content = localStorage.getItem(key);
        if(content){
            var f = confirm(&quot;æ‚¨ä¸Šæ¬¡ç¼–è¾‘çš„æ–‡ç« æœªæäº¤ï¼Œæ˜¯å¦æ¢å¤ï¼Ÿå†…å®¹ï¼š\n&quot;+content);
            if(f == true){
                testEditor.setValue(content)
            }
        }
    })

    mdEditor.on(&quot;change&quot;, function(){
        localStorage.setItem(key,this.getValue())
    })
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç”¨æˆ·å‘æœåŠ¡å™¨æäº¤æ•°æ®å¹¶ä¿å­˜æˆåŠŸåï¼Œå¯ä»¥åˆ æ‰keyã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;localStorage.removeItem(key);
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>å°ç¨‹åºæ–°èƒ½åŠ›ï¼šå…¬ä¼—å·è‡ªå®šä¹‰èœå•ç‚¹å‡»æ‰“å¼€ç›¸å…³å°ç¨‹åº</title>
   <link href="http://spetacular.github.io/2017/03/31/weixin-mp-open-minapp-in-menu.html"/>
   <updated>2017-03-31T00:00:00+08:00</updated>
   <id>http://spetacular.github.io/2017/03/31/weixin-mp-open-minapp-in-menu</id>
   <content type="html">&lt;p&gt;å¾®ä¿¡åœ¨2017å¹´3æœˆ27æ—¥å‘å¸ƒäº†&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MjM5NDAwMTA2MA==&amp;amp;mid=2695729676&amp;amp;idx=1&amp;amp;sn=2f0279377bcc6b0ea14d30389dfde698&amp;amp;chksm=83d74bc7b4a0c2d197ebad8e77b4e6a3f5c19a6ef91f0602b4a695d2ef0994fd1e6431a5babb&amp;amp;mpshare=1&amp;amp;scene=1&amp;amp;srcid=0327yIBkOfW0f1CEF7Sc1MY2#rd&quot;&gt;ã€Šå°ç¨‹åºæ–°èƒ½åŠ›ã€‹&lt;/a&gt;çš„é‡è¦æ›´æ–°ï¼Œä¸»è¦æ–°å¢äº†ä»¥ä¸‹åŠŸèƒ½ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ä¸ªäººå¼€å‘è€…å¯ç”³è¯·å°ç¨‹åº&lt;/li&gt;
  &lt;li&gt;å…¬ä¼—å·è‡ªå®šä¹‰èœå•ç‚¹å‡»å¯æ‰“å¼€ç›¸å…³å°ç¨‹åº&lt;/li&gt;
  &lt;li&gt;å…¬ä¼—å·æ¨¡ç‰ˆæ¶ˆæ¯å¯æ‰“å¼€ç›¸å…³å°ç¨‹åº&lt;/li&gt;
  &lt;li&gt;å…¬ä¼—å·å…³è”å°ç¨‹åºæ—¶ï¼Œå¯é€‰æ‹©ç»™ç²‰ä¸ä¸‹å‘é€šçŸ¥&lt;/li&gt;
  &lt;li&gt;ç§»åŠ¨Appå¯åˆ†äº«å°ç¨‹åºé¡µé¢&lt;/li&gt;
  &lt;li&gt;æ‰«ææ™®é€šé“¾æ¥äºŒç»´ç å¯æ‰“å¼€å°ç¨‹åº&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æœ¬æ–‡ä¸»è¦è¯´æ˜å®ç°å…¬ä¼—å·è‡ªå®šä¹‰èœå•ç‚¹å‡»æ‰“å¼€ç›¸å…³å°ç¨‹åºã€‚&lt;/p&gt;

&lt;p&gt;å…¬ä¼—å·å¯å°†å·²å…³è”çš„å°ç¨‹åºé¡µé¢æ”¾ç½®åˆ°è‡ªå®šä¹‰èœå•ä¸­ï¼Œç”¨æˆ·ç‚¹å‡»åå¯æ‰“å¼€è¯¥å°ç¨‹åºé¡µé¢ã€‚å…¬ä¼—å·è¿è¥è€…å¯åœ¨å…¬ä¼—å¹³å°è¿›è¡Œè®¾ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è‡ªå®šä¹‰èœå•æ¥å£è¿›è¡Œè®¾ç½®ã€‚&lt;/p&gt;

&lt;h1 id=&quot;section&quot;&gt;1.å…¬ä¼—å¹³å°è®¾ç½®æ–¹å¼&lt;/h1&gt;
&lt;p&gt;## 1.1å…³è”å°ç¨‹åº&lt;/p&gt;

&lt;p&gt;å½“è¯»è€…ä½¿ç”¨å…¬ä¼—å¹³å°è®¾ç½®æ–¹å¼æ—¶ï¼Œé¦–å…ˆè¦å…³è”å…¬ä¼—å·å’Œå°ç¨‹åºã€‚æ‰“å¼€å…¬ä¼—å¹³å°https://mp.weixin.qq.comï¼Œæ‰“å¼€â€œè®¾ç½®â€ â€“&amp;gt; â€œå…¬ä¼—å·è®¾ç½®â€ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2016/mp-add-relative-minapp.png&quot; alt=&quot;å…¬ä¼—å¹³å°å…¬ä¼—å·è®¾ç½®ï¼Œå…³è”å°ç¨‹åº&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç‚¹å‡»â€œæ·»åŠ â€æŒ‰é’®ï¼Œå³è¿›å…¥å°ç¨‹åºæ·»åŠ é¡µé¢ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2016/mp-add-relative-minapp-2.png&quot; alt=&quot;å…¬ä¼—å¹³å°å…¬ä¼—å·è®¾ç½®ï¼Œå…³è”å°ç¨‹åº&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ‰«ç éªŒè¯èº«ä»½åï¼Œå³å¯å…³è”å°ç¨‹åºã€‚å†è¾“å…¥æ¡†è¾“å…¥å°ç¨‹åºçš„AppIDï¼Œç‚¹å‡»æœç´¢æŒ‰é’®ï¼Œå³å¯å®Œæˆå…³è”ã€‚&lt;/p&gt;

&lt;p&gt;æ³¨æ„ï¼Œåªèƒ½å…³è”å…¬ä¼—å·ä¸»ä½“ä¸€è‡´çš„å°ç¨‹åºã€‚å°±æ˜¯è¯´ï¼Œå…¬å…±å·å’Œå°ç¨‹åºçš„ä¸»ä½“å¦‚æœæ˜¯ä¸ªäººï¼Œåˆ™å¿…é¡»æ˜¯åŒä¸€ä¸ªäººï¼›å¦‚æœæ˜¯ä¼ä¸šï¼Œåˆ™å¿…é¡»æ˜¯åŒä¸€ä¼ä¸šã€‚&lt;/p&gt;

&lt;p&gt;å…¬ä¼—å·å…³è”å°ç¨‹åºæ—¶ï¼Œå¯å‹¾é€‰â€œå…³è”åç»™å·²å…³æ³¨å…¬ä¼—å·çš„ç”¨æˆ·å‘é€é€šçŸ¥â€ï¼Œç»™ç²‰ä¸ä¸‹å‘é€šçŸ¥æ¶ˆæ¯ï¼Œç²‰ä¸ç‚¹å‡»è¯¥é€šçŸ¥æ¶ˆæ¯å¯ä»¥æ‰“å¼€å°ç¨‹åºã€‚è¯¥æ¶ˆæ¯ä¸å ç”¨åŸæœ‰ç¾¤å‘æ¡æ•°ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2016/mp-add-relative-minapp-3.png&quot; alt=&quot;å…¬ä¼—å¹³å°å…¬ä¼—å·è®¾ç½®ï¼Œå…³è”å°ç¨‹åº&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;section-1&quot;&gt;1.2è®¾ç½®å°ç¨‹åºè‡ªå®šä¹‰èœå•&lt;/h2&gt;

&lt;p&gt;å¯ä»¥åœ¨â€œåŠŸèƒ½ç®¡ç†â€ä¸‹â€œè‡ªå®šä¹‰èœå•â€ä¸‹ç¼–è¾‘ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2016/mp-add-relative-minapp-4.png&quot; alt=&quot;å…¬ä¼—å¹³å°å…¬ä¼—å·è®¾ç½®ï¼Œå…³è”å°ç¨‹åº&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¡«å†™è¦ç´ æœ‰ï¼š&lt;/p&gt;

&lt;p&gt;1.èœå•åç§°ï¼šåº•éƒ¨è‡ªå®šä¹‰èœå•å±•ç¤ºçš„æ–‡å­—ï¼›&lt;/p&gt;

&lt;p&gt;2.è·³è½¬ç±»å‹ï¼šé€‰æ‹©â€œè·³è½¬å°ç¨‹åºâ€Tabï¼›&lt;/p&gt;

&lt;p&gt;3.å°ç¨‹åºè·¯å¾„ï¼šå¡«å…¥å°ç¨‹åºè·¯å¾„&lt;/p&gt;

&lt;p&gt;4.å¤‡ç”¨ç½‘é¡µï¼šæ—§ç‰ˆå…¼å®¹é€‰é¡¹ã€‚æ—§ç‰ˆå¾®ä¿¡å®¢æˆ·ç«¯æ— æ³•æ”¯æŒå°ç¨‹åºæ—¶ï¼Œç”¨æˆ·ç‚¹å‡»èœå•æ—¶å°†ä¼šæ‰“å¼€å¤‡ç”¨ç½‘é¡µã€‚&lt;/p&gt;

&lt;h1 id=&quot;section-2&quot;&gt;2.å¼€å‘æ¨¡å¼è‡ªå®šä¹‰èœå•åˆ›å»º&lt;/h1&gt;

&lt;p&gt;åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œå¯ä»¥é€šè¿‡è‡ªå®šä¹‰èœå•åˆ›å»ºæ¥å£æ¥åˆ›å»ºå°ç¨‹åºçš„èœå•ã€‚æ–‡æ¡£åœ°å€ä¸º&lt;a href=&quot;https://mp.weixin.qq.com/wiki&quot;&gt;https://mp.weixin.qq.com/wiki&lt;/a&gt;ä¸‹çš„â€œè‡ªå®šä¹‰èœå•â€é¡µé¢ã€‚&lt;/p&gt;

&lt;p&gt;æ¥å£åœ°å€å¦‚ä¸‹ï¼š
&lt;code class=&quot;highlighter-rouge&quot;&gt;
https://api.weixin.qq.com/cgi-bin/menu/create?access_token=ACCESS_TOKEN
&lt;/code&gt;
è¯·æ±‚å†…å®¹ç¤ºä¾‹å¦‚ä¸‹ï¼š
&lt;code class=&quot;highlighter-rouge&quot;&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;button&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;miniprogram&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;å°ç¨‹åº&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;appid&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;wx1dda1f639e823874&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://www.qq.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;pagepath&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;page/index&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;
å®Œæ•´ç¨‹åºå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;?php
define('APPID', 'å…¬ä¼—å·APPID ');//å…¬ä¼—å·APPID
define('APPSECRET', 'å…¬ä¼—å·APPSECRET ');//å…¬ä¼—å·APPSECRET
//$menuå˜é‡ä¸ºå­˜æ”¾èœå•é¡¹çš„jsonå­—ç¬¦ä¸²
$menu =
	'{
&quot;button&quot;: [
{
&quot;type&quot;: &quot;miniprogram&quot;,
&quot;name&quot;: &quot;å°ç¨‹åº&quot;,
&quot;appid&quot;: &quot;è¯·å¡«å†™å°ç¨‹åºID&quot;,
&quot;url&quot;: &quot;http://www.qq.com&quot;,
&quot;pagepath&quot;: &quot;page/index&quot;
}
]
}';
$url = &quot;https://api.weixin.qq.com/cgi-bin/menu/create?access_token=&quot; . get_token();
$content = curl_post($url, $menu);
$ret = json_decode($content, true);
if ($ret['errcode'] == 0) {//åˆ›å»ºæˆåŠŸ
	echo 'create menu ok';
} else {//åˆ›å»ºå¤±è´¥
	echo 'create menu fail,msg:' . $ret['errmsg'];
}
function curl_post($url, $post_string) {
	$ch = curl_init();
	curl_setopt($ch, CURLOPT_URL, $url);
	curl_setopt($ch, CURLOPT_POSTFIELDS, $post_string);
	curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
	$data = curl_exec($ch);
	curl_close($ch);
	return $data;
}
function curl_get($url) {
	$ch = curl_init();
	curl_setopt($ch, CURLOPT_URL, $url);;
	curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
	curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
	curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
	if (!curl_exec($ch)) {
		$data = '';
	} else {
		$data = curl_multi_getcontent($ch);
	}
	curl_close($ch);
	return $data;
}
function get_token() {
	$url = &quot;https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;amp;appid=&quot; . APPID . &quot;&amp;amp;secret=&quot; . APPSECRET;
	$content = curl_get($url);
	$ret = json_decode($content, true);//{&quot;access_token&quot;:&quot;ACCESS_TOKEN&quot;,&quot;expires_in&quot;:7200}
	if (array_key_exists('errcode', $ret) &amp;amp;&amp;amp; $ret['errcode'] != 0) {
		return false;
	} else {
		return $ret['access_token'];
	}
}
?&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;section-3&quot;&gt;æ¬¢è¿åŠ å…¥å¾®ä¿¡å¼€å‘è€…å°å¯†åœˆ&lt;/h1&gt;
&lt;blockquote&gt;
  &lt;p&gt;å¾®ä¿¡å¼€æ”¾å¹³å°æ‹¥æœ‰è®¢é˜…å·ã€æœåŠ¡å·ã€å°ç¨‹åºå’Œä¼ä¸šå·ï¼Œå¸å¼•äº†ä¸€å¤§æ‰¹å¼€å‘è€…ï¼Œä¹Ÿå½¢æˆäº†ç‹¬ç‰¹çš„ç”Ÿæ€åœˆã€‚å¸Œæœ›æˆ‘ä»¬èƒ½å¸æ”¶èƒ½é‡ï¼Œäº¤æ¢ä¿¡æ¯ï¼Œè‡ªç”±ç”Ÿé•¿ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;PCç«¯ç‚¹å‡»é“¾æ¥ï¼š&lt;a href=&quot;https://wx.xiaomiquan.com/mweb/views/joingroup/join_group.html?group_id=4221251218&amp;amp;secret=7hrxv8fo5gg7qnjagobezs1g05wsus91&amp;amp;extra=03805215ea752e7e60e44178c4f4f15003ec659aa155aacda4ae846184cea8fe&quot;&gt;å¾®ä¿¡ç”Ÿæ€åœˆå°å¯†åœˆ&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å¾®ä¿¡æ‰«ç ï¼š
&lt;img src=&quot;http://wx4.sinaimg.cn/large/7ed0a961ly1fdb80fejqmj20k20u8diq.jpg&quot; alt=&quot;å¾®ä¿¡ç”Ÿæ€åœˆ&quot; /&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>æ•™ç¨‹ï¼šé…ç½® Let's Encrypt å…è´¹HTTPSè¯ä¹¦</title>
   <link href="http://spetacular.github.io/2017/03/29/lets-encrypt-deploy-step-by-step.html"/>
   <updated>2017-03-29T00:00:00+08:00</updated>
   <id>http://spetacular.github.io/2017/03/29/lets-encrypt-deploy-step-by-step</id>
   <content type="html">&lt;h2 id=&quot;section&quot;&gt;æœ€æ–°æ›´æ–°&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://certbot.eff.org&quot;&gt;Certbot&lt;/a&gt; æ›´æ–°äº†è‡ªåŠ¨æ›´æ–°è„šæœ¬ï¼Œç°åœ¨é…ç½®æ›´ç®€å•äº†,åŸºæœ¬å®ç°å…¨è‡ªåŠ¨åŒ–ã€‚ä»¥ Nginx å’Œ Ubuntu 16.04 ä¸ºä¾‹ï¼š&lt;/p&gt;

&lt;h3 id=&quot;certbot-&quot;&gt;1. å®‰è£… certbot è½¯ä»¶&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo apt-get update
$ sudo apt-get install software-properties-common
$ sudo add-apt-repository ppa:certbot/certbot
$ sudo apt-get update
$ sudo apt-get install python-certbot-nginx 
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;section-1&quot;&gt;2. ä¸€é”®å®‰è£…è„šæœ¬&lt;/h3&gt;
&lt;p&gt;certbot é™„å¸¦ä¸€ä¸ª nginx æ’ä»¶ï¼Œå¯ä»¥ç›´æ¥ç”Ÿæˆè¯ä¹¦å’Œå†™å…¥nginxé…ç½®æ–‡ä»¶ä¸­ã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo certbot --nginx
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;section-2&quot;&gt;3. è‡ªåŠ¨æ›´æ–°&lt;/h3&gt;
&lt;p&gt;å°†è‡ªåŠ¨æ›´æ–°è„šæœ¬åŠ å…¥crontabä¸­ï¼Œæ¯æœˆè‡ªåŠ¨æ›´æ–°ï¼Œcrontab -e åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;0 0 1 * * certbot renew
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;section-3&quot;&gt;ç›®å½•å®šä¹‰&lt;/h2&gt;
&lt;ol&gt;
  &lt;li&gt;å­˜æ”¾éªŒè¯åŸŸåçš„æ–‡ä»¶ï¼Œå³acme-dirï¼Œé»˜è®¤å­˜å‚¨åœ¨/home/xxx/www/challenges/&lt;/li&gt;
  &lt;li&gt;å­˜æ”¾æœ€ç»ˆç»“æœè¯ä¹¦çš„ç›®å½•ï¼Œå¦‚æœ¬æ–‡ä¸­çš„/data/ssl&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;section-4&quot;&gt;å­˜æ”¾éªŒè¯åŸŸåæ–‡ä»¶çš„ç›®å½•&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;     mkdir ~/www/challenges/
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç„¶åé…ç½®ä¸€ä¸ª HTTP æœåŠ¡ï¼Œä»¥ Nginx ä¸ºä¾‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    NGINX
    server {
        server_name www.yoursite.com yoursite.com;

        location ^~ /.well-known/acme-challenge/ {
            alias /home/xxx/www/challenges/;
            try_files $uri =404;
        }

        location / {
            rewrite ^/(.*)$ https://yoursite.com/$1 permanent;
        }
    }
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç„¶åé‡å¯nginxã€‚
&lt;code class=&quot;highlighter-rouge&quot;&gt;Â 
 sudo service nginx reload
&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;section-5&quot;&gt;åˆ›å»ºå­˜æ”¾è¯ä¹¦çš„ç›®å½•&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    mkdir /data/ssl
    cd /data/ssl
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;rsa--lets-encrypt-&quot;&gt;åˆ›å»ºä¸€ä¸ª RSA ç§é’¥ç”¨äº Letâ€™s Encrypt è¯†åˆ«ä½ çš„èº«ä»½&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    openssl genrsa 4096 &amp;gt; account.key
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;rsa-&quot;&gt;åˆ›å»º RSA ç§é’¥ï¼ˆå…¼å®¹æ€§å¥½ï¼‰&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    openssl genrsa 4096 &amp;gt; domain.key
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;common-name-&quot;&gt;Common Name å¿…é¡»ä¸ºä½ çš„åŸŸåï¼Œå…¶å®ƒçš„éšä¾¿å¡«&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    openssl req -new -sha256 -key domain.key -out domain.csr
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;section-6&quot;&gt;è·å–è„šæœ¬&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    wget https://raw.githubusercontent.com/diafygi/acme-tiny/master/acme_tiny.py
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;csr-&quot;&gt;æŒ‡å®šè´¦æˆ·ç§é’¥ã€CSR ä»¥åŠéªŒè¯ç›®å½•ï¼Œæ‰§è¡Œè„šæœ¬ï¼š&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    python acme_tiny.py --account-key ./account.key --csr ./domain.csr --acme-dir /home/xxx/www/challenges/ &amp;gt; ./signed.crt
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œå½“å‰ç›®å½•ä¸‹å°±ä¼šç”Ÿæˆä¸€ä¸ª signed.crtï¼Œè¿™å°±æ˜¯ç”³è¯·å¥½çš„è¯ä¹¦æ–‡ä»¶ã€‚
## è¯ä¹¦èåˆ&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    wget -O - https://letsencrypt.org/certs/lets-encrypt-x3-cross-signed.pem &amp;gt; intermediate.pem
cat signed.crt intermediate.pem &amp;gt; chained.pem
    wget -O - https://letsencrypt.org/certs/isrgrootx1.pem &amp;gt; root.pem
cat intermediate.pem root.pem &amp;gt; full_chained.pem
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;ssl&quot;&gt;sslé…ç½®&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    server {
        listen 443;
        server_name www.text.wiki;
        root   /data/htdocs/textwiki;
        autoindex on;
        index index.php index.html;
        ssl on;
        ssl_certificate /data/ssl/chained.pem;
        ssl_certificate_key /data/ssl/domain.key;
        ssl_protocols              TLSv1 TLSv1.1 TLSv1.2;
        ssl_trusted_certificate    /data/ssl/full_chained.pem;

        location / {
                    try_files $uri $uri/ /index.php;

                    location ~ \.php$ {
                        fastcgi_pass unix:/var/run/php5-fpm.sock;
                        fastcgi_param  SCRIPT_FILENAME /data/htdocs/textwiki$fastcgi_script_name;
                        include        fastcgi_params;
                    }
                }
        }
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;section-7&quot;&gt;è‡ªåŠ¨æ›´æ–°è„šæœ¬&lt;/h2&gt;
&lt;p&gt;1.æ–°å»ºæ–‡ä»¶&lt;code class=&quot;highlighter-rouge&quot;&gt;vi renew_cert.sh&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;2.å¡«å†™å¦‚ä¸‹å†…å®¹&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;
 Â  Â cd /data/ssl/
    python acme_tiny.py --account-key account.key --csr domain.csr --acme-dir /home/xxx/www/challenges/ &amp;gt; signed.crt &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;exit
    &lt;/span&gt;wget -O - https://letsencrypt.org/certs/lets-encrypt-x3-cross-signed.pem &amp;gt; intermediate.pem
    cat signed.crt intermediate.pem &amp;gt; chained.pem
    wget -O - https://letsencrypt.org/certs/isrgrootx1.pem &amp;gt; root.pem
cat intermediate.pem root.pem &amp;gt; full_chained.pem
    service nginx reload
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;3.&lt;code class=&quot;highlighter-rouge&quot;&gt;chmod +x renew_cert.sh&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;crontab&quot;&gt;åŠ å…¥crontab&lt;/h2&gt;

&lt;p&gt;crontab ä¸­åŠ å…¥è‡ªåŠ¨æ›´æ–°è„šæœ¬ï¼Œæ¯æœˆè‡ªåŠ¨æ›´æ–°ï¼Œcrontab -e åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    0 0 1 * * /data/ssl/renew_cert.sh &amp;gt;/dev/null 2&amp;gt;&amp;amp;1
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;section-8&quot;&gt;æœ€å…³é”®çš„æ˜¯ï¼Œå¦‚æœæœåŠ¡å™¨æœ‰é˜²ç«å¢™ï¼Œè¯·æ”¾å¼€æœåŠ¡å™¨çš„443å…¥å£&lt;/h2&gt;

&lt;h2 id=&quot;section-9&quot;&gt;è¯´æ˜&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡æ³¨é‡å®æˆ˜ï¼Œè·Ÿç€æ•™ç¨‹ä¸€æ­¥ä¸€æ­¥é…ç½®å³å¯ï¼Œæƒ³äº†è§£åŸç†çš„åŒå­¦ï¼Œå¯ä»¥å‚è€ƒå¦‚ä¸‹ç½‘å€ï¼š   &lt;br /&gt;
&lt;a href=&quot;https://letsencrypt.org/&quot;&gt;Letâ€™s Encryptå®˜ç½‘&lt;/a&gt;  &lt;br /&gt;
&lt;a href=&quot;https://imququ.com/post/letsencrypt-certificate.html&quot;&gt;Letâ€™s Encryptï¼Œå…è´¹å¥½ç”¨çš„ HTTPS è¯ä¹¦&lt;/a&gt;  &lt;br /&gt;
&lt;a href=&quot;https://ksmx.me/letsencrypt-ssl-https/&quot;&gt;Letâ€™s Encrypt ç»™ç½‘ç«™åŠ  HTTPS å®Œå…¨æŒ‡å—&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Docker:ç½‘ç»œé…ç½®</title>
   <link href="http://spetacular.github.io/2017/03/20/docker-network-settings.html"/>
   <updated>2017-03-20T00:00:00+08:00</updated>
   <id>http://spetacular.github.io/2017/03/20/docker-network-settings</id>
   <content type="html">&lt;p&gt;Dockerè¿è¡Œå®¹å™¨æ—¶ï¼Œä¸€ä¸ªå¸¸è§çš„é—®é¢˜æ˜¯ï¼šlocalhost(127.0.0.1)æŒ‡å‘å“ªé‡Œï¼Ÿè¿™æ¶‰åŠåˆ°Dockerçš„ç½‘ç»œé…ç½®é—®é¢˜ã€‚&lt;/p&gt;

&lt;!-- Docker ä¸€ä¸ªå¸¸ç”¨ç”¨æ³•æ˜¯å¼€æ”¾ç‰¹å®šç«¯å£æ¥å¯¹å¤–æä¾›æœåŠ¡ï¼Œå¦‚ Mysql å ç”¨3306ç«¯å£ï¼Œredis å ç”¨ 6379 ç«¯å£ã€‚è¿™æ ·å°±ç‰µæ‰¯åˆ°ç½‘ç»œé…ç½®çš„é—®é¢˜ï¼ˆä»¥ Mysql ä¸ºä¾‹ï¼‰ï¼š    
1. localhost(127.0.0.1)æŒ‡å‘å“ªé‡Œï¼Ÿ     
2. [å®¿ä¸»æœº](/2017/03/10/docker-basic-concept.html#host)å¦‚ä½•è¿æ¥åˆ°MysqlæœåŠ¡æ‰€åœ¨çš„å®¹å™¨ï¼Ÿ   
3. å¦ä¸€å°è¿è¡Œåœ¨å®¹å™¨å†…çš„phpæœåŠ¡å¦‚ä½•è¿æ¥åˆ° Mysql æœåŠ¡å™¨æ‰€åœ¨çš„å®¹å™¨ï¼Ÿ --&gt;

&lt;p&gt;Dockeræ”¯æŒçš„ç½‘ç»œæ¨¡å¼å¦‚ä¸‹ï¼šbridgeï¼ˆé»˜è®¤ï¼‰ã€hostã€containerã€network-nameã€noneã€‚&lt;/p&gt;

&lt;h1 id=&quot;bridge&quot;&gt;æ¡¥æ¥ bridge&lt;/h1&gt;
&lt;p&gt;Docker é»˜è®¤çš„ç½‘ç»œæ¨¡å¼æ˜¯ bridge ã€‚åœ¨è¯¥æ¨¡å¼ä¸‹ï¼Œdocker åˆ›å»ºäº†ä¸€ä¸ª bridgeï¼Œåç§°é€šå¸¸ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;docker0&lt;/code&gt; ã€‚ &lt;br /&gt;
å¯ä»¥ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;ifconfig&lt;/code&gt;æ¥æŸ¥çœ‹ï¼š
&lt;code class=&quot;highlighter-rouge&quot;&gt;
docker0   Link encap:Ethernet  HWaddr **:**:**:**:**:**
          inet addr:192.168.0.1  Bcast:0.0.0.0  Mask:255.255.240.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:305002 errors:0 dropped:0 overruns:0 frame:0
          TX packets:407006 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:30331811 (30.3 MB)  TX bytes:752905683 (752.9 MB)
&lt;/code&gt;
å®¿ä¸»æœºå’Œå®¹å™¨é€šè¿‡bridgeè¿›è¡Œé€šä¿¡ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2016/docker-networking-bridge-mode.jpeg&quot; alt=&quot;dockeræ¡¥æ¥bridgeæ¨¡å¼&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å®¹å™¨å†…çš„localhostæŒ‡å‘å®¹å™¨å†…éƒ¨ã€‚&lt;/p&gt;

&lt;h1 id=&quot;host&quot;&gt;æœ¬æœº host&lt;/h1&gt;
&lt;p&gt;å½“ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;--net=host&lt;/code&gt;å¯åŠ¨å®¹å™¨æ—¶ï¼Œç½‘ç»œé…ç½®ä¸º host æ¨¡å¼ã€‚è¯¥æ¨¡å¼ä¸‹ï¼Œå®¹å™¨å’Œå®¿ä¸»æœºå…±äº«ç½‘ç»œã€‚å½¢è±¡åœ°è®²ï¼Œå®¹å™¨å’Œå®¿ä¸»æœºå…±äº«ä¸€ä¸ªç½‘å¡ï¼Œåœ¨å®¹å™¨å†…çš„ç½‘ç»œè®¿é—®å¦‚åŒç›´æ¥åœ¨å®¿ä¸»æœºä¸Šæ“ä½œä¸€æ ·ã€‚ä¾‹å¦‚ï¼š
&lt;code class=&quot;highlighter-rouge&quot;&gt;
docker run --rm -it --net=host ubuntu:trusty bash
&lt;/code&gt;
å®¹å™¨å†…çš„localhostæŒ‡å‘å®¿ä¸»æœºã€‚
&lt;img src=&quot;/images/2016/docker-networking-host-mode.jpeg&quot; alt=&quot;dockeræ¡¥æ¥hostæ¨¡å¼&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;container&quot;&gt;container&lt;/h1&gt;
&lt;p&gt;Dockerå¯ä»¥æŒ‡å®šä¸€ä¸ªå®¹å™¨å¤ç”¨å¦ä¸€ä¸ªå®¹å™¨çš„ç½‘ç»œè®¾ç½®ã€‚è¿™ç§æ¨¡å¼é€‚ç”¨äºç”±å¤šä¸ªå®¹å™¨æ­å»ºæ•´å¥—ç³»ç»Ÿçš„æƒ…å†µï¼Œä¾‹å¦‚æ­å»ºPHPå¼€å‘ç¯å¢ƒæ—¶ï¼Œå¸Œæœ›Mysqlã€Rediséƒ½ä½¿ç”¨PHPå®¹å™¨çš„ç½‘ç»œé…ç½®ï¼Œå³å¯ä»¥ä½¿ç”¨è¯¥æ¨¡å¼ã€‚&lt;/p&gt;

&lt;h1 id=&quot;network-name&quot;&gt;network-name&lt;/h1&gt;
&lt;p&gt;Dockerå…è®¸ç”¨æˆ·ä½¿ç”¨Docker network driveræˆ–[ç¬¬ä¸‰æ–¹network driveræ’ä»¶]ï¼ˆhttps://docs.docker.com/engine/extend/legacy_plugins/#network-pluginsï¼‰åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œï¼Œç„¶åå¤šä¸ªå®¹å™¨éƒ½å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ç½‘ç»œã€‚å¸¸è§çš„ç¬¬ä¸‰æ–¹etwork driveræ’ä»¶æœ‰ï¼š&lt;a href=&quot;https://github.com/contiv/netplugin&quot;&gt;Contiv Networking&lt;/a&gt;ã€&lt;a href=&quot;https://github.com/openstack/kuryr&quot;&gt;Kuryr Network Plugin&lt;/a&gt;ã€&lt;a href=&quot;https://www.weave.works/docs/net/latest/introducing-weave/&quot;&gt;Weave Network Plugin&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h1 id=&quot;none&quot;&gt;none&lt;/h1&gt;
&lt;p&gt;é¡¾åæ€ä¹‰ï¼Œè¯¥æ¨¡å¼ä¸‹æ²¡æœ‰ç½‘ç»œè¿æ¥ã€‚ä¾‹å¦‚æˆ‘çš„å®¿ä¸»æœºipä¸º192.168.0.59ï¼Œåœ¨å®¹å™¨å†…è®¿é—®å®¿ä¸»æœºå°±æç¤ºæ— ç½‘ç»œã€‚
&lt;code class=&quot;highlighter-rouge&quot;&gt;
docker run -it --net=none my_ubuntu bash
root@6533968160dd:/# ping 192.168.0.59
connect: Network is unreachable
&lt;/code&gt;&lt;/p&gt;

&lt;!-- # Dockerä¸ºä»€ä¹ˆæ²¡æœ‰ nat æ¨¡å¼ --&gt;
</content>
 </entry>
 
 <entry>
   <title>Docker:åŸºæœ¬æ¦‚å¿µ</title>
   <link href="http://spetacular.github.io/2017/03/10/docker-basic-concept.html"/>
   <updated>2017-03-10T00:00:00+08:00</updated>
   <id>http://spetacular.github.io/2017/03/10/docker-basic-concept</id>
   <content type="html">&lt;h1 id=&quot;image&quot;&gt;&lt;a href=&quot;#image&quot;&gt;é•œåƒ&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;Dockeré•œåƒImageæ˜¯ä¸€ä¸ªå°±åƒå…·æœ‰&lt;a href=&quot;https://zh.wikipedia.org/wiki/Time_Machine&quot;&gt;Time Machine&lt;/a&gt;åŠŸèƒ½çš„è™šæ‹Ÿæœºï¼Œä¿å­˜ç€ç‰¹å®šæ—¶åˆ»çš„ä¸€ä¸ªå¿«ç…§ã€‚è¿™ä¸ªå¿«ç…§åŒ…å«äº†å·²å®‰è£…çš„ç¨‹åºã€å…±äº«åº“ã€é…ç½®æ–‡ä»¶ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·ç»„ç­‰ä¿¡æ¯ã€‚æ„å»ºImageæ—¶ï¼Œä»¥ä¸Šå†…å®¹ä¸ä¼šæ”¹å˜ã€‚è¿™æ„å‘³ç€å¯ä»¥åˆ©ç”¨Imageå¿«é€Ÿå¤åˆ¶å‡ºå¤šä¸ªç›¸åŒçš„è¿è¡Œå®ä½“ï¼ˆå®¹å™¨ï¼‰ã€‚&lt;/p&gt;

&lt;h1 id=&quot;container&quot;&gt;&lt;a href=&quot;#container&quot;&gt;å®¹å™¨&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;Dockerå®¹å™¨containeræ˜¯é•œåƒImageçš„è¿è¡Œå®ä½“ã€‚ä¸€ä¸ªé•œåƒå¯ä»¥ç”Ÿæˆå¤šä¸ªç›¸åŒçš„å®¹å™¨ï¼Œæ¯ä¸ªå®¹å™¨çš„ä»£ç ã€è¿è¡Œç¯å¢ƒã€ç³»ç»Ÿå·¥å…·ã€ç³»ç»Ÿåº“éƒ½å®Œå…¨ç›¸åŒã€‚è¿™åœ¨ç¯å¢ƒéƒ¨ç½²ã€æœåŠ¡æ‰©å®¹ç­‰æ–¹é¢å…·æœ‰é‡å¤§ä½œç”¨ã€‚&lt;/p&gt;

&lt;h1 id=&quot;registry&quot;&gt;&lt;a href=&quot;#registry&quot;&gt;ä»“åº“&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;Dockerä»“åº“Registryæ˜¯ä¸€ä¸ªé•œåƒå­˜å‚¨å’Œåˆ†å‘çš„æœåŠ¡ã€‚ä¸€ä¸ª Docker Registryä¸­å¯ä»¥åŒ…å«å¤šä¸ªä»“åº“ï¼ˆRepositoryï¼‰ï¼›æ¯ä¸ªä»“åº“å¯ä»¥åŒ…å«å¤šä¸ªæ ‡ç­¾ï¼ˆTagï¼‰ï¼›æ¯ä¸ªæ ‡ç­¾å¯¹åº”ä¸€ä¸ªé•œåƒã€‚&lt;/p&gt;

&lt;h1 id=&quot;build&quot;&gt;&lt;a href=&quot;#build&quot;&gt;æ„å»º&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;åˆ©ç”¨ &lt;a href=&quot;https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/#run&quot;&gt;Dockerfile&lt;/a&gt; å®šåˆ¶é•œåƒæ—¶ï¼Œå¯ä»¥ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;docker build&lt;/code&gt;å‘½ä»¤ï¼Œå°†æŒ‡ä»¤æ„å»ºä¸ºæ–‡ä»¶ç³»ç»Ÿã€‚&lt;/p&gt;

&lt;h1 id=&quot;host&quot;&gt;&lt;a href=&quot;#host&quot;&gt;å®¿ä¸»æœº&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;å®¿ä¸»æœºå°±æ˜¯è¿è¡ŒDockerå®¹å™¨çš„æœºå™¨ã€‚ä¾‹å¦‚æˆ‘åœ¨macä¸Šç”¨&lt;a href=&quot;https://docs.docker.com/docker-for-mac/&quot;&gt;Docker for Mac&lt;/a&gt;ï¼Œæ‰§è¡Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;docker pull ubuntu&lt;/code&gt;æ¥æ‹‰å–ä¸€ä¸ªubuntué•œåƒç„¶åè¿è¡Œï¼Œé‚£ä¹ˆå®¿ä¸»æœºæŒ‡çš„æ˜¯macã€‚&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>PHPå¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†å™¨asyntaskä»‹ç»</title>
   <link href="http://spetacular.github.io/2017/03/09/asyntask-desc.html"/>
   <updated>2017-03-09T00:00:00+08:00</updated>
   <id>http://spetacular.github.io/2017/03/09/asyntask-desc</id>
   <content type="html">&lt;h1 id=&quot;phpasyntask&quot;&gt;PHPå¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†å™¨asyntask&lt;/h1&gt;
&lt;p&gt;asyntaskæ˜¯ä¸€ä¸ªè½»é‡çº§å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†å™¨ï¼Œæ”¯æŒå®æ—¶ï¼Œå®šæ—¶ï¼Œé•¿æ—¶å’Œå‘¨æœŸä»»åŠ¡ã€‚&lt;/p&gt;

&lt;h2 id=&quot;section&quot;&gt;é¡¹ç›®ç”±æ¥&lt;/h2&gt;

&lt;p&gt;æœ¬é¡¹ç›®æœ€åˆç”¨äºé€šçŸ¥æ¨é€ã€‚ä¾‹å¦‚ç”¨æˆ·å‘å¸ƒè¯„è®ºï¼Œéœ€è¦æ¨é€ä¸€æ¡pushç»™åŸä½œè€…ã€‚è€Œåˆ°è‹¹æœçš„æœåŠ¡å™¨çš„è¯·æ±‚æ—¶é—´è¾ƒé•¿ï¼Œå¦‚æœç­‰å¾…è‹¹æœæœåŠ¡å™¨çš„è¿”å›ç»“æœï¼Œåˆ™æ•´ä¸ªå‘å¸ƒè¯„è®ºçš„æ¥å£çš„å“åº”æ—¶é—´å°±å¤ªé•¿äº†ã€‚å› ä¸ºæ¨é€pushæ—©1ç§’æ™š1ç§’å¯¹ç”¨æˆ·åŸºæœ¬æ²¡å½±å“ï¼Œæ‰€ä»¥å½“ç”¨æˆ·å‘å¸ƒè¯„è®ºæ—¶ï¼Œåªè¦æ•°æ®åˆ°æ•°æ®åº“ï¼Œå³å¯è¿”å›ã€‚ä¸æ­¤åŒæ—¶åˆ›å»ºä¸€æ¡å¼‚æ­¥ä»»åŠ¡ï¼Œåœ¨1ç§’å†…ç»™ç”¨æˆ·æ¨é€pushã€‚è¿™æ ·æ—¢ä¿è¯äº†æ¥å£çš„å“åº”é€Ÿåº¦ï¼Œåˆä¸å½±å“ç”¨æˆ·ä½“éªŒã€‚è¯¥é¡¹ç›®å·²ç»åœ¨çº¿ä¸Šç¯å¢ƒè¿è¡Œ1å¹´å¤šï¼Œæ‰§è¡Œäº†ç´¯è®¡8åƒä¸‡æ¡å‘½ä»¤ï¼Œè¿è¡Œç¨³å®šã€‚&lt;/p&gt;

&lt;h2 id=&quot;section-1&quot;&gt;ä¼˜ç‚¹&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;å¼‚æ­¥æ‰§è¡Œ&lt;/li&gt;
  &lt;li&gt;é›†æˆç®¡ç†åå°ï¼Œå¯è§†åŒ–æ“ä½œ&lt;/li&gt;
  &lt;li&gt;ä»£ç é›†æˆï¼Œå¯ç¼–ç¨‹&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;section-2&quot;&gt;ç¼ºç‚¹&lt;/h2&gt;

&lt;p&gt;å¹¶éçœŸæ­£å®æ—¶ï¼Œç§’çº§è¯¯å·®ã€‚&lt;/p&gt;

&lt;h1 id=&quot;section-3&quot;&gt;å®‰è£…&lt;/h1&gt;
&lt;p&gt;## ä¸‹è½½æºç &lt;/p&gt;

&lt;p&gt;ç›´æ¥ä½¿ç”¨ï¼š
&lt;code class=&quot;highlighter-rouge&quot;&gt;
git clone https://github.com/spetacular/asyntask.git
&lt;/code&gt;
å‘½ä»¤ä¸‹è½½åˆ°æœ¬åœ°ã€‚&lt;/p&gt;

&lt;p&gt;ä¹Ÿå¯ä»¥ç‚¹å‡» &lt;a href=&quot;https://github.com/spetacular/asyntask/archive/master.zip&quot;&gt;https://github.com/spetacular/asyntask/archive/master.zip&lt;/a&gt; ä¸‹è½½æœ€æ–°å†…å®¹çš„å‹ç¼©åŒ…ï¼Œç„¶åè§£å‹ã€‚
## é€šè¿‡ composer æ¥å®‰è£…&lt;/p&gt;

&lt;p&gt;åœ¨ä½ çš„ composer é¡¹ç›®ä¸­çš„ composer.json æ–‡ä»¶ä¸­ï¼Œæ·»åŠ è¿™éƒ¨åˆ†ï¼š
&lt;code class=&quot;highlighter-rouge&quot;&gt;&lt;span class=&quot;w&quot;&gt;
   &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;require&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
           &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;davidyan/asyntask&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;gt;=1.0&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
   &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;ç„¶åæ‰§è¡Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;composer install&lt;/code&gt;ã€‚è°ƒç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š
```
include â€˜./vendor/autoload.phpâ€™;
$task = new AsynTask\Task();&lt;/p&gt;

&lt;p&gt;//æ·»åŠ å•æ¬¡ä»»åŠ¡
$name = â€˜å•æ¬¡ä»»åŠ¡â€™;
$cmd = â€˜php abcd.phpâ€™;
$params = array(
	â€˜paramsâ€™=&amp;gt;1
);
$task-&amp;gt;add_once_task($name,$cmd,$params);
```&lt;/p&gt;

&lt;h1 id=&quot;section-4&quot;&gt;é…ç½®&lt;/h1&gt;
&lt;p&gt;1.asyntaskçš„æ•°æ®é»˜è®¤å­˜å‚¨åœ¨Mysqlæ•°æ®åº“é‡Œï¼Œå› æ­¤éœ€è¦æ›´æ”¹config.phpé‡Œçš„é…ç½®ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	'DB_HOST'=&amp;gt;'127.0.0.1',
	'DB_NAME' =&amp;gt; 'asyntask',
	'DB_USER' =&amp;gt; 'root',
	'DB_PWD' =&amp;gt; '',
	'DB_PORT' =&amp;gt; '3306',
	'DB_CHARSET' =&amp;gt; 'utf8mb4',
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2.å¯¼å…¥æ•°æ®è¡¨
å°†resourceæ–‡ä»¶å¤¹é‡Œçš„db.sqlå¯¼å…¥æ•°æ®åº“ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;3.é…ç½®å¥åº·æ£€æŸ¥è„šæœ¬
run.shå®šæœŸæ£€æŸ¥å¼‚æ­¥ä»»åŠ¡çš„è¿è¡ŒçŠ¶å†µï¼Œå¦‚æœæŒ‚äº†ï¼Œcron_asyn_task.phpè„šæœ¬ã€‚
&lt;code class=&quot;highlighter-rouge&quot;&gt;
chmod +x run.sh
&lt;/code&gt;
ç„¶åé…ç½®CronTabã€‚è¿è¡Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;crontab -e&lt;/code&gt;ï¼Œç„¶åæ·»åŠ ä¸€è¡Œï¼š
&lt;code class=&quot;highlighter-rouge&quot;&gt;
* * * * *  path-to/run.sh  &amp;gt; /dev/null 2&amp;gt;&amp;amp;1
&lt;/code&gt;
# ä½¿ç”¨æ–¹å¼&lt;/p&gt;

&lt;h2 id=&quot;section-5&quot;&gt;ç®¡ç†åå°&lt;/h2&gt;

&lt;p&gt;è‡ªå¸¦ç®¡ç†åå°ï¼Œå¯ä»¥è½»æ¾æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ã€æœç´¢ä»»åŠ¡ã€‚ä»£ç åœ¨&lt;a href=&quot;https://github.com/spetacular/asynadmin&quot;&gt;https://github.com/spetacular/asynadmin&lt;/a&gt;ï¼Œè¯·è‡ªè¡Œéƒ¨ç½²ã€‚
&lt;a href=&quot;https://github.com/spetacular/asynadmin/raw/master/asynadmin.jpeg&quot;&gt;&lt;img src=&quot;https://github.com/spetacular/asynadmin/raw/master/asynadmin.jpeg&quot; alt=&quot;ç®¡ç†åå°æˆªå›¾&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;section-6&quot;&gt;ç¼–ç¨‹æ–¹å¼&lt;/h2&gt;

&lt;p&gt;å¯ä»¥é›†æˆåˆ°é¡¹ç›®ä¸­ï¼Œå®Œæ•´ä½¿ç”¨ç¤ºä¾‹è§&lt;code class=&quot;highlighter-rouge&quot;&gt;test.php&lt;/code&gt;ã€‚
ä¾‹å¦‚æ·»åŠ å‘¨æœŸä»»åŠ¡ï¼š
&lt;code class=&quot;highlighter-rouge&quot;&gt;
$name = 'å‘¨æœŸä»»åŠ¡';
$cmd = 'php abc.php';
$params = array(
	'params'=&amp;gt;1
);
$timeOptions = array(
	'day'=&amp;gt;1,
	'hour'=&amp;gt;2,
	'minute'=&amp;gt;3
);
$task-&amp;gt;add_loop_task($name,$cmd,$params,$timeOptions);
&lt;/code&gt;
## å‘¨æœŸä»»åŠ¡ç¤ºä¾‹&lt;/p&gt;

&lt;p&gt;æ¯å¤©æ‰§è¡Œï¼šday 1 hour 0 minute 0 æ¯å¤©é›¶ç‚¹æ‰§è¡Œ&lt;/p&gt;

&lt;p&gt;æ¯å°æ—¶æ‰§è¡Œï¼šday 0 hour 1 minute 5 æ¯å°æ—¶çš„5åˆ†æ‰§è¡Œ&lt;/p&gt;

&lt;p&gt;æ¯éš”è‹¥å¹²åˆ†é’Ÿæ‰§è¡Œï¼šday 0 hour 0 minute 5 æ¯éš”5åˆ†é’Ÿæ‰§è¡Œ&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>å¼€å‘çŸ¥è¯†ç‚¹è®°å½•</title>
   <link href="http://spetacular.github.io/2017/01/01/develop-tips.html"/>
   <updated>2017-01-01T00:00:00+08:00</updated>
   <id>http://spetacular.github.io/2017/01/01/develop-tips</id>
   <content type="html">&lt;h1 id=&quot;cron-&quot;&gt;cron ä»»åŠ¡æ²¡æ‰§è¡Œçš„åŸå› &lt;/h1&gt;

&lt;p&gt;æŸ¥çœ‹ cron æ—¥å¿—ï¼Œæ—¥å¿—è·¯å¾„ä¸€èˆ¬åœ¨ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/var/log/cron.log
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æˆ–è€…&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/var/log/syslog
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¿™æ ·å°±èƒ½çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„é”™è¯¯ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Error: bad username; while reading /etc/crontab
(&lt;em&gt;system&lt;/em&gt;) ERROR (Syntax error, this crontab file will be ignored)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ç„¶åæŒ‰å›¾ç´¢éª¥ï¼ŒæŸ¥æ‰¾å¤±è´¥åŸå› ã€‚&lt;/p&gt;

&lt;h1 id=&quot;cron--1&quot;&gt;cron å¯åŠ¨ã€å…³é—­ã€é‡å¯ã€é‡è½½ã€æŸ¥çœ‹æœåŠ¡çŠ¶æ€&lt;/h1&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	service cron start    //å¯åŠ¨æœåŠ¡
ã€€ã€€	service cron stop     //å…³é—­æœåŠ¡
ã€€ã€€	service cron restart  //é‡å¯æœåŠ¡
ã€€ã€€	service cron reload   //é‡æ–°è½½å…¥é…ç½®
ã€€ã€€	service cron status   //æŸ¥çœ‹æœåŠ¡çŠ¶æ€ 
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;section&quot;&gt;å‘½ä»¤è¡Œè¾“é”™å‘½ä»¤å¦‚ä½•å¿«é€Ÿæ’¤é”€ï¼Ÿ&lt;/h1&gt;
&lt;p&gt;æœ€ç¬¨çš„æ–¹æ³•å¯ä»¥æŒ‰åˆ é™¤é”®ï¼Œä¸€ä¸ªä¸€ä¸ªåˆ é™¤ï¼›
&lt;img src=&quot;/images/2016/withdraw-input-1.gif&quot; alt=&quot;æ’¤é”€å‘½ä»¤&quot; /&gt;
æœ€å¿«çš„åŠæ³•æ˜¯Ctrl + Uï¼Œä¸€é”®æ¸…ç†ã€‚
&lt;img src=&quot;/images/2016/withdraw-input-2.gif&quot; alt=&quot;æ’¤é”€å‘½ä»¤&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;dockercontainer-cmd&quot;&gt;dockeræ˜¾ç¤ºå®¹å™¨å‘½ä»¤(container CMD)è¯¦æƒ…&lt;/h1&gt;

&lt;script src=&quot;https://gist.github.com/spetacular/1df9fba67d5854f4ad203b19c9cc919c.js&quot;&gt;&lt;/script&gt;

&lt;h1 id=&quot;phphhmmss&quot;&gt;phpç”Ÿæˆå½¢å®¹â€™HH:MM:SSâ€™æ ¼å¼çš„æ—¶é—´&lt;/h1&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gmstrftime('%H:%M:%S',$time)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä¾‹å¦‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;echo gmstrftime('%H:%M:%S',3786);
//Output: 01:03:06
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;chrome-&quot;&gt;chrome ä¸‹ä¸Šä¼ å›¾ç‰‡/æ–‡ä»¶æ…¢çš„è§£å†³åŠæ³•&lt;/h1&gt;

&lt;p&gt;æœ€è¿‘ç”¨flow.jsåšçš„ä¸Šä¼ å›¾ç‰‡åŠŸèƒ½ï¼Œçªç„¶å˜å¾—å¾ˆæ…¢ï¼Œè¦10ç§’å·¦å³æ‰èƒ½æ‰“å¼€ä¸Šä¼ å¯¹è¯æ¡†ã€‚æŸ¥äº†ä¸€ä¸‹ï¼Œæ˜¯mac chromeçš„ä¸€ä¸ªbugã€‚è®¾ç½®å›¾ç‰‡æ ¼å¼æ—¶ï¼Œå¦‚æœé‡‡ç”¨å¦‚ä¸‹å†™æ³•ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;input type=&quot;file&quot; accept=&quot;image/*&quot;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;åˆ™ä¼šé‡ç°ã€‚æœ‰ç½‘å‹åæ˜ ï¼Œwindows 10, chrome 53ä¸‹ä¹Ÿä¼šæœ‰æ­¤é—®é¢˜ã€‚è§£å†³åŠæ³•æ˜¯ï¼Œå°†image/*æ¢ä¸ºå…·ä½“çš„æ ¼å¼ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;input type=&quot;file&quot; accept=&quot;image/png, image/jpeg, image/gif&quot;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å‚è€ƒï¼š&lt;a href=&quot;http://stackoverflow.com/questions/39187857/inputfile-accept-image-open-dialog-so-slow-with-chrome&quot;&gt;open dialog so slow with Chrome&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;redis-keys&quot;&gt;redis æŒ‰å‰ç¼€/æ¨¡å¼æ‰¹é‡åˆ é™¤keys&lt;/h1&gt;
&lt;p&gt;æœ‰ä¸¤ç§æƒ…å†µï¼š
1.åœ¨rediså¤–éƒ¨ï¼Œå¯ä»¥ç”¨ xargsï¼›
2.åœ¨rediså†…éƒ¨ï¼Œå¯ä»¥ç”¨ eval æ‰§è¡Œè„šæœ¬
ç¤ºä¾‹ï¼š
å…ˆåˆ›å»ºä¸€äº›keyã€‚
&lt;code class=&quot;highlighter-rouge&quot;&gt;
127.0.0.1:6379&amp;gt; set david1 1
OK
127.0.0.1:6379&amp;gt; set david2 2
OK
127.0.0.1:6379&amp;gt; keys david*
1) &quot;david2&quot;
2) &quot;david1&quot;
&lt;/code&gt;
æ–¹æ³•1:
&lt;code class=&quot;highlighter-rouge&quot;&gt;
redis-cli keys david* | xargs redis-cli del
&lt;/code&gt;
æ–¹æ³•2:
è¿›å…¥ redis å‘½ä»¤è¡Œã€‚
&lt;code class=&quot;highlighter-rouge&quot;&gt;
127.0.0.1:6379&amp;gt; eval &quot;local keys = redis.call('keys',KEYS[1]) for i,v in ipairs(keys) do redis.call('del',v) end&quot; 1 david*
(nil)
&lt;/code&gt;
ä¸¤ç§æ–¹æ³•çš„ç»“æœå¦‚ä¸‹ï¼š
&lt;code class=&quot;highlighter-rouge&quot;&gt;
127.0.0.1:6379&amp;gt; keys david*
(empty list or set)
&lt;/code&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Restful APIä¸­çš„JSONæ¨¡æ¿è§£æï¼JSONOutåº“çš„ä»‹ç»</title>
   <link href="http://spetacular.github.io/2016/08/01/json-template-to-json.html"/>
   <updated>2016-08-01T00:00:00+08:00</updated>
   <id>http://spetacular.github.io/2016/08/01/json-template-to-json</id>
   <content type="html">&lt;h2 id=&quot;section&quot;&gt;é¡¹ç›®åœ°å€&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/spetacular/jsonout&quot;&gt;Restful APIä¸­çš„JSONæ¨¡æ¿è§£æ&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;json&quot;&gt;ä¸ºä»€ä¹ˆéœ€è¦JSONæ¨¡æ¿è§£æ&lt;/h2&gt;

&lt;p&gt;Restful APIçš„ä¸¤ä¸ªé‡è¦å› ç´ æ˜¯è¾“å…¥å’Œè¾“å‡ºï¼Œä¸€ä¸ªå¥½çš„APIè¦æ±‚è¾“å…¥å’Œè¾“å‡ºéƒ½æ¸…æ™°å¯è§ã€‚
è¾“å…¥åŒ…æ‹¬ç”¨æˆ·æäº¤çš„æ–¹å¼ã€å‚æ•°ç­‰ï¼Œéƒ½æ˜¯å¯é¢„æœŸçš„ã€‚å°½é‡ä¸è¦é‡‡ç”¨æ•°ç»„æ¥æ”¶ã€‚ä¾‹å¦‚ä»¥ä¸‹çš„ä¾‹å­ï¼Œ&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$data = $_POST;
$User-&amp;gt;save($data);
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¿™æ ·çš„åå¤„ä¸€æ˜¯æ— æ³•è¿‡æ»¤ç”¨æˆ·éæ³•ã€å¤šä½™çš„å‚æ•°æäº¤ï¼›äºŒæ˜¯å‚æ•°ä¸æ˜ï¼Œåç»­æ— æ³•ç»´æŠ¤ã€‚&lt;/p&gt;

&lt;p&gt;è¾“å‡ºåˆ™è¦æ±‚ä»…æä¾›æ»¡è¶³éœ€è¦çš„æœ€å°çš„æ•°æ®é›†ã€‚ä¾‹å¦‚å¦‚ä¸‹çš„ä¾‹å­ï¼Œ&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$user = User::get(1);
echo $user-&amp;gt;toJson();
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¿™æ ·çš„åå¤„ä¸€æ˜¯è¾“å‡ºçš„å†…å®¹ä¸æ¸…æ™°ï¼Œåªæœ‰çŸ¥é“æ•°æ®è¡¨çš„ç»“æ„æ‰èƒ½äº†è§£è¾“å‡ºçš„å†…å®¹ï¼›äºŒæ˜¯å¯èƒ½ä¸€ä¸å°å¿ƒæŠŠç”¨æˆ·è¡¨æ•æ„Ÿå­—æ®µï¼ˆå¯†ç ï¼Œæ‰‹æœºå·ï¼‰è¾“å‡ºï¼Œé€ æˆä¿¡æ¯æ³„æ¼ã€‚&lt;/p&gt;

&lt;h2 id=&quot;jsonout&quot;&gt;JSONOutåº“ä»‹ç»&lt;/h2&gt;

&lt;p&gt;è§£å†³è¾“å‡ºçš„æ–¹æ³•ï¼Œæ˜¯é‡‡ç”¨JSONæ¨¡æ¿è§£æçš„æ–¹æ³•ã€‚ä¾‹å¦‚ç”¨æˆ·è¡¨æœ‰id,name,pass,avatar,phoneå­—æ®µï¼Œå…¶ä¸­åªæœ‰name,avataræ˜¯éœ€è¦è¾“å‡ºçš„ã€‚é‚£ä¹ˆæ¨¡æ¿å¯ä»¥è¿™æ ·å®šä¹‰ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;avatar&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å½“è¾“å‡ºç”¨æˆ·æ•°æ®æ—¶ï¼Œä»…ä¿ç•™nameå’Œavatarï¼Œå…¶å®ƒå­—æ®µè‡ªåŠ¨è¿‡æ»¤æ‰ã€‚&lt;/p&gt;

&lt;p&gt;ä¼˜ç‚¹æ˜¯ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;è¾“å‡ºç»“æ„ä¸€ç›®äº†ç„¶&lt;/li&gt;
  &lt;li&gt;ä»…ä¿ç•™æ»¡è¶³éœ€è¦çš„æœ€å°çš„æ•°æ®é›†&lt;/li&gt;
  &lt;li&gt;æ•æ„Ÿå­—æ®µè‡ªåŠ¨è¿‡æ»¤ï¼Œå‡å°‘ä¿¡æ¯æ³„éœ²&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç®—æ³•ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class JSONOut
{
	/**
	*æŒ‰ç…§JSONæ¨¡æ¿è¾“å‡ºJSONæ•°æ®
	*@param data æºæ•°æ®
	*@param tplContent JSONæ¨¡æ¿å†…å®¹
	*@param multi æ˜¯å¦ä¸ºå¤šæ¡å†…å®¹ï¼Œé»˜è®¤å•æ¡
	*@return string
	*/
	public static function toJSON($data, $tplContent,$multi = false){
        if(empty($data)){
            return array();
        }
     
        $tplData = json_decode($tplContent,true);
        if(!$tplData){
            return false;
        }

        $array = array();
        if (!$multi) {
            // ä¸€ç»´æ•°ç»„
            $array = self::array_intersect_key_recursive($data,$tplData);
        } else {
            // å¤šç»´æ•°ç»„
            foreach($data as $key =&amp;gt; $value){
                $array[$key] = self::array_intersect_key_recursive($value,$tplData);
            }
        }

        return json_encode($array);
    }


    private static function array_intersect_key_recursive(array $array1, array $array2) {
        $array1 = array_intersect_key($array1, $array2);

        foreach ($array1 as $key =&amp;gt; &amp;amp;$value) {
            if (is_array($value) &amp;amp;&amp;amp; is_array($array2[$key])) {
                $value = $this-&amp;gt;array_intersect_key_recursive($value, $array2[$key]);
            }
        }
        return $array1;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;section-1&quot;&gt;æµ‹è¯•ä»£ç &lt;/h2&gt;

&lt;p&gt;æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$tplContent = &amp;lt;&amp;lt;&amp;lt;EOT
{
  &quot;name&quot;: &quot;&quot;,
  &quot;avatar&quot;: &quot;&quot;
}
EOT;

//å•æ¡æ•°æ®
$user  = array('id'=&amp;gt;1,'name' =&amp;gt; 'david','pass' =&amp;gt; '123456','phone'=&amp;gt;'13888888888','avatar' =&amp;gt; 'http://spetacular.github.io/images/favicon.ico');

echo JSONOut::toJSON($user,$tplContent,false);

echo &quot;\n&quot;;

//å¤šæ¡æ•°æ®
$users  = [array('id'=&amp;gt;1,'name' =&amp;gt; 'david','pass' =&amp;gt; '123456','phone'=&amp;gt;'13888888888','avatar' =&amp;gt; 'http://spetacular.github.io/images/favicon.ico'),
array('id'=&amp;gt;2,'name' =&amp;gt; 'john','pass' =&amp;gt; '654321','phone'=&amp;gt;'13888888889','avatar' =&amp;gt; 'http://spetacular.github.io/images/favicon.png')];

echo JSONOut::toJSON($users,$tplContent,true);
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;å•æ¡æ•°æ®ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;david&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;avatar&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://spetacular.github.io/images/favicon.ico&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¤šæ¡æ•°æ®ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[
  {
    &quot;name&quot;: &quot;david&quot;,
    &quot;avatar&quot;: &quot;http://spetacular.github.io/images/favicon.ico&quot;
  },
  {
    &quot;name&quot;: &quot;john&quot;,
    &quot;avatar&quot;: &quot;http://spetacular.github.io/images/favicon.png&quot;
  }
]
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;##æœªæ¥æ‰©å±•
æ³¨æ„åˆ°JSONæ¨¡æ¿ä»…æœ‰keyï¼Œæ²¡æœ‰valueï¼Œæœªæ¥å¯ä»¥åœ¨valueä¸Šæ‰©å±•ï¼Œæ¯”å¦‚é»˜è®¤å€¼ï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¦‚æœæ•°æ®é‡Œæ²¡æœ‰genderçš„æ•°æ®ï¼Œåˆ™é»˜è®¤ä¸º0ï¼›&lt;/p&gt;

&lt;p&gt;æˆ–è€…åœ¨valueä¸ŠåŠ è¿‡æ»¤å‡½æ•°ï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;age&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;int&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¡¨ç¤ºageè¦è½¬åŒ–ä¸ºæ•´å‹æ•°å­—ã€‚&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Gitä½¿ç”¨Tips</title>
   <link href="http://spetacular.github.io/2016/07/31/git-sample.html"/>
   <updated>2016-07-31T00:00:00+08:00</updated>
   <id>http://spetacular.github.io/2016/07/31/git-sample</id>
   <content type="html">&lt;h1 id=&quot;git-clone-&quot;&gt;git clone é‡å‘½åæ–‡ä»¶å¤¹&lt;/h1&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/user/userApp.git name_you_want
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h1 id=&quot;git--push403&quot;&gt;git å¤šè´¦æˆ·ä¸‹ pushå‡ºç°403é”™è¯¯&lt;/h1&gt;
&lt;p&gt;æ‰§è¡Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;git push origin master&lt;/code&gt;æ—¶å‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š
&amp;gt;remote: Permission to spetacular/asyntask.git denied to someone.
&amp;gt;fatal: unable to access â€˜https://github.com/spetacular/asyntask.git/â€™: The requested URL returned error: 403&lt;/p&gt;

&lt;p&gt;è¿™æ˜¯ç”±äº.git/configçš„[remote â€œoriginâ€]é…ç½®é”™è¯¯ã€‚å¯ä»¥æ›´æ”¹æ­¤å¤„ä»£ç ã€‚æ ¼å¼å¯ä»¥ä¸ºä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š
&lt;code class=&quot;highlighter-rouge&quot;&gt;
url=https://spetacular@github.com/spetacular/asyntask.git
url=ssh://git@github.com/spetacular/asyntask.git
&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœä¸æƒ³æ›´æ”¹å…¨å±€é…ç½®ï¼Œè€Œåªæƒ³ä¸´æ—¶ä½¿ç”¨ï¼š
&lt;code class=&quot;highlighter-rouge&quot;&gt;
git push https://spetacular@github.com/spetacular/asyntask.git master
&lt;/code&gt;&lt;/p&gt;

&lt;h1 id=&quot;git-&quot;&gt;git è®¾ç½®å’Œå–æ¶ˆç½‘ç»œä»£ç†&lt;/h1&gt;
&lt;p&gt;å¯è®¾ç½®ä¸ºshadowsocksä»£ç†ï¼š
```
git config â€“global https.proxy http://127.0.0.1:1080&lt;/p&gt;

&lt;p&gt;git config â€“global https.proxy https://127.0.0.1:1080&lt;/p&gt;

&lt;p&gt;git config â€“global â€“unset http.proxy&lt;/p&gt;

&lt;p&gt;git config â€“global â€“unset https.proxy
```&lt;/p&gt;

&lt;h1 id=&quot;git-tag&quot;&gt;git æ›´æ–°ç‰¹å®štag&lt;/h1&gt;
&lt;p&gt;å·²ç»æ‰“è¿‡tagï¼Œä½†åˆå‘ç°éœ€è¦å¾®è°ƒï¼Œå†æ¬¡&lt;code class=&quot;highlighter-rouge&quot;&gt;git tag  1.0.0&lt;/code&gt;æ—¶ï¼Œä¼šå‘ç”Ÿå¦‚ä¸‹é”™è¯¯
&amp;gt;fatal: tag â€˜1.0.0â€™ already exists&lt;/p&gt;

&lt;p&gt;1.åˆ é™¤æœ¬åœ°tag:
&lt;code class=&quot;highlighter-rouge&quot;&gt;
 git tag -d 1.0.0
&lt;/code&gt;
2.é‡æ–°æ‰“tagï¼š
 &lt;code class=&quot;highlighter-rouge&quot;&gt;
 git tag  1.0.0
&lt;/code&gt;
3.pushåˆ°æœåŠ¡å™¨
 &lt;code class=&quot;highlighter-rouge&quot;&gt;
 git push --force origin refs/tags/1.0.0:refs/tags/1.0.0
&lt;/code&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Leetcode 344. Reverse String - åè½¬å­—ç¬¦ä¸²</title>
   <link href="http://spetacular.github.io/2016/07/25/reverse-string.html"/>
   <updated>2016-07-25T00:00:00+08:00</updated>
   <id>http://spetacular.github.io/2016/07/25/reverse-string</id>
   <content type="html">&lt;h2 id=&quot;section&quot;&gt;é¢˜ç›®åç§°&lt;/h2&gt;

&lt;p&gt;Reverse String ï¼ˆåè½¬å­—ç¬¦ä¸²ï¼‰&lt;/p&gt;

&lt;h2 id=&quot;section-1&quot;&gt;é¢˜ç›®åœ°å€&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://leetcode.com/problems/reverse-string/&quot;&gt;https://leetcode.com/problems/reverse-string/&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;section-2&quot;&gt;é¢˜ç›®æè¿°&lt;/h2&gt;
&lt;p&gt;è‹±æ–‡ï¼šWrite a function that takes a string as input and returns the string reversed.&lt;/p&gt;

&lt;p&gt;Example:
Given s = â€œhelloâ€, return â€œollehâ€.&lt;/p&gt;

&lt;p&gt;ä¸­æ–‡ï¼šåè½¬ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ä¾‹å¦‚â€helloâ€ï¼Œè½¬åŒ–ä¸ºâ€ollehâ€ã€‚&lt;/p&gt;

&lt;h2 id=&quot;section-3&quot;&gt;è§£æ³•&lt;/h2&gt;

&lt;p&gt;ç®—æ³•ä»£ç ï¼ˆswiftï¼‰å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class Solution {
    func reverseString(s: String) -&amp;gt; String {
        var len = s.characters.count
        var sArr  = [Character](count:len, repeatedValue:&quot; &quot;)
        for i in s.characters{
            sArr[--len] = i
        }
        
        return String(sArr)
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç®—æ³•å¤æ‚åº¦ä¸ºO(N)ã€‚&lt;/p&gt;

&lt;p&gt;è¿˜æœ‰ä¸€ç§æ—¶é—´å¤æ‚åº¦ä¸ºO(N/2)çš„è§£æ³•ï¼Œå³äº¤æ¢ä¸ä¸­å¿ƒå¯¹ç§°ä½ç½®çš„å­—ç¬¦ï¼Œè¿™æ ·å¯ä»¥åªå¾ªç¯N/2æ¬¡ã€‚&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Leetcode 110. Balanced Binary Tree - åˆ¤æ–­æ˜¯å¦ä¸ºå¹³è¡¡äºŒå‰æ ‘ï¼ˆé€’å½’è§£æ³•ï¼‰</title>
   <link href="http://spetacular.github.io/2016/07/25/balanced-tree.html"/>
   <updated>2016-07-25T00:00:00+08:00</updated>
   <id>http://spetacular.github.io/2016/07/25/balanced-tree</id>
   <content type="html">&lt;h2 id=&quot;section&quot;&gt;é¢˜ç›®åç§°&lt;/h2&gt;

&lt;p&gt;Balanced Binary Tree ï¼ˆåˆ¤æ–­æ˜¯å¦ä¸ºå¹³è¡¡äºŒå‰æ ‘ï¼‰&lt;/p&gt;

&lt;h2 id=&quot;section-1&quot;&gt;é¢˜ç›®åœ°å€&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://leetcode.com/problems/balanced-binary-tree/&quot;&gt;https://leetcode.com/problems/balanced-binary-tree/&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;section-2&quot;&gt;é¢˜ç›®æè¿°&lt;/h2&gt;
&lt;p&gt;è‹±æ–‡ï¼šGiven a binary tree, determine if it is height-balanced.&lt;/p&gt;

&lt;p&gt;For this problem, a height-balanced binary tree is defined as a binary tree in which the depth of the two subtrees of every node never differ by more than 1.&lt;/p&gt;

&lt;p&gt;ä¸­æ–‡ï¼šç»™ä¸€ä¸ªäºŒå‰æ ‘ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºå¹³è¡¡äºŒå‰æ ‘ã€‚&lt;/p&gt;

&lt;h2 id=&quot;section-3&quot;&gt;è§£æ³•&lt;/h2&gt;

&lt;p&gt;ç®—æ³•ä»£ç ï¼ˆswiftï¼‰å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class Solution {
    
    func getHeight(root: TreeNode?) -&amp;gt; Int{
        if root == nil {
            return 0
        }
        var leftCount = 0;
        var rightCount = 0;
        if root!.left != nil{
            leftCount = getHeight(root!.left) + 1
        }
        
        if root!.right != nil{
            rightCount = getHeight(root!.right) + 1
        }
        
        return leftCount &amp;gt; rightCount ? leftCount : rightCount
        
    }
    
    
    func isBalanced(root: TreeNode?) -&amp;gt; Bool {
        if root == nil {
            return true
        }
        var leftCount = root!.left == nil ? 0:getHeight(root!.left)+1
        var rightCount = root!.right == nil ? 0:getHeight(root!.right)+1
        if abs(leftCount-rightCount) &amp;gt; 1{
            return false
        }else if !isBalanced(root!.left) || !isBalanced(root!.right){
            return false
        }else{
            return true
        }
        
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æµ‹è¯•ç”¨ä¾‹ç¤ºä¾‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://spetacular.github.io/images/2016/balanced_tree_test_case.jpg&quot; alt=&quot;å¹³è¡¡äºŒå‰æ ‘æµ‹è¯•ç”¨ä¾‹&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;public class TreeNode {
     public var val: Int
     public var left: TreeNode?
     public var right: TreeNode?
     public init(_ val: Int) {
         self.val = val
         self.left = nil
         self.right = nil
     }
}

//[1,null,2,null,3]
var r1 = TreeNode(1)
var r2 = TreeNode(2)
var r3 = TreeNode(3)
r1.right = r2
r2.right = r3
var s = Solution()
s.isBalanced(r1)//false
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

</content>
 </entry>
 
 
</feed>
